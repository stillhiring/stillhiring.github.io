(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"3r0x":function(t,s,e){"use strict";e.r(s);var a=e("xi34"),i=e("q1z7"),n=e.n(i),r=e("rFsW"),o=e("gFFP"),d=e("KVGF"),c=e.n(d),l=e("tZHv"),p=e("Vxjr"),u=n.a.View.extend({className:"magpassword",events:{"click .access":"onAccessClick","keydown #magpassword-input":"onPasswordKeydown","input #magpassword-input":"onPasswordInput"},initialize:function(t){r.a.bindAll(this),r.a.extend(this,t),this.router=t.router,this.template=c.a["template-viewer-mag-password"]},render:function(t){var s,e=this,i=t.mag.pass_bg;r.a.extend(this,t),s=new o.UserModel(this.mag.user),Object(a.a)(new Image).load((function(){e.$el.html(e.template({user:s,pass_bg:i,Constants:l.a})),e.$parent&&(e.$parent.find(e.className).remove(),e.$parent.append(e.$el)),e.delegateEvents(),r.a.delay((function(){e.$(".back, .center-content").removeClass("invisible"),r.a.delay((function(){e.$(".author, .powered").removeClass("invisible")}),700)}),200)})).prop("src",i||Object(p.findImagePath)("./viewer/mag-password/bg.jpg"))},onAccessClick:function(){var t=a.a.trim(Object(a.a)("#magpassword-input").val());t?(this.xhr&&this.xhr.abort(),this.xhr=a.a.ajax({url:"/api/readymag/authorize",method:"POST",data:{pass:t,num_id:this.mag.num_id},success:function(){this.proceed()},error:function(){Object(a.a)("#magpassword-input").focus().select(),this.shake()},context:this})):this.shake()},proceed:function(){Object(a.a)("body").removeClass("black"),this.remove(),this.mag.has_code_injection||this.mag.opts&&this.mag.opts.gtm_id?window.location.reload():n.a.history.loadUrl(n.a.history.fragment)},onPasswordKeydown:function(t){13===t.keyCode&&this.onAccessClick()},onPasswordInput:function(t){this.$(".access").toggleClass("disabled",!this.$(".password-input").val()),this.$(".password-input").toggleClass("active",this.$(".password-input").val().length>0)},shake:function(){var t=this;this.$(".password-wrapper").addClass("shake"),r.a.delay((function(){t.$(".password-wrapper").removeClass("shake")}),500)}});s.default=u},KVGF:function(module,exports){module.exports={"template-viewer-mag-password":function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='\n\t<div class="magpassword-container">\n\t\t<div class="img-preloader"></div>\n\t\t<div class="back invisible" '+(null==(__t=pass_bg?'style="background-image:url('+pass_bg+')"':"")?"":__t)+'></div>\n\t\t<div class="center-table">\n\t\t\t<div class="center-cell">\n\t\t\t\t<div class="center-content invisible">\n\t\t\t\t\t\x3c!--__magterm--\x3e\n\t\t\t\t\t<div class="password-wrapper">\n\t\t\t\t\t\t<div class="input-wrapper">\n\t\t\t\t\t\t\t<input type="password" class="password-input" placeholder="Enter password" id="magpassword-input" required>\n\t\t\t\t\t\t\t<div class="access disabled">Go to project</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t',user.get("permissions")&&user.get("permissions").white_label||(__p+='\n\t\t\t<div class="author invisible">\n\t\t\t\t<div class="userpic">\n\t\t\t\t\t<a href="'+(null==(__t=user.getLink())?"":_.escape(__t))+'"><img src="'+(null==(__t=user.getUserpic(128))?"":_.escape(__t))+'" alt=""></a>\n\t\t\t\t\t<a href="'+(null==(__t=user.getLink())?"":_.escape(__t))+'"><div class="username">'+(null==(__t=user.get("name"))?"":_.escape(__t))+'</div></a>\n\t\t\t\t</div>\n\t\t\t\t<div class="caption">Published by</div>\n\t\t\t</div>\n\t\t\t<div class="powered invisible">\n\t\t\t\t<div class="caption-powered">Made with</div>\n\t\t\t\t<a href="'+(null==(__t=Constants.readymag_host)?"":__t)+'"><div class="logo-powered"></div></a>\n\t\t\t</div>\n\t\t'),__p+="\n\t</div>\n";return __p}}}}]);