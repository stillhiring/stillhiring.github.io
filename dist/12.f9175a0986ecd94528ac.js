(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{BZWO:function(e,t,n){n("nNpV"),e.exports=window.tinyMCE},nNpV:function(module,exports,__webpack_require__){function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var dynamicImport=!0,each,extend,JSON,XHR;!function(e){var t=/^\s*|\s*$/g,n="$1"==="B".replace(/A(.)|B/,"$1"),o={majorVersion:"3",minorVersion:"5.10",releaseDate:"2013-10-24",_init:function(){var t,n,o,i,r,a,s=this,c=document,l=navigator,d=l.userAgent;if(s.isIE11=-1!=d.indexOf("Trident/")&&(-1!=d.indexOf("rv:")||-1!=l.appName.indexOf("Netscape")),s.isOpera=e.opera&&opera.buildNumber,s.isWebKit=/WebKit/.test(d),s.isIE=!s.isWebKit&&!s.isOpera&&/MSIE/gi.test(d)&&/Explorer/gi.test(l.appName)||s.isIE11,s.isIE6=s.isIE&&/MSIE [56]/.test(d),s.isIE7=s.isIE&&/MSIE [7]/.test(d),s.isIE8=s.isIE&&/MSIE [8]/.test(d),s.isIE9=s.isIE&&/MSIE [9]/.test(d),s.isGecko=!s.isWebKit&&!s.isIE11&&/Gecko/.test(d),s.isMac=-1!=d.indexOf("Mac"),s.isAir=/adobeair/i.test(d),s.isIDevice=/(iPad|iPhone)/.test(d),s.isIOS5=s.isIDevice&&d.match(/AppleWebKit\/(\d*)/)[1]>=534,e.tinyMCEPreInit)return s.suffix=tinyMCEPreInit.suffix,s.baseURL=tinyMCEPreInit.base,void(s.query=tinyMCEPreInit.query);for(s.suffix="",n=c.getElementsByTagName("base"),t=0;t<n.length;t++)(a=n[t].href)&&(/^https?:\/\/[^\/]+$/.test(a)&&(a+="/"),i=a?a.match(/.*\//)[0]:"");function u(e){return e.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(e.src)?(/_(src|dev)\.js/g.test(e.src)&&(s.suffix="_src"),-1!=(r=e.src.indexOf("?"))&&(s.query=e.src.substring(r+1)),s.baseURL=e.src.substring(0,e.src.lastIndexOf("/")),i&&-1==s.baseURL.indexOf("://")&&0!==s.baseURL.indexOf("/")&&(s.baseURL=i+s.baseURL),s.baseURL):null}for(n=c.getElementsByTagName("script"),t=0;t<n.length;t++)if(u(n[t]))return;if(o=c.getElementsByTagName("head")[0])for(n=o.getElementsByTagName("script"),t=0;t<n.length;t++)if(u(n[t]))return},is:function(e,t){return t?!("array"!=t||!o.isArray(e))||_typeof(e)==t:void 0!==e},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},makeMap:function(e,t,n){var o;for(t=t||",","string"==typeof(e=e||[])&&(e=e.split(t)),n=n||{},o=e.length;o--;)n[e[o]]={};return n},each:function(e,t,n){var o,i;if(!e)return 0;if(n=n||e,void 0!==e.length){for(o=0,i=e.length;o<i;o++)if(!1===t.call(n,e[o],o,e))return 0}else for(o in e)if(e.hasOwnProperty(o)&&!1===t.call(n,e[o],o,e))return 0;return 1},map:function(e,t){var n=[];return o.each(e,(function(e){n.push(t(e))})),n},grep:function(e,t){var n=[];return o.each(e,(function(e){t&&!t(e)||n.push(e)})),n},inArray:function(e,t){var n,o;if(e)for(n=0,o=e.length;n<o;n++)if(e[n]===t)return n;return-1},extend:function(e,t){var n,o,i,r,a=arguments;for(n=1,o=a.length;n<o;n++)for(i in t=a[n])t.hasOwnProperty(i)&&void 0!==(r=t[i])&&(e[i]=r);return e},trim:function(e){return(e?""+e:"").replace(t,"")},create:function(e,t,n){var o,i,r,a,s,c=this,l=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),r=e[3].match(/(^|\.)(\w+)$/i)[2],!(i=c.createNS(e[3].replace(/\.\w+$/,""),n))[r]){if("static"==e[2])return i[r]=t,void(this.onCreate&&this.onCreate(e[2],e[3],i[r]));t[r]||(t[r]=function(){},l=1),i[r]=t[r],c.extend(i[r].prototype,t),e[5]&&(o=c.resolve(e[5]).prototype,a=e[5].match(/\.(\w+)$/i)[1],s=i[r],i[r]=l?function(){return o[a].apply(this,arguments)}:function(){return this.parent=o[a],s.apply(this,arguments)},i[r].prototype[r]=i[r],c.each(o,(function(e,t){i[r].prototype[t]=o[t]})),c.each(t,(function(e,t){o[t]?i[r].prototype[t]=function(){return this.parent=o[t],e.apply(this,arguments)}:t!=r&&(i[r].prototype[t]=e)}))),c.each(t.static,(function(e,t){i[r][t]=e})),this.onCreate&&this.onCreate(e[2],e[3],i[r].prototype)}},walk:function(e,t,n,i){i=i||this,e&&(n&&(e=e[n]),o.each(e,(function(e,r){if(!1===t.call(i,e,r,n))return!1;o.walk(e,t,n,i)})))},createNS:function(t,n){var o,i;for(n=n||e,t=t.split("."),o=0;o<t.length;o++)n[i=t[o]]||(n[i]={}),n=n[i];return n},resolve:function(t,n){var o,i;for(n=n||e,o=0,i=(t=t.split(".")).length;o<i&&(n=n[t[o]]);o++);return n},addUnload:function(t,n){var o,i=this;function r(){var t=document;function n(){t.detachEvent("onstop",n),o&&o(),t=0}"interactive"==t.readyState&&(t&&t.attachEvent("onstop",n),e.setTimeout((function(){t&&t.detachEvent("onstop",n)}),0))}return o=function(){var t,n,a=i.unloads;if(a){for(n in a)(t=a[n])&&t.func&&t.func.call(t.scope,1);e.detachEvent?(e.detachEvent("onbeforeunload",r),e.detachEvent("onunload",o)):e.removeEventListener&&e.removeEventListener("unload",o,!1),i.unloads=t=a=w=o=0,e.CollectGarbage&&CollectGarbage()}},t={func:t,scope:n||this},i.unloads?i.unloads.push(t):(e.attachEvent?(e.attachEvent("onunload",o),e.attachEvent("onbeforeunload",r)):e.addEventListener&&e.addEventListener("unload",o,!1),i.unloads=[t]),t},removeUnload:function(e){var t=this.unloads,n=null;return o.each(t,(function(o,i){if(o&&o.func==e)return t.splice(i,1),n=e,!1})),n},explode:function(e,t){return!e||o.is(e,"array")?e:o.map(e.split(t||","),o.trim)},_addVer:function(e){var t;return this.query?(t=(-1==e.indexOf("?")?"?":"&")+this.query,-1==e.indexOf("#")?e+t:e.replace("#",t+"#")):e},_replace:function(e,t,o){return n?o.replace(e,(function(){var e,n=t,o=arguments;for(e=0;e<o.length-2;e++)n=void 0===o[e]?n.replace(new RegExp("\\$"+e,"g"),""):n.replace(new RegExp("\\$"+e,"g"),o[e]);return n})):o.replace(e,t)}};o._init(),e.tinymce=e.tinyMCE=o}(window),tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,inDispatch:!1,Dispatcher:function(e){this.scope=e||this,this.listeners=[]},add:function(e,t){return this.listeners.push({cb:e,scope:t||this.scope}),e},addToTop:function(e,t){var n={cb:e,scope:t||this.scope};return this.inDispatch?this.listeners=[n].concat(this.listeners):this.listeners.unshift(n),e},remove:function(e){var t=this.listeners,n=null;return tinymce.each(t,(function(o,i){if(e==o.cb)return n=o,t.splice(i,1),!1})),n},dispatch:function(){var e,t,n,o=this,i=arguments,r=o.listeners;for(o.inDispatch=!0,t=0;t<r.length&&!1!==(e=(n=r[t]).cb.apply(n.scope,i.length>0?i:[n.scope]));t++);return o.inDispatch=!1,e}}),each=tinymce.each,tinymce.create("tinymce.util.URI",{URI:function(e,t){var n,o,i=this;e=tinymce.trim(e),t=i.settings=t||{},/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e)?i.source=e:(0===e.indexOf("/")&&0!==e.indexOf("//")&&(e=(t.base_uri&&t.base_uri.protocol||"http")+"://mce_host"+e),/^[\w\-]*:?\/\//.test(e)||(o=t.base_uri?t.base_uri.path:new tinymce.util.URI(location.href).directory,e=(t.base_uri&&t.base_uri.protocol||"http")+"://mce_host"+i.toAbsPath(o,e)),e=e.replace(/@@/g,"(mce_at)"),e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e),each(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],(function(t,n){var o=e[n];o&&(o=o.replace(/\(mce_at\)/g,"@@")),i[t]=o})),(n=t.base_uri)&&(i.protocol||(i.protocol=n.protocol),i.userInfo||(i.userInfo=n.userInfo),i.port||"mce_host"!==i.host||(i.port=n.port),i.host&&"mce_host"!==i.host||(i.host=n.host),i.source=""))},setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var t,n=this;if("./"===e)return e;if("mce_host"!=(e=new tinymce.util.URI(e,{base_uri:n})).host&&n.host!=e.host&&e.host||n.port!=e.port||n.protocol!=e.protocol)return e.getURI();var o=n.getURI(),i=e.getURI();return o==i||"/"==o.charAt(o.length-1)&&o.substr(0,o.length-1)==i?o:(t=n.toRelPath(n.path,e.path),e.query&&(t+="?"+e.query),e.anchor&&(t+="#"+e.anchor),t)},toAbsolute:function(e,t){return(e=new tinymce.util.URI(e,{base_uri:this})).getURI(this.host==e.host&&this.protocol==e.protocol?t:0)},toRelPath:function(e,t){var n,o,i,r=0,a="";if(e=(e=e.substring(0,e.lastIndexOf("/"))).split("/"),n=t.split("/"),e.length>=n.length)for(o=0,i=e.length;o<i;o++)if(o>=n.length||e[o]!=n[o]){r=o+1;break}if(e.length<n.length)for(o=0,i=n.length;o<i;o++)if(o>=e.length||e[o]!=n[o]){r=o+1;break}if(1===r)return t;for(o=0,i=e.length-(r-1);o<i;o++)a+="../";for(o=r-1,i=n.length;o<i;o++)a+=o!=r-1?"/"+n[o]:n[o];return a},toAbsPath:function(e,t){var n,o,i,r=0,a=[];for(o=/\/$/.test(t)?"/":"",e=e.split("/"),t=t.split("/"),each(e,(function(e){e&&a.push(e)})),e=a,n=t.length-1,a=[];n>=0;n--)0!==t[n].length&&"."!==t[n]&&(".."!==t[n]?r>0?r--:a.push(t[n]):r++);return 0!==(i=(n=e.length-r)<=0?a.reverse().join("/"):e.slice(0,n).join("/")+"/"+a.reverse().join("/")).indexOf("/")&&(i="/"+i),o&&i.lastIndexOf("/")!==i.length-1&&(i+=o),i},getURI:function(e){var t,n=this;return n.source&&!e||(t="",e||(n.protocol&&(t+=n.protocol+"://"),n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}}),function(){var e=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(t){var n,o=this.get(t);return o&&e(o.split("&"),(function(e){e=e.split("="),(n=n||{})[unescape(e[0])]=unescape(e[1])})),n},setHash:function(t,n,o,i,r,a){var s="";e(n,(function(e,t){s+=(s?"&":"")+escape(t)+"="+escape(e)})),this.set(t,s,o,i,r,a)},get:function(e){var t,n,o=document.cookie,i=e+"=";if(o){if(-1==(n=o.indexOf("; "+i))){if(0!==(n=o.indexOf(i)))return null}else n+=2;return-1==(t=o.indexOf(";",n))&&(t=o.length),unescape(o.substring(n+i.length,t))}},set:function(e,t,n,o,i,r){document.cookie=e+"="+escape(t)+(n?"; expires="+n.toGMTString():"")+(o?"; path="+escape(o):"")+(i?"; domain="+i:"")+(r?"; secure":"")},remove:function(e,t,n){var o=new Date;o.setTime(o.getTime()-1e3),this.set(e,"",o,t,n)}})}(),function(){function serialize(e,t){var n,o,i,r;if(t=t||'"',null==e)return"null";if("string"==(i=_typeof(e)))return o="\bb\tt\nn\ff\rr\"\"''\\\\",t+e.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,(function(e,i){return'"'===t&&"'"===e?e:(n=o.indexOf(i))+1?"\\"+o.charAt(n+1):(e=i.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e)}))+t;if("object"==i){if(e.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(e)){for(n=0,o="[";n<e.length;n++)o+=(n>0?",":"")+serialize(e[n],t);return o+"]"}for(r in o="{",e)e.hasOwnProperty(r)&&(o+="function"!=typeof e[r]?(o.length>1?","+t:t)+r+t+":"+serialize(e[r],t):"");return o+"}"}return""+e}tinymce.util.JSON={serialize:serialize,parse:function parse(s){try{return eval("("+s+")")}catch(e){}}}}(),tinymce.create("static tinymce.util.XHR",{send:function(e){var t,n=window,o=0;function i(){!e.async||4==t.readyState||o++>1e4?(e.success&&o<1e4&&200==t.status?e.success.call(e.success_scope,""+t.responseText,t,e):e.error&&e.error.call(e.error_scope,o>1e4?"TIMED_OUT":"GENERAL",t,e),t=null):n.setTimeout(i,10)}function r(e){t=0;try{t=new ActiveXObject(e)}catch(e){}return t}if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=!1!==e.async,e.data=e.data||"",t=n.XMLHttpRequest?new XMLHttpRequest:r("Microsoft.XMLHTTP")||r("Msxml2.XMLHTTP")){if(t.overrideMimeType&&t.overrideMimeType(e.content_type),t.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.content_type&&t.setRequestHeader("Content-Type",e.content_type),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(e.data),!e.async)return i();n.setTimeout(i,10)}}}),extend=tinymce.extend,JSON=tinymce.util.JSON,XHR=tinymce.util.XHR,tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(e){this.settings=extend({},e),this.count=0},send:function(e){var t=e.error,n=e.success;(e=extend(this.settings,e)).success=function(o,i){void 0===(o=JSON.parse(o))&&(o={error:"JSON Parse error."}),o.error?t.call(e.error_scope||e.scope,o.error,i):n.call(e.success_scope||e.scope,o.result)},e.error=function(n,o){t&&t.call(e.error_scope||e.scope,n,o)},e.data=JSON.serialize({id:e.id||"c"+this.count++,method:e.method,params:e.params}),e.content_type="application/json",XHR.send(e)},static:{sendRPC:function(e){return(new tinymce.util.JSONRequest).send(e)}}}),function(e){e.VK={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey},metaKeyPressed:function(t){return e.isMac?t.metaKey:t.ctrlKey&&!t.altKey}}}(tinymce),tinymce.util.Quirks=function(e){var t,n,o,i=tinymce.VK,r=i.BACKSPACE,a=i.DELETE,s=e.dom,c=e.selection,l=e.settings,d=e.parser,u=e.serializer,f=tinymce.each;function p(t,n){try{e.getDoc().execCommand(t,!1,n)}catch(e){}}function m(){var t=e.getDoc().documentMode;return t||6}function h(e){return e.isDefaultPrevented()}function g(){e.onKeyDown.add((function(e,t){if(!h(t)&&t.keyCode===r&&c.isCollapsed()&&0===c.getRng(!0).startOffset){var n=c.getNode().previousSibling;n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(s.remove(n),tinymce.dom.Event.cancel(t))}}))}function v(){var t,n,o,r,a,d,u,m,h,g,v,y,b,C=document,_=e.getDoc();function x(e){var c,l;c=e.screenX-d,l=e.screenY-u,y=c*a[2]+m,b=l*a[3]+h,y=y<5?5:y,b=b<5?5:b,(i.modifierPressed(e)||"IMG"==o.nodeName&&a[2]*a[3]!=0)&&(y=Math.round(b/g),b=Math.round(y*g)),s.setStyles(r,{width:y,height:b}),a[2]<0&&r.clientWidth<=y&&s.setStyle(r,"left",t+(m-y)),a[3]<0&&r.clientHeight<=b&&s.setStyle(r,"top",n+(h-b))}function S(){function t(t,n){n&&(o.style[t]||!e.schema.isValid(o.nodeName.toLowerCase(),t)?s.setStyle(o,t,n):s.setAttrib(o,t,n))}t("width",y),t("height",b),s.unbind(_,"mousemove",x),s.unbind(_,"mouseup",S),C!=_&&(s.unbind(C,"mousemove",x),s.unbind(C,"mouseup",S)),s.remove(r),E(o)}function E(e){var i,c,l;k(),i=s.getPos(e),t=i.x,n=i.y,c=e.offsetWidth,l=e.offsetHeight,o!=e&&(o=e,y=b=0),f(v,(function(e,i){var f;(f=s.get("mceResizeHandle"+i))?s.show(f):(f=s.add(_.documentElement,"div",{id:"mceResizeHandle"+i,class:"mceResizeHandle",style:"cursor:"+i+"-resize; margin:0; padding:0"}),s.bind(f,"mousedown",(function(i){i.preventDefault(),S(),d=i.screenX,u=i.screenY,m=o.clientWidth,h=o.clientHeight,g=h/m,a=e,r=o.cloneNode(!0),s.addClass(r,"mceClonedResizable"),s.setStyles(r,{left:t,top:n,margin:0}),_.documentElement.appendChild(r),s.bind(_,"mousemove",x),s.bind(_,"mouseup",S),C!=_&&(s.bind(C,"mousemove",x),s.bind(C,"mouseup",S))}))),s.setStyles(f,{left:c*e[0]+t-f.offsetWidth/2,top:l*e[1]+n-f.offsetHeight/2})})),tinymce.isOpera||"IMG"!=o.nodeName||o.setAttribute("data-mce-selected","1")}function k(){for(var e in o&&o.removeAttribute("data-mce-selected"),v)s.hide("mceResizeHandle"+e)}function w(){var e=s.getParent(c.getNode(),"table,img");f(s.select("img[data-mce-selected]"),(function(e){e.removeAttribute("data-mce-selected")})),e?E(e):k()}l.object_resizing&&!1!==l.webkit_fake_resize&&(p("enableObjectResizing",!1),v={n:[.5,0,0,-1],e:[1,.5,1,0],s:[.5,1,0,1],w:[0,.5,-1,0],nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},e.contentStyles.push(".mceResizeHandle {position: absolute;border: 1px solid black;background: #FFF;width: 5px;height: 5px;z-index: 10000}.mceResizeHandle:hover {background: #000}img[data-mce-selected] {outline: 1px solid black}img.mceClonedResizable, table.mceClonedResizable {position: absolute;outline: 1px dashed black;opacity: .5;z-index: 10000}"),e.onNodeChange.add(w),s.bind(_,"selectionchange",w),e.serializer.addAttributeFilter("data-mce-selected",(function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)})))}e.onKeyDown.add((function(e,t){if(!h(t)&&t.keyCode===r&&c.isCollapsed()&&0===c.getRng(!0).startOffset){var n=c.getNode().previousSibling;if(n&&n.nodeName&&"table"===n.nodeName.toLowerCase())return tinymce.dom.Event.cancel(t)}})),e.onKeyDown.add((function(e,t){var n,o,r,a,l;if(!h(t)&&t.keyCode==i.BACKSPACE&&(o=(n=c.getRng()).startContainer,r=n.startOffset,a=s.getRoot(),l=o,n.collapsed&&0===r)){for(;l&&l.parentNode&&l.parentNode.firstChild==l&&l.parentNode!=a;)l=l.parentNode;"BLOCKQUOTE"===l.tagName&&(e.formatter.toggle("blockquote",null,l),(n=s.createRng()).setStart(o,0),n.setEnd(o,0),c.setRng(n))}})),function(){function t(e){var t=s.create("body"),n=e.cloneContents();return t.appendChild(n),c.serializer.serialize(t,{format:"html"})}function n(n){var o=t(n),i=s.createRng();return i.selectNode(e.getBody()),o===t(i)}e.onKeyDown.add((function(e,t){var o,i=t.keyCode;if(!h(t)&&(i==a||i==r)){if((o=e.selection.isCollapsed())&&!s.isEmpty(e.getBody()))return;if(tinymce.isIE&&!o)return;if(!o&&!n(e.selection.getRng()))return;e.setContent(""),e.selection.setCursorLocation(e.getBody(),0),e.nodeChanged()}}))}(),tinymce.isWebKit&&(e.onKeyDown.add((function(e,t){var n,o,l,d,u,f,p;if(n=t.keyCode==a,!h(t)&&(n||t.keyCode==r)&&!i.modifierPressed(t)&&(l=(o=c.getRng()).startContainer,d=o.startOffset,p=o.collapsed,3==l.nodeType&&l.nodeValue.length>0&&(0===d&&!p||p&&d===(n?0:1)))){if((f=l.previousSibling)&&"IMG"==f.nodeName)return;nonEmptyElements=e.schema.getNonEmptyElements(),t.preventDefault(),u=s.create("br",{id:"__tmp"}),l.parentNode.insertBefore(u,l),e.getDoc().execCommand(n?"ForwardDelete":"Delete",!1,null),(f=(l=c.getRng().startContainer).previousSibling)&&1==f.nodeType&&!s.isBlock(f)&&s.isEmpty(f)&&!nonEmptyElements[f.nodeName.toLowerCase()]&&s.remove(f),s.remove("__tmp")}})),function(){function t(t){var n,o,i,r,a,l,d;var u=[(n=c.getRng()).startContainer,n.startOffset,n.endContainer,n.endOffset];n.collapsed||(t=!0),a=n[(t?"start":"end")+"Container"],l=n[(t?"start":"end")+"Offset"];var p=s.getParent(a,s.isBlock),m=p?s.getPrev(p,s.isBlock):null;if(!t&&n.collapsed&&function(e,t){if(t>0)return!1;for(3==e.nodeType&&(e=e.parentNode);e&&$(e)[0].tagName&&"p"!=$(e)[0].tagName.toLowerCase();){if($(e).index()>0)return!1;e=e.parentNode}return!(!e||!$(e)[0].tagName||"p"!=$(e)[0].tagName.toLowerCase())}(a,l)&&m&&!$.trim($(m).text()))$(m).remove();else{if(3==a.nodeType&&(o=s.getParent(n.startContainer,s.isBlock),t&&(o=s.getNext(o,s.isBlock)),!o||!function(){if(3==a.nodeType){if(t&&l==a.length)return!0;if(!t&&0===l)return!0}}()&&n.collapsed||(i=s.create("em",{id:"__mceDel"}),f(tinymce.grep(o.childNodes),(function(e){i.appendChild(e)})),o.appendChild(i))),(n=s.createRng()).setStart(u[0],u[1]),n.setEnd(u[2],u[3]),c.setRng(n),e.getDoc().execCommand(t?"ForwardDelete":"Delete",!1,null),i){for(r=c.getBookmark(),$("#__mceDel *",e.getBody()).each((function(){var e=$(this).attr("data-mce-style");e&&$(this).attr("style",e)}));d=s.get("__mceDel");)s.remove(d,!0);c.moveToBookmark(r)}tinymce.each(s.select("span,a",o),(function(e){e.style.removeProperty("font-size"),e.style.removeProperty("line-height")}))}}e.onKeyDown.add((function(e,n){var o;o=n.keyCode==a,h(n)||!o&&n.keyCode!=r||i.modifierPressed(n)||(n.preventDefault(),t(o))})),e.addCommand("Delete",(function(){t()}))}(),e.settings.content_editable||(s.bind(e.getDoc(),"focusin",(function(e){c.setRng(c.getRng())})),s.bind(e.getDoc(),"mousedown",(function(t){t.target==e.getDoc().documentElement&&(e.getWin().focus(),c.setRng(c.getRng()))}))),e.onClick.add((function(e,t){t=t.target,/^(IMG|HR)$/.test(t.nodeName)&&c.getSel().setBaseAndExtent(t,0,t,1),"A"==t.nodeName&&s.hasClass(t,"mceItemAnchor")&&c.select(t),e.nodeChanged()})),l.forced_root_block&&e.onInit.add((function(){p("DefaultParagraphSeparator",l.forced_root_block)})),tinymce.isIDevice?s.bind(e.getDoc(),"selectionchange",(function(){n&&(clearTimeout(n),n=0),n=window.setTimeout((function(){var n=c.getRng();t&&tinymce.dom.RangeUtils.compareRanges(n,t)||(e.nodeChanged(),t=n)}),50)})):(v(),e.onKeyDown.add((function(e,t){!h(t)&&65==t.keyCode&&i.metaKeyPressed(t)&&(t.preventDefault(),e.execCommand("SelectAll"))})))),tinymce.isIE&&!tinymce.isIE11&&(g(),document.body.setAttribute("role","application"),m()>7||(p("RespectVisibilityInDesign",!0),e.contentStyles.push(".mceHideBrInPre pre br {display: none}"),s.addClass(e.getBody(),"mceHideBrInPre"),d.addNodeFilter("pre",(function(e,t){for(var n,o,i,r,a=e.length;a--;)for(o=(n=e[a].getAll("br")).length;o--;)(r=(i=n[o]).prev)&&3===r.type&&"\n"!=r.value.charAt(r.value-1)?r.value+="\n":i.parent.insert(new tinymce.html.Node("#text",3),i,!0).value="\n"})),u.addNodeFilter("pre",(function(e,t){for(var n,o,i,r=e.length;r--;)for(o=(n=e[r].getAll("br")).length;o--;)(i=n[o].prev)&&3==i.type&&(i.value=i.value.replace(/\r?\n$/,""))}))),s.bind(e.getBody(),"mouseup",(function(e){var t,n=c.getNode();"IMG"==n.nodeName&&((t=s.getStyle(n,"width"))&&(s.setAttrib(n,"width",t.replace(/[^0-9%]+/g,"")),s.setStyle(n,"width","")),(t=s.getStyle(n,"height"))&&(s.setAttrib(n,"height",t.replace(/[^0-9%]+/g,"")),s.setStyle(n,"height","")))})),e.onKeyDown.add((function(e,t){var n;h(t)||t.keyCode!=r||(n=e.getDoc().selection.createRange())&&n.item&&(t.preventDefault(),e.undoManager.beforeChange(),s.remove(n.item(0)),e.undoManager.add())})),m()>=10&&(o="",f("p div h1 h2 h3 h4 h5 h6".split(" "),(function(e,t){o+=(t>0?",":"")+e+":empty"})),e.contentStyles.push(o+"{padding-right: 1px !important}")),m()<9&&(d.addNodeFilter("noscript",(function(e){for(var t,n,o=e.length;o--;)(n=(t=e[o]).firstChild)&&t.attr("data-mce-innertext",n.value)})),u.addNodeFilter("noscript",(function(e){for(var t,n,o,i=e.length;i--;)t=e[i],(n=e[i].firstChild)?n.value=tinymce.html.Entities.decode(n.value):(o=t.attributes.map["data-mce-innertext"])&&(t.attr("data-mce-innertext",null),(n=new tinymce.html.Node("#text",3)).value=o,n.raw=!0,t.append(n))})))),tinymce.isIE11&&(e.contentStyles.push("body {min-height: 100px}"),e.onClick.add((function(t,n){"HTML"==n.target.nodeName&&(e.execCommand("SelectAll"),e.selection.collapse(!0),e.nodeChanged())}))),tinymce.isGecko&&!tinymce.isIE11&&(g(),Range.prototype.getClientRects||e.onMouseDown.add((function(e,t){if(!h(t)&&"HTML"===t.target.nodeName){var n=e.getBody();n.blur(),setTimeout((function(){n.focus()}),0)}})),function(){function t(){var t=s.getAttribs(c.getStart().cloneNode(!1));return function(){var n=c.getStart();n!==e.getBody()&&(s.setAttrib(n,"style",null),f(t,(function(e){n.setAttributeNode(e.cloneNode(!0))})))}}function n(){return!c.isCollapsed()&&s.getParent(c.getStart(),s.isBlock)!=s.getParent(c.getEnd(),s.isBlock)}function o(e,t){return t.preventDefault(),!1}e.onKeyPress.add((function(e,o){var i;if(!h(o)&&(8==o.keyCode||46==o.keyCode)&&n())return i=t(),e.getDoc().execCommand("delete",!1,null),i(),o.preventDefault(),!1})),s.bind(e.getDoc(),"cut",(function(i){var r;!h(i)&&n()&&(r=t(),e.onKeyUp.addToTop(o),setTimeout((function(){r(),e.onKeyUp.remove(o)}),0))}))}(),function(){function t(){e._refreshContentEditable(),p("StyleWithCSS",!1),p("enableInlineTableEditing",!1),l.object_resizing||p("enableObjectResizing",!1)}l.readonly||(e.onBeforeExecCommand.add(t),e.onMouseDown.add(t))}(),function(){function t(e,t){f(s.select("a"),(function(e){var t=e.parentNode,n=s.getRoot();if(t.lastChild===e){for(;t&&!s.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}s.add(t,"br",{"data-mce-bogus":1})}}))}e.onExecCommand.add((function(e,n){"CreateLink"===n&&t()})),e.onSetContent.add(c.onSetContent.add(t))}(),function(){function t(t,n){t&&n.initial||e.execCommand("mceRepaint")}e.onUndo.add(t),e.onRedo.add(t),e.onSetContent.add(t)}()),tinymce.isOpera&&v()},function(e){var t,n,o,i=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,r=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,a=/[<>&\"\']/g,s=/&(#x|#)?([\w]+);/g,c={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};function l(e,t){var o,i,r,a={};if(e){for(e=e.split(","),t=t||10,o=0;o<e.length;o+=2)i=String.fromCharCode(parseInt(e[o],t)),n[i]||(r="&"+e[o+1]+";",a[i]=r,a[r]=i);return a}}n={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"},o={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},t=l("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),e.html=e.html||{},e.html.Entities={encodeRaw:function(e,t){return e.replace(t?i:r,(function(e){return n[e]||e}))},encodeAllRaw:function(e){return(""+e).replace(a,(function(e){return n[e]||e}))},encodeNumeric:function(e,t){return e.replace(t?i:r,(function(e){return e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":n[e]||"&#"+e.charCodeAt(0)+";"}))},encodeNamed:function(e,o,a){return a=a||t,e.replace(o?i:r,(function(e){return n[e]||a[e]||e}))},getEncodeFunc:function(o,a){var s=e.html.Entities;return a=l(a)||t,(o=e.makeMap(o.replace(/\+/g,","))).named&&o.numeric?function(e,t){return e.replace(t?i:r,(function(e){return n[e]||a[e]||"&#"+e.charCodeAt(0)+";"||e}))}:o.named?a?function(e,t){return s.encodeNamed(e,t,a)}:s.encodeNamed:o.numeric?s.encodeNumeric:s.encodeRaw},decode:function(e){return e.replace(s,(function(e,n,i){return n?(i=parseInt(i,2===n.length?16:10))>65535?(i-=65536,String.fromCharCode(55296+(i>>10),56320+(1023&i))):c[i]||String.fromCharCode(i):o[e]||t[e]||function(e){var t;return(t=document.createElement("div")).innerHTML=e,t.textContent||t.innerText||e}(e)}))}}}(tinymce),tinymce.html.Styles=function(e,t){var n,o,i=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,r=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,a=/\s*([^:]+):\s*([^;]+);?/g,s=/\s+$/,c={};for(e=e||{},o="\\\" \\' \\; \\: ; : \ufeff".split(" "),n=0;n<o.length;n++)c[o[n]]="\ufeff"+n,c["\ufeff"+n]=o[n];function l(e,t,n,o){function i(e){return(e=parseInt(e).toString(16)).length>1?e:"0"+e}return"#"+i(t)+i(n)+i(o)}return{toHex:function(e){return e.replace(i,l)},parse:function(t){var n,o,d,u,f,p,m,h,g={},v=e.url_converter,y=e.url_converter_scope||this;function b(e,t){var n,o,i,r;"none"===g["border-image"]&&delete g["border-image"],(n=g[e+"-top"+t])&&n==(o=g[e+"-right"+t])&&o==(i=g[e+"-bottom"+t])&&i==(r=g[e+"-left"+t])&&(g[e+t]=r,delete g[e+"-top"+t],delete g[e+"-right"+t],delete g[e+"-bottom"+t],delete g[e+"-left"+t])}function C(e){var t,n=g[e];if(n&&!(n.indexOf(" ")<0)){for(t=(n=n.split(" ")).length;t--;)if(n[t]!==n[0])return!1;return g[e]=n[0],!0}}function _(e){return u=!0,c[e]}function x(e,t){return u&&(e=e.replace(/\uFEFF[0-9]/g,(function(e){return c[e]}))),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e}function S(e,t,n,o,i,r){return(i=i||r)?"'"+(i=x(i)).replace(/\'/g,"\\'")+"'":(t=x(t||n||o),v&&(t=v.call(y,t,"style")),"url('"+t.replace(/\'/g,"\\'")+"')")}if(t){for(t=t.replace(/\\[\"\';:\uFEFF]/g,_).replace(/\"[^\"]+\"|\'[^\']+\'/g,(function(e){return e.replace(/[;:]/g,_)}));n=a.exec(t);)o=n[1].replace(s,"").toLowerCase(),d=n[2].replace(s,""),o&&d.length>0&&("font-weight"===o&&"700"===d?d="bold":"color"!==o&&"background-color"!==o||(d=d.toLowerCase()),d=(d=d.replace(i,l)).replace(r,S),g[o]=u?x(d,!0):d),a.lastIndex=n.index+n[0].length;b("border",""),b("border","-width"),b("border","-color"),b("border","-style"),b("padding",""),b("margin",""),f="border",m="border-style",h="border-color",C(p="border-width")&&C(m)&&C(h)&&(g[f]=g[p]+" "+g[m]+" "+g[h],delete g[p],delete g[m],delete g[h]),"medium none"===g.border&&delete g.border}return g},serialize:function(e,n){var o,i,r="";function a(n){var o,i,a,s;if(o=t.styles[n])for(i=0,a=o.length;i<a;i++)n=o[i],void 0!==(s=e[n])&&s.length>0&&(r+=(r.length>0?" ":"")+n+": "+s+";")}if(n&&t&&t.styles)a("*"),a(n);else for(o in e)void 0!==(i=e[o])&&i.length>0&&(r+=(r.length>0?" ":"")+o+": "+i+";");return r}}},function(e){var t={},n=e.makeMap,o=e.each;function i(e,t){return e.split(t||",")}function r(e,t){var o,r={};function a(t){return t.replace(/[A-Z]+/g,(function(t){return a(e[t])}))}for(o in e)e.hasOwnProperty(o)&&(e[o]=a(e[o]));return a(t).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,(function(e,t,o,a){o=i(o,"|"),r[t]={attributes:n(o),attributesOrder:o,children:n(a,"|",{"#comment":{}})}})),r}e.html.Schema=function(a){var s,c,l,d,u,f,p,m,h,g,v={},y={},b=[],C={};function _(o,i,r){var s=a[o];return s?s=n(s,",",n(s.toUpperCase()," ")):(s=t[o])||(s=n(i," ",n(i.toUpperCase()," ")),s=e.extend(s,r),t[o]=s),s}function x(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")}function S(t){var o,r,a,s,c,l,d,u,f,p,m,h,g,y,C,_,S,E,k,w=/^([#+\-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,N=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,T=/[*?+]/;if(t)for(t=i(t),v["@"]&&(_=v["@"].attributes,S=v["@"].attributesOrder),o=0,r=t.length;o<r;o++)if(c=w.exec(t[o])){if(y=c[1],f=c[2],C=c[3],u=c[4],l={attributes:h={},attributesOrder:g=[]},"#"===y&&(l.paddEmpty=!0),"-"===y&&(l.removeEmpty=!0),_){for(E in _)h[E]=_[E];g.push.apply(g,S)}if(u)for(a=0,s=(u=i(u,"|")).length;a<s;a++)if(c=N.exec(u[a])){if(d={},m=c[1],p=c[2].replace(/::/g,":"),y=c[3],k=c[4],"!"===m&&(l.attributesRequired=l.attributesRequired||[],l.attributesRequired.push(p),d.required=!0),"-"===m){delete h[p],g.splice(e.inArray(g,p),1);continue}y&&("="===y&&(l.attributesDefault=l.attributesDefault||[],l.attributesDefault.push({name:p,value:k}),d.defaultValue=k),":"===y&&(l.attributesForced=l.attributesForced||[],l.attributesForced.push({name:p,value:k}),d.forcedValue=k),"<"===y&&(d.validValues=n(k,"?"))),T.test(p)?(l.attributePatterns=l.attributePatterns||[],d.pattern=x(p),l.attributePatterns.push(d)):(h[p]||g.push(p),h[p]=d)}_||"@"!=f||(_=h,S=g),C&&(l.outputName=f,v[C]=l),T.test(f)?(l.pattern=x(f),b.push(l)):v[f]=l}}function E(e){v={},b=[],S(e),o(c,(function(e,t){y[t]=e.children}))}function k(e){var t=/^(~)?(.+)$/;e&&o(i(e),(function(e){var n=t.exec(e),i="~"===n[1],r=i?"span":"div",a=n[2];y[a]=y[r],C[a]=r,i||(p[a.toUpperCase()]={},p[a]={}),v[a]||(v[a]=v[r]),o(y,(function(e,t){e[r]&&(e[a]=e[r])}))}))}function w(e){var t=/^([+\-]?)(\w+)\[([^\]]+)\]$/;e&&o(i(e),(function(e){var n,r,a=t.exec(e);a&&(r=a[1],n=r?y[a[2]]:y[a[2]]={"#comment":{}},n=y[a[2]],o(i(a[3],"|"),(function(e){"-"===r?delete n[e]:n[e]={}})))}))}function N(e){var t,n=v[e];if(n)return n;for(t=b.length;t--;)if((n=b[t]).pattern.test(e))return n}c="html5"==(a=a||{}).schema?((g=t.html5)||(g=t.html5=r({A:"id|accesskey|class|dir|draggable|item|hidden|itemprop|role|spellcheck|style|subject|title|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"#|a|abbr|area|audio|b|bdo|br|button|canvas|cite|code|command|datalist|del|dfn|em|embed|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|meta|meter|noscript|object|output|progress|q|ruby|samp|script|select|small|span|strong|sub|sup|svg|textarea|time|var|video|wbr",C:"#|a|abbr|area|address|article|aside|audio|b|bdo|blockquote|br|button|canvas|cite|code|command|datalist|del|details|dfn|dialog|div|dl|em|embed|fieldset|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|menu|meta|meter|nav|noscript|ol|object|output|p|pre|progress|q|ruby|samp|script|section|select|small|span|strong|style|sub|sup|svg|table|textarea|time|ul|var|video"},"html[A|manifest][body|head]head[A][base|command|link|meta|noscript|script|style|title]title[A][#]base[A|href|target][]link[A|href|rel|media|type|sizes][]meta[A|http-equiv|name|content|charset][]style[A|type|media|scoped][#]script[A|charset|type|src|defer|async][#]noscript[A][C]body[A][C]section[A][C]nav[A][C]article[A][C]aside[A][C]h1[A][B]h2[A][B]h3[A][B]h4[A][B]h5[A][B]h6[A][B]hgroup[A][h1|h2|h3|h4|h5|h6]header[A][C]footer[A][C]address[A][C]p[A][B]br[A][]pre[A][B]dialog[A][dd|dt]blockquote[A|cite][C]ol[A|start|reversed][li]ul[A][li]li[A|value][C]dl[A][dd|dt]dt[A][B]dd[A][C]a[A|href|target|ping|rel|media|type][B]em[A][B]strong[A][B]small[A][B]cite[A][B]q[A|cite][B]dfn[A][B]abbr[A][B]code[A][B]var[A][B]samp[A][B]kbd[A][B]sub[A][B]sup[A][B]i[A][B]b[A][B]mark[A][B]progress[A|value|max][B]meter[A|value|min|max|low|high|optimum][B]time[A|datetime][B]ruby[A][B|rt|rp]rt[A][B]rp[A][B]bdo[A][B]span[A][B]ins[A|cite|datetime][B]del[A|cite|datetime][B]figure[A][C|legend|figcaption]figcaption[A][C]img[A|alt|src|height|width|usemap|ismap][]iframe[A|name|src|height|width|sandbox|seamless][]embed[A|src|height|width|type][]object[A|data|type|height|width|usemap|name|form|classid][param]param[A|name|value][]details[A|open][C|legend]command[A|type|label|icon|disabled|checked|radiogroup][]menu[A|type|label][C|li]legend[A][C|B]div[A][C]source[A|src|type|media][]audio[A|src|autobuffer|autoplay|loop|controls][source]video[A|src|autobuffer|autoplay|loop|controls|width|height|poster][source]hr[A][]form[A|accept-charset|action|autocomplete|enctype|method|name|novalidate|target][C]fieldset[A|disabled|form|name][C|legend]label[A|form|for][B]input[A|type|accept|alt|autocomplete|autofocus|checked|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|height|list|max|maxlength|min|multiple|pattern|placeholder|readonly|required|size|src|step|width|files|value|name][]button[A|autofocus|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|name|value|type][B]select[A|autofocus|disabled|form|multiple|name|size][option|optgroup]datalist[A][B|option]optgroup[A|disabled|label][option]option[A|disabled|selected|label|value][]textarea[A|autofocus|disabled|form|maxlength|name|placeholder|readonly|required|rows|cols|wrap][]keygen[A|autofocus|challenge|disabled|form|keytype|name][]output[A|for|form|name][B]canvas[A|width|height][]map[A|name][B|C]area[A|shape|coords|href|alt|target|media|rel|ping|type][]mathml[A][]svg[A][]table[A|border][caption|colgroup|thead|tfoot|tbody|tr]caption[A][C]colgroup[A|span][col]col[A|span][]thead[A][tr]tfoot[A][tr]tbody[A][tr]tr[A][th|td]th[A|headers|rowspan|colspan|scope][B]td[A|headers|rowspan|colspan][C]wbr[A][]")),g):((h=t.html4)||(h=t.html4=r({Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]")),h),!1===a.verify_html&&(a.valid_elements="*[*]"),a.valid_styles&&(s={},o(a.valid_styles,(function(t,n){s[n]=e.explode(t)}))),l=_("whitespace_elements","pre script noscript style textarea"),d=_("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),u=_("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr"),f=_("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),m=_("non_empty_elements","td th iframe video audio object script",u),textBlockElementsMap=_("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),p=_("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex samp option datalist select optgroup",textBlockElementsMap),a.valid_elements?E(a.valid_elements):(o(c,(function(e,t){v[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},y[t]=e.children})),"html5"!=a.schema&&o(i("strong/b,em/i"),(function(e){e=i(e,"/"),v[e[1]].outputName=e[0]})),v.img.attributesDefault=[{name:"alt",value:""}],o(i("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr,strong,em,b,i"),(function(e){v[e]&&(v[e].removeEmpty=!0)})),o(i("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),(function(e){v[e].paddEmpty=!0}))),k(a.custom_elements),w(a.valid_children),S(a.extended_valid_elements),w("+ol[ul|ol],+ul[ul|ol]"),a.invalid_elements&&e.each(e.explode(a.invalid_elements),(function(e){v[e]&&delete v[e]})),N("span")||S("span[!data-mce-type|*]"),this.children=y,this.styles=s,this.getBoolAttrs=function(){return f},this.getBlockElements=function(){return p},this.getTextBlockElements=function(){return textBlockElementsMap},this.getShortEndedElements=function(){return u},this.getSelfClosingElements=function(){return d},this.getNonEmptyElements=function(){return m},this.getWhiteSpaceElements=function(){return l},this.isValidChild=function(e,t){var n=y[e];return!(!n||!n[t])},this.isValid=function(e,t){var n,o,i=N(e);if(i){if(!t)return!0;if(i.attributes[t])return!0;if(n=i.attributePatterns)for(o=n.length;o--;)if(n[o].pattern.test(e))return!0}return!1},this.getElementRule=N,this.getCustomElements=function(){return C},this.addValidElements=S,this.setValidElements=E,this.addCustomElements=k,this.addValidChildren=w,this.elements=v}}(tinymce),function(e){e.html.SaxParser=function(t,n){var o=this,i=function(){};t=t||{},o.schema=n=n||new e.html.Schema,!1!==t.fix_self_closing&&(t.fix_self_closing=!0),e.each("comment cdata text start end pi doctype".split(" "),(function(e){e&&(o[e]=t[e]||i)})),o.parse=function(o){var i,r,a,s,c,l,d,u,f,p,m,h,g,v,y,b,C,_,x,S,E,k,w,N,T,A,B,M,R,L,I=this,D=0,O=[],P=0,H=e.html.Entities.decode;function F(e){var t,n;for(t=O.length;t--&&O[t].name!==e;);if(t>=0){for(n=O.length-1;n>=t;n--)(e=O[n]).valid&&I.end(e.name);O.length=t}}function U(e,t,n,o,i){var r,a;if(n=(t=t.toLowerCase())in m?t:H(n||o||i||""),g&&!u&&0!==t.indexOf("data-")){if(!(r=x[t])&&S){for(a=S.length;a--&&!(r=S[a]).pattern.test(t););-1===a&&(r=null)}if(!r)return;if(r.validValues&&!(n in r.validValues))return}s.map[t]=n,s.push({name:t,value:n})}for(T=new RegExp("<(?:(?:!--([\\w\\W]*?)--\x3e)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),A=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,B={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi},p=n.getShortEndedElements(),N=t.self_closing_elements||n.getSelfClosingElements(),m=n.getBoolAttrs(),g=t.validate,f=t.remove_internals,R=t.fix_self_closing,L=e.isIE,_=/^:/;i=T.exec(o);){if(D<i.index&&I.text(H(o.substr(D,i.index-D))),r=i[6])r=r.toLowerCase(),L&&_.test(r)&&(r=r.substr(1)),F(r);else if(r=i[7]){if(r=r.toLowerCase(),L&&_.test(r)&&(r=r.substr(1)),h=r in p,R&&N[r]&&O.length>0&&O[O.length-1].name===r&&F(r),!g||(v=n.getElementRule(r))){if(y=!0,g&&(x=v.attributes,S=v.attributePatterns),(C=i[8])?((u=-1!==C.indexOf("data-mce-type"))&&f&&(y=!1),(s=[]).map={},C.replace(A,U)):(s=[]).map={},g&&!u){if(E=v.attributesRequired,k=v.attributesDefault,w=v.attributesForced)for(c=w.length;c--;)d=(b=w[c]).name,"{$uid}"===(M=b.value)&&(M="mce_"+P++),s.map[d]=M,s.push({name:d,value:M});if(k)for(c=k.length;c--;)(d=(b=k[c]).name)in s.map||("{$uid}"===(M=b.value)&&(M="mce_"+P++),s.map[d]=M,s.push({name:d,value:M}));if(E){for(c=E.length;c--&&!(E[c]in s.map););-1===c&&(y=!1)}s.map["data-mce-bogus"]&&(y=!1)}y&&I.start(r,s,h)}else y=!1;if(a=B[r]){a.lastIndex=D=i.index+i[0].length,(i=a.exec(o))?(y&&(l=o.substr(D,i.index-D)),D=i.index+i[0].length):(l=o.substr(D),D=o.length),y&&l.length>0&&I.text(l,!0),y&&I.end(r),T.lastIndex=D;continue}h||(C&&C.indexOf("/")==C.length-1?y&&I.end(r):O.push({name:r,valid:y}))}else(r=i[1])?I.comment(r):(r=i[2])?I.cdata(r):(r=i[3])?I.doctype(r):(r=i[4])&&I.pi(r,i[5]);D=i.index+i[0].length}for(D<o.length&&I.text(H(o.substr(D))),c=O.length-1;c>=0;c--)(r=O[c]).valid&&I.end(r.name)}}}(tinymce),function(e){var t=/^[ \t\r\n]*$/,n={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};function o(e,t,n){var o,i,r=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[r])return e[r];if(e!==t){if(o=e[a])return o;for(i=e.parent;i&&i!==t;i=i.parent)if(o=i[a])return o}}function i(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}e.extend(i.prototype,{replace:function(e){return e.parent&&e.remove(),this.insert(e,this),this.remove(),this},attr:function(e,t){var n,o;if("string"!=typeof e){for(o in e)this.attr(o,e[o]);return this}if(n=this.attributes){if(void 0!==t){if(null===t){if(e in n.map)for(delete n.map[e],o=n.length;o--;)if(n[o].name===e)return n=n.splice(o,1),this;return this}if(e in n.map){for(o=n.length;o--;)if(n[o].name===e){n[o].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,this}return n.map[e]}},clone:function(){var e,t,n,o,r,a=new i(this.name,this.type);if(n=this.attributes){for((r=[]).map={},e=0,t=n.length;e<t;e++)"id"!==(o=n[e]).name&&(r[r.length]={name:o.name,value:o.value},r.map[o.name]=o.value);a.attributes=r}return a.value=this.value,a.shortEnded=this.shortEnded,a},wrap:function(e){return this.parent.insert(e,this),e.append(this),this},unwrap:function(){var e,t;for(e=this.firstChild;e;)t=e.next,this.insert(e,this,!0),e=t;this.remove()},remove:function(){var e=this.parent,t=this.next,n=this.prev;return e&&(e.firstChild===this?(e.firstChild=t,t&&(t.prev=null)):n.next=t,e.lastChild===this?(e.lastChild=n,n&&(n.next=null)):t.prev=n,this.parent=this.next=this.prev=null),this},append:function(e){var t;return e.parent&&e.remove(),(t=this.lastChild)?(t.next=e,e.prev=t,this.lastChild=e):this.lastChild=this.firstChild=e,e.parent=this,e},insert:function(e,t,n){var o;return e.parent&&e.remove(),o=t.parent||this,n?(t===o.firstChild?o.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===o.lastChild?o.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=o,e},getAll:function(e){var t,n=[];for(t=this.firstChild;t;t=o(t,this))t.name===e&&n.push(t);return n},empty:function(){var e,t,n;if(this.firstChild){for(e=[],n=this.firstChild;n;n=o(n,this))e.push(n);for(t=e.length;t--;)(n=e[t]).parent=n.firstChild=n.lastChild=n.next=n.prev=null}return this.firstChild=this.lastChild=null,this},isEmpty:function(e){var n,i,r=this.firstChild;if(r)do{if(1===r.type){if(r.attributes.map["data-mce-bogus"])continue;if(e[r.name])return!1;for(n=r.attributes.length;n--;)if("name"===(i=r.attributes[n].name)||0===i.indexOf("data-mce-"))return!1}if(8===r.type)return!1;if(3===r.type&&!t.test(r.value))return!1}while(r=o(r,this));return!0},walk:function(e){return o(this,null,e)}}),e.extend(i,{create:function(e,t){var o,r;if(o=new i(e,n[e]||1),t)for(r in t)o.attr(r,t[r]);return o}}),e.html.Node=i}(tinymce),function(e){var t=e.html.Node;e.html.DomParser=function(n,o){var i=this,r={},a=[],s={},c={};(n=n||{}).validate=!("validate"in n)||n.validate,n.root_name=n.root_name||"body",i.schema=o=o||new e.html.Schema,i.filterNode=function(e){var t,n,o;n in r&&((o=s[n])?o.push(e):s[n]=[e]),t=a.length;for(;t--;)(n=a[t].name)in e.attributes.map&&((o=c[n])?o.push(e):c[n]=[e]);return e},i.addNodeFilter=function(t,n){e.each(e.explode(t),(function(e){var t=r[e];t||(r[e]=t=[]),t.push(n)}))},i.addAttributeFilter=function(t,n){e.each(e.explode(t),(function(e){var t;for(t=0;t<a.length;t++)if(a[t].name===e)return void a[t].callbacks.push(n);a.push({name:e,callbacks:[n]})}))},i.parse=function(l,d){var u,f,p,m,h,g,v,y,b,C,_,x,S,E,k,w,N,T,A,B=[];function M(e,n){var o,i=new t(e,n);return e in r&&((o=s[e])?o.push(i):s[e]=[i]),i}function R(e){var t,n,o;for(t=e.prev;t&&3===t.type;)(n=t.value.replace(E,"")).length>0?(t.value=n,t=t.prev):(o=t.prev,t.remove(),t=o)}if(d=d||{},s={},c={},x=e.extend(e.makeMap("script,style,head,html,body,title,meta,param"),o.getBlockElements()),T=o.getNonEmptyElements(),N=o.children,_=n.validate,A="forced_root_block"in d?d.forced_root_block:n.forced_root_block,w=o.getWhiteSpaceElements(),/^[ \t\r\n]+/,E=/[ \t\r\n]+$/,/[ \t\r\n]+/g,k=/^[ \t\r\n]+$/,u=new e.html.SaxParser({validate:_,self_closing_elements:function(e){var t,n={};for(t in e)"li"!==t&&"p"!=t&&(n[t]=e[t]);return n}(o.getSelfClosingElements()),cdata:function(e){p.append(M("#cdata",4)).value=e},text:function(e,t){var n;0!==e.length&&((n=M("#text",3)).raw=!!t,p.append(n).value=e)},comment:function(e){p.append(M("#comment",8)).value=e},pi:function(e,t){p.append(M(e,7)).value=t,R(p)},doctype:function(e){p.append(M("#doctype",10)).value=e,R(p)},start:function(e,t,n){var i,r,s,l,d;if(s=_?o.getElementRule(e):{}){for((i=M(s.outputName||e,1)).attributes=t,i.shortEnded=n,p.append(i),(d=N[p.name])&&N[i.name]&&!d[i.name]&&B.push(i),r=a.length;r--;)(l=a[r].name)in t.map&&((b=c[l])?b.push(i):c[l]=[i]);x[e]&&R(i),n||(p=i),!S&&w[e]&&(S=!0)}},end:function(e){var n,i,r,a,s;if(i=_?o.getElementRule(e):{}){if(x[e]&&!S&&(n=p.firstChild,(n=p.lastChild)&&3===n.type))for((r=n.value.replace(E,"")).length>0?(n.value=r,n=n.prev):(a=n.prev,n.remove(),n=a);n&&3===n.type;)r=n.value,a=n.prev,(0===r.length||k.test(r))&&(n.remove(),n=a),n=a;if(S&&w[e]&&(S=!1),(i.removeEmpty||i.paddEmpty)&&p.isEmpty(T))if(i.paddEmpty)p.empty().append(new t("#text","3")).value=" ";else if(!p.attributes.map.name&&!p.attributes.map.id)return s=p.parent,p.empty().remove(),void(p=s);p=p.parent}}},o),f=p=new t(d.context||n.root_name,11),u.parse(l),_&&B.length&&(d.context?d.invalid=!0:function(n){var r,a,s,c,l,d,u,f,p,m,h,g,v,y;for(h=e.makeMap("tr,td,th,tbody,thead,tfoot,table"),m=o.getNonEmptyElements(),g=o.getTextBlockElements(),r=0;r<n.length;r++)if((a=n[r]).parent&&!a.fixed)if(g[a.name]&&"li"==a.parent.name){for(v=a.next;v&&g[v.name];)v.name="li",v.fixed=!0,a.parent.insert(v,a.parent),v=v.next;a.unwrap(a)}else{for(c=[a],s=a.parent;s&&!o.isValidChild(s.name,a.name)&&!h[s.name];s=s.parent)c.push(s);if(s&&c.length>1){for(c.reverse(),l=d=i.filterNode(c[0].clone()),p=0;p<c.length-1;p++){for(o.isValidChild(d.name,c[p].name)?(u=i.filterNode(c[p].clone()),d.append(u)):u=d,f=c[p].firstChild;f&&f!=c[p+1];)y=f.next,u.append(f),f=y;d=u}l.isEmpty(m)?s.insert(a,c[0],!0):(s.insert(l,c[0],!0),s.insert(a,l)),((s=c[0]).isEmpty(m)||s.firstChild===s.lastChild&&"br"===s.firstChild.name)&&s.empty().remove()}else if(a.parent){if("li"===a.name){if((v=a.prev)&&("ul"===v.name||"ul"===v.name)){v.append(a);continue}if((v=a.next)&&("ul"===v.name||"ul"===v.name)){v.insert(a,v.firstChild,!0);continue}a.wrap(i.filterNode(new t("ul",1)));continue}o.isValidChild(a.parent.name,"div")&&o.isValidChild("div",a.name)?a.wrap(i.filterNode(new t("div",1))):"style"===a.name||"script"===a.name?a.empty().remove():a.unwrap()}}}(B)),A&&"body"==f.name&&function(){for(var e,t,n=f.firstChild;n;)e=n.next,3==n.type||1==n.type&&"p"!==n.name&&!x[n.name]&&!n.attr("data-mce-type")?(t||(t=M(A,1),f.insert(t,n)),t.append(n)):t=null,n=e}(),!d.invalid){for(C in s){for(b=r[C],v=(m=s[C]).length;v--;)m[v].parent||m.splice(v,1);for(h=0,g=b.length;h<g;h++)b[h](m,C,d)}for(h=0,g=a.length;h<g;h++)if((b=a[h]).name in c){for(v=(m=c[b.name]).length;v--;)m[v].parent||m.splice(v,1);for(v=0,y=b.callbacks.length;v<y;v++)b.callbacks[v](m,b.name,d)}}return f},n.remove_trailing_brs&&i.addNodeFilter("br",(function(t,n){var i,r,a,s,c,l,d=t.length,u=e.extend({},o.getBlockElements()),f=o.getNonEmptyElements();for(u.body=1,i=0;i<d;i++)if(a=(r=t[i]).parent,u[r.parent.name]&&r===a.lastChild){for(c=r.prev;c;){if("span"!==(l=c.name)||"bookmark"!==c.attr("data-mce-type")){if("br"!==l)break;if("br"===l){r=null;break}}c=c.prev}r&&(r.remove(),a.isEmpty(f)&&(elementRule=o.getElementRule(a.name),elementRule&&(elementRule.removeEmpty?a.remove():elementRule.paddEmpty&&(a.empty().append(new e.html.Node("#text",3)).value=" "))))}else{for(s=r;a.firstChild===s&&a.lastChild===s&&(s=a,!u[a.name]);)a=a.parent;s===a&&(textNode=new e.html.Node("#text",3),textNode.value=" ",r.replace(textNode))}})),n.allow_html_in_named_anchor||i.addAttributeFilter("id,name",(function(e,t){for(var n,o,i,r,a=e.length;a--;)if("a"===(r=e[a]).name&&r.firstChild&&!r.attr("href")){i=r.parent,n=r.lastChild;do{o=n.prev,i.insert(n,r),n=o}while(n)}}))}}(tinymce),tinymce.html.Writer=function(e){var t,n,o,i,r,a=[];return t=(e=e||{}).indent,n=tinymce.makeMap(e.indent_before||""),o=tinymce.makeMap(e.indent_after||""),i=tinymce.html.Entities.getEncodeFunc(e.entity_encoding||"raw",e.entities),r="html"==e.element_format,{start:function(e,s,c){var l,d,u,f;if(t&&n[e]&&a.length>0&&(f=a[a.length-1]).length>0&&"\n"!==f&&a.push("\n"),a.push("<",e),s)for(l=0,d=s.length;l<d;l++)u=s[l],a.push(" ",u.name,'="',i(u.value,!0),'"');a[a.length]=!c||r?">":" />",c&&t&&o[e]&&a.length>0&&(f=a[a.length-1]).length>0&&"\n"!==f&&a.push("\n")},end:function(e){var n;a.push("</",e,">"),t&&o[e]&&a.length>0&&(n=a[a.length-1]).length>0&&"\n"!==n&&a.push("\n")},text:function(e,t){e.length>0&&(a[a.length]=t?e:i(e))},cdata:function(e){a.push("<![CDATA[",e,"]]>")},comment:function(e){a.push("\x3c!--",e,"--\x3e")},pi:function(e,n){n?a.push("<?",e," ",n,"?>"):a.push("<?",e,"?>"),t&&a.push("\n")},doctype:function(e){a.push("<!DOCTYPE",e,">",t?"\n":"")},reset:function(){a.length=0},getContent:function(){return a.join("").replace(/\n$/,"")}}},function(e){e.html.Serializer=function(t,n){var o=new e.html.Writer(t);(t=t||{}).validate=!("validate"in t)||t.validate,this.schema=n=n||new e.html.Schema,this.writer=o,this.serialize=function(e){var i,r;function a(e){var t,s,c,l,d,u,f,p,m,h=i[e.type];if(h)h(e);else{if(t=e.name,s=e.shortEnded,c=e.attributes,r&&c&&c.length>1){for((u=[]).map={},f=0,p=(m=n.getElementRule(e.name)).attributesOrder.length;f<p;f++)(l=m.attributesOrder[f])in c.map&&(d=c.map[l],u.map[l]=d,u.push({name:l,value:d}));for(f=0,p=c.length;f<p;f++)(l=c[f].name)in u.map||(d=c.map[l],u.map[l]=d,u.push({name:l,value:d}));c=u}if(o.start(e.name,c,s),!s){if(e=e.firstChild)do{a(e)}while(e=e.next);o.end(t)}}}return r=t.validate,i={3:function(e,t){o.text(e.value,e.raw)},8:function(e){o.comment(e.value)},7:function(e){o.pi(e.name,e.value)},10:function(e){o.doctype(e.value)},4:function(e){o.cdata(e.value)},11:function(e){if(e=e.firstChild)do{a(e)}while(e=e.next)}},o.reset(),1!=e.type||t.inner?i[11](e):a(e),o.getContent()}}}(tinymce),tinymce.dom={},function(e,t){var n=!!document.addEventListener;function o(e,t,n,o){e.addEventListener?e.addEventListener(t,n,o||!1):e.attachEvent&&e.attachEvent("on"+t,n)}function i(e,t,n,o){e.removeEventListener?e.removeEventListener(t,n,o||!1):e.detachEvent&&e.detachEvent("on"+t,n)}function r(e,t){var n,o=t||{};function i(){return!1}function r(){return!0}for(n in e)"layerX"!==n&&"layerY"!==n&&"webkitMovementX"!==n&&"webkitMovementY"!==n&&"keyLocation"!==n&&(o[n]=e[n]);return o.target||(o.target=o.srcElement||document),o.preventDefault=function(){o.isDefaultPrevented=r,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},o.stopPropagation=function(){o.isPropagationStopped=r,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},o.stopImmediatePropagation=function(){o.isImmediatePropagationStopped=r,o.stopPropagation()},o.isDefaultPrevented||(o.isDefaultPrevented=i,o.isPropagationStopped=i,o.isImmediatePropagationStopped=i),o}function a(e,t,r){var a=e.document,s={type:"ready"};function c(){r.domLoaded||(r.domLoaded=!0,t(s))}"complete"!=a.readyState?(n?o(e,"DOMContentLoaded",c):(o(a,"readystatechange",(function(){"complete"===a.readyState&&(i(a,"readystatechange",arguments.callee),c())})),a.documentElement.doScroll&&e===e.top&&function(){try{a.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}c()}()),o(e,"load",c)):c()}function s(e){var s,c,l,d,u=this,f={};function p(e,t){var n,o,i,r;if(n=f[t][e.type])for(o=0,i=n.length;o<i;o++)if((r=n[o])&&!1===r.func.call(r.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}l="onmouseenter"in document.documentElement,c="onfocusin"in document.documentElement,d={mouseenter:"mouseover",mouseleave:"mouseout"},s=1,u.domLoaded=!1,u.events=f,u.bind=function(i,m,h,g){var v,y,b,C,_,x,S,E=window;function k(e){p(r(e||E.event),v)}if(i&&3!==i.nodeType&&8!==i.nodeType){for(i[t]?(v=i[t],f[v]||(f[v]={})):(v=s++,i[t]=v,f[v]={}),g=g||i,b=(m=m.split(" ")).length;b--;)x=k,_=S=!1,"DOMContentLoaded"===(C=m[b])&&(C="ready"),!u.domLoaded&&"complete"!=i.readyState||"ready"!==C?(l||(_=d[C])&&(x=function(e){var t,n;if(t=e.currentTarget,(n=e.relatedTarget)&&t.contains)n=t.contains(n);else for(;n&&n!==t;)n=n.parentNode;n||((e=r(e||E.event)).type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,p(e,v))}),c||"focusin"!==C&&"focusout"!==C||(S=!0,_="focusin"===C?"focus":"blur",x=function(e){(e=r(e||E.event)).type="focus"===e.type?"focusin":"focusout",p(e,v)}),(y=f[v][C])?y.push({func:h,scope:g}):(f[v][C]=y=[{func:h,scope:g}],y.fakeName=_,y.capture=S,y.nativeHandler=x,n||(y.proxyHandler=e(v)),"ready"===C?a(i,x,u):o(i,_||C,n?x:y.proxyHandler,S))):(u.domLoaded=!0,h.call(g,r({type:C})));return i=y=0,h}},u.unbind=function(e,o,r){var a,s,c,l,d,p;if(!e||3===e.nodeType||8===e.nodeType)return u;if(a=e[t]){if(p=f[a],o){for(c=(o=o.split(" ")).length;c--;)if(s=p[d=o[c]]){if(r)for(l=s.length;l--;)s[l].func===r&&s.splice(l,1);r&&0!==s.length||(delete p[d],i(e,s.fakeName||d,n?s.nativeHandler:s.proxyHandler,s.capture))}}else{for(d in p)i(e,(s=p[d]).fakeName||d,n?s.nativeHandler:s.proxyHandler,s.capture);p={}}for(d in p)return u;delete f[a];try{delete e[t]}catch(n){e[t]=null}}return u},u.fire=function(e,n,o){var i,a;if(!e||3===e.nodeType||8===e.nodeType)return u;(a=r(null,o)).type=n;do{(i=e[t])&&p(a,i),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!a.isPropagationStopped());return u},u.clean=function(e){var n,o,i=u.unbind;if(!e||3===e.nodeType||8===e.nodeType)return u;if(e[t]&&i(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(i(e),n=(o=e.getElementsByTagName("*")).length;n--;)(e=o[n])[t]&&i(e);return u},u.callNativeHandler=function(e,t){f&&f[e][t.type].nativeHandler(t)},u.destory=function(){f={}},u.add=function(e,t,n,o){if("string"==typeof e&&(e=document.getElementById(e)),!(e&&e instanceof Array))return"init"===t&&(t="ready"),u.bind(e,t instanceof Array?t.join(" "):t,n,o);for(var i=e.length;i--;)u.add(e[i],t,n,o)},u.remove=function(e,t,n,o){if(!e)return u;if("string"==typeof e&&(e=document.getElementById(e)),e instanceof Array){for(var i=e.length;i--;)u.remove(e[i],t,n,o);return u}return u.unbind(e,t instanceof Array?t.join(" "):t,n)},u.clear=function(e){return"string"==typeof e&&(e=document.getElementById(e)),u.clean(e)},u.cancel=function(e){return e&&(u.prevent(e),u.stop(e)),!1},u.prevent=function(e){return e.preventDefault||(e=r(e)),e.preventDefault(),!1},u.stop=function(e){return e.stopPropagation||(e=r(e)),e.stopPropagation(),!1}}e.EventUtils=s,e.Event=new s((function(e){return function(t){tinymce.dom.Event.callNativeHandler(e,t)}})),e.Event.bind(window,"ready",(function(){})),e=0}(tinymce.dom,"data-mce-expando"),tinymce.dom.TreeWalker=function(e,t){var n=e;function o(e,n,o,i){var r,a;if(e){if(!i&&e[n])return e[n];if(e!=t){if(r=e[o])return r;for(a=e.parentNode;a&&a!=t;a=a.parentNode)if(r=a[o])return r}}}this.current=function(){return n},this.next=function(e){return n=o(n,"firstChild","nextSibling",e)},this.prev=function(e){return n=o(n,"lastChild","previousSibling",e)}},function(e){var t=e.each,n=e.is,o=e.isWebKit,i=e.isIE,r=e.html.Entities,a=/^([a-z0-9],?)+$/i,s=/^[ \t\r\n]*$/;e.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{for:"htmlFor",class:"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(t,n){var o,i=this;if(i.doc=t,i.win=window,i.files={},i.cssFlicker=!1,i.counter=0,i.stdMode=!e.isIE||t.documentMode>=8,i.boxModel=!e.isIE||"CSS1Compat"==t.compatMode||i.stdMode,i.hasOuterHTML="outerHTML"in t.createElement("a"),i.settings=n=e.extend({keep_values:!1,hex_colors:1},n),i.schema=n.schema,i.styles=new e.html.Styles({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),e.isIE6)try{t.execCommand("BackgroundImageCache",!1,!0)}catch(e){i.cssFlicker=!0}i.fixDoc(t),i.events=n.ownEvents?new e.dom.EventUtils(n.proxy):e.dom.Event,e.addUnload(i.destroy,i),o=n.schema?n.schema.getBlockElements():{},i.isBlock=function(e){if(!e)return!1;var t=e.nodeType;return t?!(1!==t||!o[e.nodeName]):!!o[e]}},fixDoc:function(t){var n,o=this.settings;if(i&&!e.isIE11&&o.schema)for(n in"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,(function(e){t.createElement(e)})),o.schema.getCustomElements())t.createElement(n)},clone:function(n,o){var r,a,s=this;return!i||e.isIE11||1!==n.nodeType||o?n.cloneNode(o):(a=s.doc,o?r.firstChild:(r=a.createElement(n.nodeName),t(s.getAttribs(n),(function(e){s.setAttrib(r,e.nodeName,s.getAttrib(n,e.nodeName))})),r))},getRoot:function(){var e=this,t=e.settings;return t&&e.get(t.root_element)||e.doc.body},getViewPort:function(e){var t,n;return t=(e=e||this.win).document,n=this.boxModel?t.documentElement:t.body,{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t,n,o=this;return e=o.get(e),t=o.getPos(e),n=o.getSize(e),{x:t.x,y:t.y,w:n.w,h:n.h}},getSize:function(e){var t,n,o=this;return e=o.get(e),t=o.getStyle(e,"width"),n=o.getStyle(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){return this.getParents(e,t,n,!1)},getParents:function(e,t,o,i){var r,a=this,s=a.settings,c=[];for(e=a.get(e),i=void 0===i,s.strict_root&&(o=o||a.getRoot()),n(t,"string")&&(r=t,t="*"===t?function(e){return 1==e.nodeType}:function(e){return a.is(e,r)});e&&e!=o&&e.nodeType&&9!==e.nodeType;){if(!t||t(e)){if(!i)return e;c.push(e)}e=e.parentNode}return i?c:null},get:function(e){var t;return e&&this.doc&&"string"==typeof e&&(t=e,(e=this.doc.getElementById(e))&&e.id!==t)?this.doc.getElementsByName(t)[1]:e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},select:function(t,n){var o=this;return e.dom.Sizzle(t,o.get(n)||o.get(o.settings.root_element)||o.doc,[])},is:function(t,n){var o;if(void 0===t.length){if("*"===n)return 1==t.nodeType;if(a.test(n)){for(n=n.toLowerCase().split(/,/),t=t.nodeName.toLowerCase(),o=n.length-1;o>=0;o--)if(n[o]==t)return!0;return!1}}return e.dom.Sizzle.matches(n,t.nodeType?[t]:t).length>0},add:function(e,t,o,i,r){var a=this;return this.run(e,(function(e){var s;return s=n(t,"string")?a.doc.createElement(t):t,a.setAttribs(s,o),i&&(i.nodeType?s.appendChild(i):a.setHTML(s,i)),r?s:e.appendChild(s)}))},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var o,i="";for(o in i+="<"+e,t)t.hasOwnProperty(o)&&(i+=" "+o+'="'+this.encode(t[o])+'"');return void 0!==n?i+">"+n+"</"+e+">":i+" />"},remove:function(t,n){return this.run(t,(function(t){var o,i=t.parentNode;if(!i)return null;if(n)for(;o=t.firstChild;)!e.isIE||3!==o.nodeType||o.nodeValue?i.insertBefore(o,t):t.removeChild(o);return i.removeChild(t)}))},setStyle:function(t,n,o){var r=this;return r.run(t,(function(a){var s;switch(s=a.style,n=n.replace(/-(\D)/g,(function(e,t){return t.toUpperCase()})),r.pixelStyles.test(n)&&(e.is(o,"number")||/^[\-0-9\.]+$/.test(o))&&(o+="px"),n){case"opacity":i&&!e.isIE11&&(s.filter=""===o?"":"alpha(opacity="+100*o+")",t.currentStyle&&t.currentStyle.hasLayout||(s.display="inline-block")),s[n]=s["-moz-opacity"]=s["-khtml-opacity"]=o||"";break;case"float":i&&!e.isIE11?s.styleFloat=o:s.cssFloat=o;break;default:s[n]=o||""}r.settings.update_styles&&r.setAttrib(a,"data-mce-style")}))},getStyle:function(e,t,n){if(e=this.get(e)){if(this.doc.defaultView&&n){t=t.replace(/[A-Z]/g,(function(e){return"-"+e}));try{return this.doc.defaultView.getComputedStyle(e,null).getPropertyValue(t)}catch(e){return null}}return"float"==(t=t.replace(/-(\D)/g,(function(e,t){return t.toUpperCase()})))&&(t=i?"styleFloat":"cssFloat"),e.currentStyle&&n?e.currentStyle[t]:e.style?e.style[t]:void 0}},setStyles:function(e,n){var o,i=this,r=i.settings;o=r.update_styles,r.update_styles=0,t(n,(function(t,n){i.setStyle(e,n,t)})),r.update_styles=o,r.update_styles&&i.setAttrib(e,r.cssText)},removeAllAttribs:function(e){return this.run(e,(function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))}))},setAttrib:function(e,o,i){var r=this;if(e&&o)return r.settings.strict&&(o=o.toLowerCase()),this.run(e,(function(e){var a=r.settings,s=e.getAttribute(o);if(null!==i)switch(o){case"style":if(!n(i,"string"))return void t(i,(function(t,n){r.setStyle(e,n,t)}));a.keep_values&&(i&&!r._isRes(i)?e.setAttribute("data-mce-style",i,2):e.removeAttribute("data-mce-style",2)),e.style.cssText=i;break;case"class":e.className=i||"";break;case"src":case"href":a.keep_values&&(a.url_converter&&(i=a.url_converter.call(a.url_converter_scope||r,i,o,e)),r.setAttrib(e,"data-mce-"+o,i,2));break;case"shape":e.setAttribute("data-mce-style",i)}if(n(i)&&null!==i&&0!==i.length?e.setAttribute(o,""+i,2):e.removeAttribute(o,2),tinyMCE.activeEditor&&s!=i){var c=tinyMCE.activeEditor;c.onSetAttrib.dispatch(c,e,o,i)}}))},setAttribs:function(e,n){var o=this;return this.run(e,(function(e){t(n,(function(t,n){o.setAttrib(e,n,t)}))}))},getAttrib:function(t,r,a){var s,c=this;if(!(t=c.get(t))||1!==t.nodeType)return void 0!==a&&a;if(n(a)||(a=""),/^(src|href|style|coords|shape)$/.test(r)&&(s=t.getAttribute("data-mce-"+r)))return s;if(i&&c.props[r]&&(s=(s=t[c.props[r]])&&s.nodeValue?s.nodeValue:s),s||(s=t.getAttribute(r,2)),/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(r))return!0===t[c.props[r]]&&""===s||s?r:"";if("FORM"===t.nodeName&&t.getAttributeNode(r))return t.getAttributeNode(r).nodeValue;if("style"===r&&(s=s||t.style.cssText)&&(s=c.serializeStyle(c.parseStyle(s),t.nodeName),c.settings.keep_values&&!c._isRes(s)&&t.setAttribute("data-mce-style",s)),o&&"class"===r&&s&&(s=s.replace(/(apple|webkit)\-[a-z\-]+/gi,"")),i)switch(r){case"rowspan":case"colspan":1===s&&(s="");break;case"size":"+0"!==s&&20!==s&&0!==s||(s="");break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":0===s&&(s="");break;case"hspace":-1===s&&(s="");break;case"maxlength":case"tabindex":32768!==s&&2147483647!==s&&"32768"!==s||(s="");break;case"multiple":case"compact":case"noshade":case"nowrap":return 65535===s?r:a;case"shape":s=s.toLowerCase();break;default:0===r.indexOf("on")&&s&&(s=e._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+s))}return null!=s&&""!==s?""+s:a},getPos:function(e,t){var n,o,i=this,r=0,a=0,s=i.doc;if(e=i.get(e),t=t||s.body,e){if(e.getBoundingClientRect)return e=e.getBoundingClientRect(),n=i.boxModel?s.documentElement:s.body,{x:r=e.left+(s.documentElement.scrollLeft||s.body.scrollLeft)-n.clientTop,y:a=e.top+(s.documentElement.scrollTop||s.body.scrollTop)-n.clientLeft};for(o=e;o&&o!=t&&o.nodeType;)r+=o.offsetLeft||0,a+=o.offsetTop||0,o=o.offsetParent;for(o=e.parentNode;o&&o!=t&&o.nodeType;)r-=o.scrollLeft||0,a-=o.scrollTop||0,o=o.parentNode}return{x:r,y:a}},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},addStyle:function(e){var t,n=this.doc;styleElm=n.getElementById("mceDefaultStyles"),styleElm||(styleElm=n.createElement("style"),styleElm.id="mceDefaultStyles",styleElm.type="text/css",(t=n.getElementsByTagName("head")[0]).firstChild?t.insertBefore(styleElm,t.firstChild):t.appendChild(styleElm)),styleElm.styleSheet?styleElm.styleSheet.cssText+=e:styleElm.appendChild(n.createTextNode(e))},loadCSS:function(n){var o,r=this,a=r.doc;n||(n=""),o=a.getElementsByTagName("head")[0],t(n.split(","),(function(t){var n;r.files[t]||(r.files[t]=!0,n=r.create("link",{rel:"stylesheet",href:e._addVer(t)}),i&&!e.isIE11&&a.documentMode&&a.recalc&&(n.onload=function(){a.recalc&&a.recalc(),n.onload=null}),o.appendChild(n))}))},addClass:function(e,t){return this.run(e,(function(e){var n;return t?this.hasClass(e,t)?e.className:(n=this.removeClass(e,t),e.className=(""!=n?n+" ":"")+t):0}))},removeClass:function(t,n){var o,i=this;return i.run(t,(function(t){var r;return i.hasClass(t,n)?(o||(o=new RegExp("(^|\\s+)"+n+"(\\s+|$)","g")),r=t.className.replace(o," "),r=e.trim(" "!=r?r:""),t.className=r,r||(t.removeAttribute("class"),t.removeAttribute("className")),r):t.className}))},hasClass:function(e,t){return!(!(e=this.get(e))||!t)&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")},show:function(e){return this.setStyle(e,"display","block")},hide:function(e){return this.setStyle(e,"display","none")},isHidden:function(e){return!(e=this.get(e))||"none"==e.style.display||"none"==this.getStyle(e,"display")},uniqueId:function(e){return(e||"mce_")+this.counter++},setHTML:function(n,o){var r=this;return r.run(n,(function(n){if(i){for(;n.firstChild;)n.removeChild(n.firstChild);try{n.innerHTML="<br />"+o,n.removeChild(n.firstChild)}catch(i){var a=r.create("div");a.innerHTML="<br />"+o,t(e.grep(a.childNodes),(function(e,t){t&&n.canHaveHTML&&n.appendChild(e)}))}}else n.innerHTML=o;return o}))},getOuterHTML:function(e){var t;return(e=this.get(e))?1===e.nodeType&&this.hasOuterHTML?e.outerHTML:((t=(e.ownerDocument||this.doc).createElement("body")).appendChild(e.cloneNode(!0)),t.innerHTML):null},setOuterHTML:function(e,t,n){var o=this;function r(e,t,n){var i,r;for((r=n.createElement("body")).innerHTML=t,i=r.lastChild;i;)o.insertAfter(i.cloneNode(!0),e),i=i.previousSibling;o.remove(e)}return this.run(e,(function(e){if(1==(e=o.get(e)).nodeType)if(n=n||e.ownerDocument||o.doc,i)try{i&&1==e.nodeType?e.outerHTML=t:r(e,t,n)}catch(o){r(e,t,n)}else r(e,t,n)}))},decode:r.decode,encode:r.encodeAllRaw,insertAfter:function(e,t){return t=this.get(t),this.run(e,(function(e){var n,o;return n=t.parentNode,(o=t.nextSibling)?n.insertBefore(e,o):n.appendChild(e),e}))},replace:function(o,i,r){return n(i,"array")&&(o=o.cloneNode(!0)),this.run(i,(function(n){return r&&t(e.grep(n.childNodes),(function(e){o.appendChild(e)})),n.parentNode.replaceChild(o,n)}))},rename:function(e,n){var o,i=this;return e.nodeName!=n.toUpperCase()&&(o=i.create(n),t(i.getAttribs(e),(function(t){i.setAttrib(o,t.nodeName,i.getAttrib(e,t.nodeName))})),i.replace(o,e,1)),o||e},findCommonAncestor:function(e,t){for(var n,o=e;o;){for(n=t;n&&o!=n;)n=n.parentNode;if(o==n)break;o=o.parentNode}return!o&&e.ownerDocument?e.ownerDocument.documentElement:o},toHex:function(e){var t=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(e);function n(e){return(e=parseInt(e,10).toString(16)).length>1?e:"0"+e}return t?e="#"+n(t[1])+n(t[2])+n(t[3]):e},getClasses:function(){var n,o=this,i=[],r={},a=o.settings.class_filter;if(o.classes)return o.classes;try{t(o.doc.styleSheets,(function o(s){t(s.imports,(function(e){o(e)})),t(s.cssRules||s.rules,(function(s){switch(s.type||1){case 1:s.selectorText&&t(s.selectorText.split(","),(function(t){t=t.replace(/^\s*|\s*$|^\s\./g,""),!/\.mce/.test(t)&&/\.[\w\-]+$/.test(t)&&(n=t,t=e._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",t),a&&!(t=a(t,n))||r[t]||(i.push({class:t}),r[t]=1))}));break;case 3:try{o(s.styleSheet)}catch(e){}}}))}))}catch(e){}return i.length>0&&(o.classes=i),i},run:function(e,n,o){var i,r=this;return r.doc&&"string"==typeof e&&(e=r.get(e)),!!e&&(o=o||this,e.nodeType||!e.length&&0!==e.length?n.call(o,e):(i=[],t(e,(function(e,t){e&&("string"==typeof e&&(e=r.doc.getElementById(e)),i.push(n.call(o,e,t)))})),i))},getAttribs:function(e){var t;return(e=this.get(e))?i?(t=[],"OBJECT"==e.nodeName?e.attributes:("OPTION"===e.nodeName&&this.getAttrib(e,"selected")&&t.push({specified:1,nodeName:"selected"}),e.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,(function(e){t.push({specified:1,nodeName:e})})),t)):e.attributes:[]},isEmpty:function(t,n){var o,i,r,a,c=0;if(t=t.firstChild){r=new e.dom.TreeWalker(t,t.parentNode),n=n||this.schema?this.schema.getNonEmptyElements():null;do{if(1===(i=t.nodeType)){if(t.getAttribute("data-mce-bogus"))continue;if(a=t.nodeName.toLowerCase(),n&&n[a]){if("br"===a){c++;continue}return!1}for(this.getAttribs(t),o=t.attributes.length;o--;)if("name"===(a=t.attributes[o].nodeName)||"data-mce-bookmark"===a)return!1}if(8==i)return!1;if(3===i&&!s.test(t.nodeValue))return!1}while(t=r.next())}return c<=1},destroy:function(t){var n=this;n.win=n.doc=n.root=n.events=n.frag=null,t||e.removeUnload(n.destroy)},createRng:function(){var t=this.doc;return t.createRange?t.createRange():new e.dom.Range(this)},nodeIndex:function(e,t){var n,o,i=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)o=e.nodeType,(!t||3!=o||o!=n&&e.nodeValue.length)&&(i++,n=o);return i},split:function(t,n,o){var i,r,a,s=this,c=s.createRng();function l(t){var n,o=t.childNodes,i=t.nodeType;if(1!=i||"bookmark"!=t.getAttribute("data-mce-type")){for(n=o.length-1;n>=0;n--)l(o[n]);if(9!=i){if(3==i&&t.nodeValue.length>0){var r=e.trim(t.nodeValue).length;if(!s.isBlock(t.parentNode)||r>0||0===r&&function(e){var t=e.previousSibling&&"SPAN"==e.previousSibling.nodeName,n=e.nextSibling&&"SPAN"==e.nextSibling.nodeName;return t&&n}(t))return}else if(1==i&&(1==(o=t.childNodes).length&&o[0]&&1==o[0].nodeType&&"bookmark"==o[0].getAttribute("data-mce-type")&&t.parentNode.insertBefore(o[0],t),o.length||/^(br|hr|input|img)$/i.test(t.nodeName)))return;s.remove(t)}return t}}if(t&&n)return c.setStart(t.parentNode,s.nodeIndex(t)),c.setEnd(n.parentNode,s.nodeIndex(n)),i=c.extractContents(),(c=s.createRng()).setStart(n.parentNode,s.nodeIndex(n)+1),c.setEnd(t.parentNode,s.nodeIndex(t)+1),r=c.extractContents(),(a=t.parentNode).insertBefore(l(i),t),o?a.replaceChild(o,n):a.insertBefore(n,t),a.insertBefore(l(r),t),s.remove(t),o||n},bind:function(e,t,n,o){return this.events.add(e,t,n,o||this)},unbind:function(e,t,n){return this.events.remove(e,t,n)},fire:function(e,t,n){return this.events.fire(e,t,n)},getContentEditable:function(e){var t;return e?1!=e.nodeType?null:(t=e.getAttribute("data-mce-contenteditable"))&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null:null},_findSib:function(e,t,o){var i=this,r=t;if(e)for(n(r,"string")&&(r=function(e){return i.is(e,t)}),e=e[o];e;e=e[o])if(r(e))return e;return null},_isRes:function(e){return/^(top|left|bottom|right|width|height)/i.test(e)||/;\s*(top|left|bottom|right|width|height)/i.test(e)}}),e.DOM=new e.dom.DOMUtils(document,{process_html:0})}(tinymce),function(e){function t(e){var n=this,o=e.doc,i=tinymce.extend,r=e.nodeIndex;function a(){return o.createDocumentFragment()}function s(e,t){m(!0,e,t)}function c(e,t){m(!1,e,t)}function l(e){s(e.parentNode,r(e))}function d(e){c(e.parentNode,r(e)+1)}function u(){return h(1)}function f(e,t){var n;if(3==e.nodeType)return e;if(t<0)return e;for(n=e.firstChild;n&&t>0;)--t,n=n.nextSibling;return n||e}function p(t,n,o,i){var r,a,s,c,l,d;if(t==o)return n==i?0:n<i?-1:1;for(r=o;r&&r.parentNode!=t;)r=r.parentNode;if(r){for(a=0,s=t.firstChild;s!=r&&a<n;)a++,s=s.nextSibling;return n<=a?-1:1}for(r=t;r&&r.parentNode!=o;)r=r.parentNode;if(r){for(a=0,s=o.firstChild;s!=r&&a<i;)a++,s=s.nextSibling;return a<i?-1:1}for(c=e.findCommonAncestor(t,o),l=t;l&&l.parentNode!=c;)l=l.parentNode;for(l||(l=c),d=o;d&&d.parentNode!=c;)d=d.parentNode;if(d||(d=c),l==d)return 0;for(s=c.firstChild;s;){if(s==l)return-1;if(s==d)return 1;s=s.nextSibling}}function m(t,o,i){var r,a;for(t?(n.startContainer=o,n.startOffset=i):(n.endContainer=o,n.endOffset=i),r=n.endContainer;r.parentNode;)r=r.parentNode;for(a=n.startContainer;a.parentNode;)a=a.parentNode;a==r?p(n.startContainer,n.startOffset,n.endContainer,n.endOffset)>0&&n.collapse(t):n.collapse(t),n.collapsed=n.startContainer==n.endContainer&&n.startOffset==n.endOffset,n.commonAncestorContainer=e.findCommonAncestor(n.startContainer,n.endContainer)}function h(e){var t,i,s,c,l,d,u,p=0,m=0;if(n.startContainer==n.endContainer)return function(e){var t,i,r,s,c,l,d,u,p;2!=e&&(t=a());if(n.startOffset==n.endOffset)return t;if(3==n.startContainer.nodeType){if(i=n.startContainer.nodeValue,r=i.substring(n.startOffset,n.endOffset),1!=e&&(s=n.startContainer,u=n.startOffset,p=n.endOffset-n.startOffset,0===u&&p>=s.nodeValue.length-1?s.parentNode.removeChild(s):s.deleteData(u,p),n.collapse(!0)),2==e)return;return r.length>0&&t.appendChild(o.createTextNode(r)),t}s=f(n.startContainer,n.startOffset),c=n.endOffset-n.startOffset;for(;s&&c>0;)l=s.nextSibling,d=_(s,e),t&&t.appendChild(d),--c,s=l;1!=e&&n.collapse(!0);return t}(e);for(i=(t=n.endContainer).parentNode;i;t=i,i=i.parentNode){if(i==n.startContainer)return g(t,e);++p}for(i=(t=n.startContainer).parentNode;i;t=i,i=i.parentNode){if(i==n.endContainer)return v(t,e);++m}for(s=m-p,c=n.startContainer;s>0;)c=c.parentNode,s--;for(l=n.endContainer;s<0;)l=l.parentNode,s++;for(d=c.parentNode,u=l.parentNode;d!=u;d=d.parentNode,u=u.parentNode)c=d,l=u;return function(e,t,o){var i,s,c,l,d,u,f;2!=o&&(s=a());i=b(e,o),s&&s.appendChild(i);e.parentNode,c=r(e),l=r(t),++c,d=l-c,u=e.nextSibling;for(;d>0;)f=u.nextSibling,i=_(u,o),s&&s.appendChild(i),u=f,--d;i=y(t,o),s&&s.appendChild(i);1!=o&&(n.setStartAfter(e),n.collapse(!0));return s}(c,l,e)}function g(e,t){var o,i,s,c,l;if(2!=t&&(o=a()),i=y(e,t),o&&o.appendChild(i),(s=r(e)-n.startOffset)<=0)return 1!=t&&(n.setEndBefore(e),n.collapse(!1)),o;for(i=e.previousSibling;s>0;)c=i.previousSibling,l=_(i,t),o&&o.insertBefore(l,o.firstChild),--s,i=c;return 1!=t&&(n.setEndBefore(e),n.collapse(!1)),o}function v(e,t){var o,i,s,c,l,d;for(2!=t&&(o=a()),s=b(e,t),o&&o.appendChild(s),i=r(e),++i,c=n.endOffset-i,s=e.nextSibling;s&&c>0;)l=s.nextSibling,d=_(s,t),o&&o.appendChild(d),--c,s=l;return 1!=t&&(n.setStartAfter(e),n.collapse(!0)),o}function y(e,t){var o,i,r,a,s,c=f(n.endContainer,n.endOffset-1),l=c!=n.endContainer;if(c==e)return C(c,l,!1,t);for(i=C(o=c.parentNode,!1,!1,t);o;){for(;c;)r=c.previousSibling,a=C(c,l,!1,t),2!=t&&i.insertBefore(a,i.firstChild),l=!0,c=r;if(o==e)return i;c=o.previousSibling,s=C(o=o.parentNode,!1,!1,t),2!=t&&s.appendChild(i),i=s}}function b(e,t){var o,i,r,a,s,c=f(n.startContainer,n.startOffset),l=c!=n.startContainer;if(c==e)return C(c,l,!0,t);for(i=C(o=c.parentNode,!1,!0,t);o;){for(;c;)r=c.nextSibling,a=C(c,l,!0,t),2!=t&&i.appendChild(a),l=!0,c=r;if(o==e)return i;c=o.nextSibling,s=C(o=o.parentNode,!1,!0,t),2!=t&&s.appendChild(i),i=s}}function C(t,o,i,r){var a,s,c,l,d;if(o)return _(t,r);if(3==t.nodeType){if(a=t.nodeValue,i?(l=n.startOffset,s=a.substring(l),c=a.substring(0,l)):(l=n.endOffset,s=a.substring(0,l),c=a.substring(l)),1!=r&&(t.nodeValue=c),2==r)return;return(d=e.clone(t,!1)).nodeValue=s,d}return 2!=r?e.clone(t,!1):void 0}function _(t,n){if(2!=n)return 1==n?e.clone(t,!0):t;t.parentNode.removeChild(t)}return i(n,{startContainer:o,startOffset:0,endContainer:o,endOffset:0,collapsed:!0,commonAncestorContainer:o,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:s,setEnd:c,setStartBefore:l,setStartAfter:function(e){s(e.parentNode,r(e)+1)},setEndBefore:function(e){c(e.parentNode,r(e))},setEndAfter:d,collapse:function(e){e?(n.endContainer=n.startContainer,n.endOffset=n.startOffset):(n.startContainer=n.endContainer,n.startOffset=n.endOffset);n.collapsed=!0},selectNode:function(e){l(e),d(e)},selectNodeContents:function(e){s(e,0),c(e,1===e.nodeType?e.childNodes.length:e.nodeValue.length)},compareBoundaryPoints:function(e,t){var o=n.startContainer,i=n.startOffset,r=n.endContainer,a=n.endOffset,s=t.startContainer,c=t.startOffset,l=t.endContainer,d=t.endOffset;if(0===e)return p(o,i,s,c);if(1===e)return p(r,a,s,c);if(2===e)return p(r,a,l,d);if(3===e)return p(o,i,l,d)},deleteContents:function(){h(2)},extractContents:function(){return h(0)},cloneContents:u,insertNode:function(t){var n,o,i=this.startContainer,r=this.startOffset;3!==i.nodeType&&4!==i.nodeType||!i.nodeValue?(i.childNodes.length>0&&(o=i.childNodes[r]),o?i.insertBefore(t,o):i.appendChild(t)):r?r>=i.nodeValue.length?e.insertAfter(t,i):(n=i.splitText(r),i.parentNode.insertBefore(t,n)):i.parentNode.insertBefore(t,i)},surroundContents:function(e){var t=n.extractContents();n.insertNode(e),e.appendChild(t),n.selectNode(e)},cloneRange:function(){return i(new t(e),{startContainer:n.startContainer,startOffset:n.startOffset,endContainer:n.endContainer,endOffset:n.endOffset,collapsed:n.collapsed,commonAncestorContainer:n.commonAncestorContainer})},toStringIE:function(){return e.create("body",null,u()).outerText}}),n}tinymce.dom.Range=t,t.prototype.toString=function(){return this.toStringIE()}}(),tinymce.dom.TridentSelection=function(e){var t=this,n=e.dom;function o(t,n){var o,i,r,a,s,c,l,d,u=0,f=-1;if((o=t.duplicate()).collapse(n),(d=o.parentElement()).ownerDocument===e.dom.doc){for(;"false"===d.contentEditable;)d=d.parentNode;if(!d.hasChildNodes())return{node:d,inside:1};for(i=(a=d.children).length-1;u<=i;)if(s=a[l=Math.floor((u+i)/2)],o.moveToElementText(s),(f=o.compareEndPoints(n?"StartToStart":"EndToEnd",t))>0)i=l-1;else{if(!(f<0))return{node:s};u=l+1}if(f<0)for(s?o.collapse(!1):(o.moveToElementText(d),o.collapse(!0),s=d,r=!0),c=0;0!==o.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==o.move("character",1)&&d==o.parentElement();)c++;else for(o.collapse(!0),c=0;0!==o.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==o.move("character",-1)&&d==o.parentElement();)c++;return{node:s,position:f,offset:c,inside:r}}}this.getBookmark=function(t){var i=e.getRng(),r={};function a(e){var t,o,i,r,a=[];for(t=e.parentNode,o=n.getRoot().parentNode;t!=o&&9!==t.nodeType;){for(r=(i=t.children).length;r--;)if(e===i[r]){a.push(r);break}e=t,t=t.parentNode}return a}function s(e){var t;if(t=o(i,e))return{position:t.position,offset:t.offset,indexes:a(t.node),inside:t.inside}}return 2===t&&(i.item?r.start={ctrl:!0,indexes:a(i.item(0))}:(r.start=s(!0),e.isCollapsed()||(r.end=s()))),r},this.moveToBookmark=function(e){var t,o=n.doc.body;function i(e){var t,o,i,r;for(t=n.getRoot(),o=e.length-1;o>=0;o--)r=t.children,(i=e[o])<=r.length-1&&(t=r[i]);return t}function r(n){var r,a,s=e[n?"start":"end"];s&&(r=s.position>0,(a=o.createTextRange()).moveToElementText(i(s.indexes)),offset=s.offset,void 0!==offset?(a.collapse(s.inside||r),a.moveStart("character",r?-offset:offset)):a.collapse(n),t.setEndPoint(n?"StartToStart":"EndToStart",a),n&&t.collapse(!0))}e.start&&(e.start.ctrl?((t=o.createControlRange()).addElement(i(e.start.indexes)),t.select()):(t=o.createTextRange(),r(!0),r(),t.select()))},this.addRange=function(t){var o,i,r,a,s,c,l,d,u,f=e.dom.doc,p=f.body;function m(e){var t,i,l,d,u;l=n.create("a"),t=e?r:s,i=e?a:c,d=o.duplicate(),t!=f&&t!=f.documentElement||(t=p,i=0),3==t.nodeType?(t.parentNode.insertBefore(l,t),d.moveToElementText(l),d.moveStart("character",i),n.remove(l),o.setEndPoint(e?"StartToStart":"EndToEnd",d)):((u=t.childNodes).length?(i>=u.length?n.insertAfter(l,u[u.length-1]):t.insertBefore(l,u[i]),d.moveToElementText(l)):t.canHaveHTML&&(t.innerHTML="<span>\ufeff</span>",l=t.firstChild,d.moveToElementText(l),d.collapse(!1)),o.setEndPoint(e?"StartToStart":"EndToEnd",d),n.remove(l))}if(r=t.startContainer,a=t.startOffset,s=t.endContainer,c=t.endOffset,o=p.createTextRange(),r==s&&1==r.nodeType){if(a==c&&!r.hasChildNodes()){if(r.canHaveHTML)return(l=r.previousSibling)&&!l.hasChildNodes()&&n.isBlock(l)?l.innerHTML="\ufeff":l=null,r.innerHTML="<span>\ufeff</span><span>\ufeff</span>",o.moveToElementText(r.lastChild),o.select(),n.doc.selection.clear(),r.innerHTML="",void(l&&(l.innerHTML=""));a=n.nodeIndex(r),r=r.parentNode}if(a==c-1)try{if(u=r.childNodes[a],(i=p.createControlRange()).addElement(u),i.select(),(d=e.getRng()).item&&u===d.item(0))return}catch(e){}}m(!0),m(),o.select()},this.getRangeAt=function(){var i,r,a,s,c,l=e.getRng(),d=n.createRng();if((i=l.item?l.item(0):l.parentElement()).ownerDocument!=n.doc)return d;if(r=e.isCollapsed(),l.item)return d.setStart(i.parentNode,n.nodeIndex(i)),d.setEnd(d.startContainer,d.startOffset+1),d;function u(e){var t,n,i,r,a=o(l,e),s=0;if(t=a.node,n=a.offset,!a.inside||t.hasChildNodes())if(void 0!==n){if(a.position<0){if(!(i=a.inside?t.firstChild:t.nextSibling))return void d[e?"setStartAfter":"setEndAfter"](t);if(!n)return void(3==i.nodeType?d[e?"setStart":"setEnd"](i,0):d[e?"setStartBefore":"setEndBefore"](i));for(;i;){if((s+=(r=i.nodeValue).length)>=n){t=i,s-=n,s=r.length-s;break}i=i.nextSibling}}else{if(!(i=t.previousSibling))return d[e?"setStartBefore":"setEndBefore"](t);if(!n)return void(3==t.nodeType?d[e?"setStart":"setEnd"](i,t.nodeValue.length):d[e?"setStartAfter":"setEndAfter"](i));for(;i;){if((s+=i.nodeValue.length)>=n){t=i,s-=n;break}i=i.previousSibling}}d[e?"setStart":"setEnd"](t,s)}else d[e?"setStartBefore":"setEndAfter"](t);else d[e?"setStart":"setEnd"](t,0)}try{u(!0),r||u()}catch(n){if(-2147024809!=n.number)throw n;c=t.getBookmark(2),(a=l.duplicate()).collapse(!0),i=a.parentElement(),r||((a=l.duplicate()).collapse(!1),(s=a.parentElement()).innerHTML=s.innerHTML),i.innerHTML=i.innerHTML,t.moveToBookmark(c),l=e.getRng(),u(!0),r||u()}return d}},function(){var e=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,t=0,n=Object.prototype.toString,o=!1,i=!0,r=/\\/g,a=/\r\n/g,s=/\W/;[0,0].sort((function(){return i=!1,0}));var c=function(t,o,i,r){i=i||[];var a=o=o||document;if(1!==o.nodeType&&9!==o.nodeType)return[];if(!t||"string"!=typeof t)return i;var s,l,f,p,m,h,g,v,y=!0,b=c.isXML(o),_=[],x=t;do{if(e.exec(""),(s=e.exec(x))&&(x=s[3],_.push(s[1]),s[2])){p=s[3];break}}while(s);if(_.length>1&&u.exec(t))if(2===_.length&&d.relative[_[0]])l=S(_[0]+_[1],o,r);else for(l=d.relative[_[0]]?[o]:c(_.shift(),o);_.length;)t=_.shift(),d.relative[t]&&(t+=_.shift()),l=S(t,l,r);else if(!r&&_.length>1&&9===o.nodeType&&!b&&d.match.ID.test(_[0])&&!d.match.ID.test(_[_.length-1])&&(o=(m=c.find(_.shift(),o,b)).expr?c.filter(m.expr,m.set)[0]:m.set[0]),o)for(l=(m=r?{expr:_.pop(),set:C(r)}:c.find(_.pop(),1!==_.length||"~"!==_[0]&&"+"!==_[0]||!o.parentNode?o:o.parentNode,b)).expr?c.filter(m.expr,m.set):m.set,_.length>0?f=C(l):y=!1;_.length;)g=h=_.pop(),d.relative[h]?g=_.pop():h="",null==g&&(g=o),d.relative[h](f,g,b);else f=_=[];if(f||(f=l),f||c.error(h||t),"[object Array]"===n.call(f))if(y)if(o&&1===o.nodeType)for(v=0;null!=f[v];v++)f[v]&&(!0===f[v]||1===f[v].nodeType&&c.contains(o,f[v]))&&i.push(l[v]);else for(v=0;null!=f[v];v++)f[v]&&1===f[v].nodeType&&i.push(l[v]);else i.push.apply(i,f);else C(f,i);return p&&(c(p,a,i,r),c.uniqueSort(i)),i};c.uniqueSort=function(e){if(m&&(o=i,e.sort(m),o))for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1);return e},c.matches=function(e,t){return c(e,null,null,t)},c.matchesSelector=function(e,t){return c(t,null,null,[e]).length>0},c.find=function(e,t,n){var o,i,a,s,c,l;if(!e)return[];for(i=0,a=d.order.length;i<a;i++)if(c=d.order[i],(s=d.leftMatch[c].exec(e))&&(l=s[1],s.splice(1,1),"\\"!==l.substr(l.length-1)&&(s[1]=(s[1]||"").replace(r,""),null!=(o=d.find[c](s,t,n))))){e=e.replace(d.match[c],"");break}return o||(o=void 0!==t.getElementsByTagName?t.getElementsByTagName("*"):[]),{set:o,expr:e}},c.filter=function(e,t,n,o){for(var i,r,a,s,l,u,f,p,m,h=e,g=[],v=t,y=t&&t[0]&&c.isXML(t[0]);e&&t.length;){for(a in d.filter)if(null!=(i=d.leftMatch[a].exec(e))&&i[2]){if(u=d.filter[a],f=i[1],r=!1,i.splice(1,1),"\\"===f.substr(f.length-1))continue;if(v===g&&(g=[]),d.preFilter[a])if(i=d.preFilter[a](i,v,n,g,o,y)){if(!0===i)continue}else r=s=!0;if(i)for(p=0;null!=(l=v[p]);p++)l&&(m=o^(s=u(l,i,p,v)),n&&null!=s?m?r=!0:v[p]=!1:m&&(g.push(l),r=!0));if(void 0!==s){if(n||(v=g),e=e.replace(d.match[a],""),!r)return[];break}}if(e===h){if(null!=r)break;c.error(e)}h=e}return v},c.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};var l=c.getText=function(e){var t,n,o=e.nodeType,i="";if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;if("string"==typeof e.innerText)return e.innerText.replace(a,"");for(e=e.firstChild;e;e=e.nextSibling)i+=l(e)}else if(3===o||4===o)return e.nodeValue}else for(t=0;n=e[t];t++)8!==n.nodeType&&(i+=l(n));return i},d=c.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{class:"className",for:"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(e,t){var n="string"==typeof t,o=n&&!s.test(t),i=n&&!o;o&&(t=t.toLowerCase());for(var r,a=0,l=e.length;a<l;a++)if(r=e[a]){for(;(r=r.previousSibling)&&1!==r.nodeType;);e[a]=i||r&&r.nodeName.toLowerCase()===t?r||!1:r===t}i&&c.filter(t,e,!0)},">":function(e,t){var n,o="string"==typeof t,i=0,r=e.length;if(o&&!s.test(t)){for(t=t.toLowerCase();i<r;i++)if(n=e[i]){var a=n.parentNode;e[i]=a.nodeName.toLowerCase()===t&&a}}else{for(;i<r;i++)(n=e[i])&&(e[i]=o?n.parentNode:n.parentNode===t);o&&c.filter(t,e,!0)}},"":function(e,n,o){var i,r=t++,a=x;"string"!=typeof n||s.test(n)||(i=n=n.toLowerCase(),a=_),a("parentNode",n,r,e,i,o)},"~":function(e,n,o){var i,r=t++,a=x;"string"!=typeof n||s.test(n)||(i=n=n.toLowerCase(),a=_),a("previousSibling",n,r,e,i,o)}},find:{ID:function(e,t,n){if(void 0!==t.getElementById&&!n){var o=t.getElementById(e[1]);return o&&o.parentNode?[o]:[]}},NAME:function(e,t){if(void 0!==t.getElementsByName){for(var n=[],o=t.getElementsByName(e[1]),i=0,r=o.length;i<r;i++)o[i].getAttribute("name")===e[1]&&n.push(o[i]);return 0===n.length?null:n}},TAG:function(e,t){if(void 0!==t.getElementsByTagName)return t.getElementsByTagName(e[1])}},preFilter:{CLASS:function(e,t,n,o,i,a){if(e=" "+e[1].replace(r,"")+" ",a)return e;for(var s,c=0;null!=(s=t[c]);c++)s&&(i^(s.className&&(" "+s.className+" ").replace(/[\t\n\r]/g," ").indexOf(e)>=0)?n||o.push(s):n&&(t[c]=!1));return!1},ID:function(e){return e[1].replace(r,"")},TAG:function(e,t){return e[1].replace(r,"").toLowerCase()},CHILD:function(e){if("nth"===e[1]){e[2]||c.error(e[0]),e[2]=e[2].replace(/^\+|\s*/g,"");var n=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(("even"===e[2]?"2n":"odd"===e[2]&&"2n+1")||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=n[1]+(n[2]||1)-0,e[3]=n[3]-0}else e[2]&&c.error(e[0]);return e[0]=t++,e},ATTR:function(e,t,n,o,i,a){var s=e[1]=e[1].replace(r,"");return!a&&d.attrMap[s]&&(e[1]=d.attrMap[s]),e[4]=(e[4]||e[5]||"").replace(r,""),"~="===e[2]&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(t,n,o,i,r){if("not"===t[1]){if(!((e.exec(t[3])||"").length>1||/^\w/.test(t[3]))){var a=c.filter(t[3],n,o,!0^r);return o||i.push.apply(i,a),!1}t[3]=c(t[3],null,null,n)}else if(d.match.POS.test(t[0])||d.match.CHILD.test(t[0]))return!0;return t},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return!1===e.disabled&&"hidden"!==e.type},disabled:function(e){return!0===e.disabled},checked:function(e){return!0===e.checked},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!c(n[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){var t=e.getAttribute("type"),n=e.type;return"input"===e.nodeName.toLowerCase()&&"text"===n&&(t===n||null===t)},radio:function(e){return"input"===e.nodeName.toLowerCase()&&"radio"===e.type},checkbox:function(e){return"input"===e.nodeName.toLowerCase()&&"checkbox"===e.type},file:function(e){return"input"===e.nodeName.toLowerCase()&&"file"===e.type},password:function(e){return"input"===e.nodeName.toLowerCase()&&"password"===e.type},submit:function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&"submit"===e.type},image:function(e){return"input"===e.nodeName.toLowerCase()&&"image"===e.type},reset:function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&"reset"===e.type},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t){return 0===t},last:function(e,t,n,o){return t===o.length-1},even:function(e,t){return t%2==0},odd:function(e,t){return t%2==1},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0===t},eq:function(e,t,n){return n[3]-0===t}},filter:{PSEUDO:function(e,t,n,o){var i=t[1],r=d.filters[i];if(r)return r(e,n,t,o);if("contains"===i)return(e.textContent||e.innerText||l([e])||"").indexOf(t[3])>=0;if("not"===i){for(var a=t[3],s=0,u=a.length;s<u;s++)if(a[s]===e)return!1;return!0}c.error(i)},CHILD:function(e,t){var n,o,i,r,a,s,c=t[1],l=e;switch(c){case"only":case"first":for(;l=l.previousSibling;)if(1===l.nodeType)return!1;if("first"===c)return!0;l=e;case"last":for(;l=l.nextSibling;)if(1===l.nodeType)return!1;return!0;case"nth":if(n=t[2],o=t[3],1===n&&0===o)return!0;if(i=t[0],(r=e.parentNode)&&(r.sizcache!==i||!e.nodeIndex)){for(a=0,l=r.firstChild;l;l=l.nextSibling)1===l.nodeType&&(l.nodeIndex=++a);r.sizcache=i}return s=e.nodeIndex-o,0===n?0===s:s%n==0&&s/n>=0}},ID:function(e,t){return 1===e.nodeType&&e.getAttribute("id")===t},TAG:function(e,t){return"*"===t&&1===e.nodeType||!!e.nodeName&&e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var n=t[1],o=c.attr?c.attr(e,n):d.attrHandle[n]?d.attrHandle[n](e):null!=e[n]?e[n]:e.getAttribute(n),i=o+"",r=t[2],a=t[4];return null==o?"!="===r:!r&&c.attr?null!=o:"="===r?i===a:"*="===r?i.indexOf(a)>=0:"~="===r?(" "+i+" ").indexOf(a)>=0:a?"!="===r?i!==a:"^="===r?0===i.indexOf(a):"$="===r?i.substr(i.length-a.length)===a:"|="===r&&(i===a||i.substr(0,a.length+1)===a+"-"):i&&!1!==o},POS:function(e,t,n,o){var i=t[2],r=d.setFilters[i];if(r)return r(e,n,t,o)}}},u=d.match.POS,f=function(e,t){return"\\"+(t-0+1)};for(var p in d.match)d.match[p]=new RegExp(d.match[p].source+/(?![^\[]*\])(?![^\(]*\))/.source),d.leftMatch[p]=new RegExp(/(^(?:.|\r|\n)*?)/.source+d.match[p].source.replace(/\\(\d+)/g,f));d.match.globalPOS=u;var m,h,g,v,y,b,C=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(e){C=function(e,t){var o=0,i=t||[];if("[object Array]"===n.call(e))Array.prototype.push.apply(i,e);else if("number"==typeof e.length)for(var r=e.length;o<r;o++)i.push(e[o]);else for(;e[o];o++)i.push(e[o]);return i}}function _(e,t,n,o,i,r){for(var a=0,s=o.length;a<s;a++){var c=o[a];if(c){var l=!1;for(c=c[e];c;){if(c.sizcache===n){l=o[c.sizset];break}if(1!==c.nodeType||r||(c.sizcache=n,c.sizset=a),c.nodeName.toLowerCase()===t){l=c;break}c=c[e]}o[a]=l}}}function x(e,t,n,o,i,r){for(var a=0,s=o.length;a<s;a++){var l=o[a];if(l){var d=!1;for(l=l[e];l;){if(l.sizcache===n){d=o[l.sizset];break}if(1===l.nodeType)if(r||(l.sizcache=n,l.sizset=a),"string"!=typeof t){if(l===t){d=!0;break}}else if(c.filter(t,[l]).length>0){d=l;break}l=l[e]}o[a]=d}}}document.documentElement.compareDocumentPosition?m=function(e,t){return e===t?(o=!0,0):e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t)?-1:1:e.compareDocumentPosition?-1:1}:(m=function(e,t){if(e===t)return o=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,i,r=[],a=[],s=e.parentNode,c=t.parentNode,l=s;if(s===c)return h(e,t);if(!s)return-1;if(!c)return 1;for(;l;)r.unshift(l),l=l.parentNode;for(l=c;l;)a.unshift(l),l=l.parentNode;n=r.length,i=a.length;for(var d=0;d<n&&d<i;d++)if(r[d]!==a[d])return h(r[d],a[d]);return d===n?h(e,a[d],-1):h(r[d],t,1)},h=function(e,t,n){if(e===t)return n;for(var o=e.nextSibling;o;){if(o===t)return-1;o=o.nextSibling}return 1}),g=document.createElement("div"),v="script"+(new Date).getTime(),y=document.documentElement,g.innerHTML="<a name='"+v+"'/>",y.insertBefore(g,y.firstChild),document.getElementById(v)&&(d.find.ID=function(e,t,n){if(void 0!==t.getElementById&&!n){var o=t.getElementById(e[1]);return o?o.id===e[1]||void 0!==o.getAttributeNode&&o.getAttributeNode("id").nodeValue===e[1]?[o]:void 0:[]}},d.filter.ID=function(e,t){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return 1===e.nodeType&&n&&n.nodeValue===t}),y.removeChild(g),y=g=null,(b=document.createElement("div")).appendChild(document.createComment("")),b.getElementsByTagName("*").length>0&&(d.find.TAG=function(e,t){var n=t.getElementsByTagName(e[1]);if("*"===e[1]){for(var o=[],i=0;n[i];i++)1===n[i].nodeType&&o.push(n[i]);n=o}return n}),b.innerHTML="<a href='#'></a>",b.firstChild&&void 0!==b.firstChild.getAttribute&&"#"!==b.firstChild.getAttribute("href")&&(d.attrHandle.href=function(e){return e.getAttribute("href",2)}),b=null,document.querySelectorAll&&function(){var e=c,t=document.createElement("div");if(t.innerHTML="<p class='TEST'></p>",!t.querySelectorAll||0!==t.querySelectorAll(".TEST").length){for(var n in c=function(t,n,o,i){if(n=n||document,!i&&!c.isXML(n)){var r=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t);if(r&&(1===n.nodeType||9===n.nodeType)){if(r[1])return C(n.getElementsByTagName(t),o);if(r[2]&&d.find.CLASS&&n.getElementsByClassName)return C(n.getElementsByClassName(r[2]),o)}if(9===n.nodeType){if("body"===t&&n.body)return C([n.body],o);if(r&&r[3]){var a=n.getElementById(r[3]);if(!a||!a.parentNode)return C([],o);if(a.id===r[3])return C([a],o)}try{return C(n.querySelectorAll(t),o)}catch(e){}}else if(1===n.nodeType&&"object"!==n.nodeName.toLowerCase()){var s=n,l=n.getAttribute("id"),u=l||"__sizzle__",f=n.parentNode,p=/^\s*[+~]/.test(t);l?u=u.replace(/'/g,"\\$&"):n.setAttribute("id",u),p&&f&&(n=n.parentNode);try{if(!p||f)return C(n.querySelectorAll("[id='"+u+"'] "+t),o)}catch(e){}finally{l||s.removeAttribute("id")}}}return e(t,n,o,i)},e)c[n]=e[n];t=null}}(),function(){var e=document.documentElement,t=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(t){var n=!t.call(document.createElement("div"),"div"),o=!1;try{t.call(document.documentElement,"[test!='']:sizzle")}catch(e){o=!0}c.matchesSelector=function(e,i){if(i=i.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!c.isXML(e))try{if(o||!d.match.PSEUDO.test(i)&&!/!=/.test(i)){var r=t.call(e,i);if(r||!n||e.document&&11!==e.document.nodeType)return r}}catch(e){}return c(i,null,null,[e]).length>0}}}(),function(){var e=document.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>",e.getElementsByClassName&&0!==e.getElementsByClassName("e").length&&(e.lastChild.className="e",1!==e.getElementsByClassName("e").length&&(d.order.splice(1,0,"CLASS"),d.find.CLASS=function(e,t,n){if(void 0!==t.getElementsByClassName&&!n)return t.getElementsByClassName(e[1])},e=null))}(),document.documentElement.contains?c.contains=function(e,t){return e!==t&&(!e.contains||e.contains(t))}:document.documentElement.compareDocumentPosition?c.contains=function(e,t){return!!(16&e.compareDocumentPosition(t))}:c.contains=function(){return!1},c.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return!!t&&"HTML"!==t.nodeName};var S=function(e,t,n){for(var o,i=[],r="",a=t.nodeType?[t]:t;o=d.match.PSEUDO.exec(e);)r+=o[0],e=e.replace(d.match.PSEUDO,"");e=d.relative[e]?e+"*":e;for(var s=0,l=a.length;s<l;s++)c(e,a[s],i,n);return c.filter(r,i)};window.tinymce.dom.Sizzle=c}(),function(e){e.dom.Element=function(t,n){var o,i=this;i.settings=n=n||{},i.id=t,i.dom=o=n.dom||e.DOM,e.isIE||o.get(i.id),e.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),(function(e){i[e]=function(){var n,r=[t];for(n=0;n<arguments.length;n++)r.push(arguments[n]);return r=o[e].apply(o,r),i.update(e),r}})),e.extend(i,{on:function(t,n,o){return e.dom.Event.add(i.id,t,n,o)},getXY:function(){return{x:parseInt(i.getStyle("left")),y:parseInt(i.getStyle("top"))}},getSize:function(){var e=o.get(i.id);return{w:parseInt(i.getStyle("width")||e.clientWidth),h:parseInt(i.getStyle("height")||e.clientHeight)}},moveTo:function(e,t){i.setStyles({left:e,top:t})},moveBy:function(e,t){var n=i.getXY();i.moveTo(n.x+e,n.y+t)},resizeTo:function(e,t){i.setStyles({width:e,height:t})},resizeBy:function(e,t){var n=i.getSize();i.resizeTo(n.w+e,n.h+t)},update:function(t){var r;if(e.isIE6&&n.blocker){if(0===(t=t||"").indexOf("get")||0===t.indexOf("has")||0===t.indexOf("is"))return;if("remove"==t)return void o.remove(i.blocker);i.blocker?r=o.get(i.blocker):(i.blocker=o.uniqueId(),r=o.add(n.container||o.getRoot(),"iframe",{id:i.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'}),o.setStyle(r,"opacity",0)),o.setStyles(r,{left:i.getStyle("left",1),top:i.getStyle("top",1),width:i.getStyle("width",1),height:i.getStyle("height",1),display:i.getStyle("display",1),zIndex:parseInt(i.getStyle("zIndex",1)||0)-1})}}})}}(tinymce),function(e){var t=e.is,n=e.isIE,o=e.each,i=e.dom.TreeWalker;e.create("tinymce.dom.Selection",{Selection:function(t,n,i,r){var a=this;a.dom=t,a.win=n,a.serializer=i,a.editor=r,o(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],(function(t){a[t]=new e.util.Dispatcher(a)})),a.win.getSelection||(a.tridentSel=new e.dom.TridentSelection(a)),e.isIE&&!e.isIE11&&t.boxModel&&this._fixIESelection(),e.addUnload(a.destroy,a)},setCursorLocation:function(e,t){var n=this,o=n.dom.createRng();o.setStart(e,t),o.setEnd(e,t),n.setRng(o),n.collapse(!1)},getContent:function(e){var n,o,i,r=this,a=r.getRng(),s=r.dom.create("body"),c=r.getSel();return n=o="",(e=e||{}).get=!0,e.format=e.format||"html",e.forced_root_block="",r.onBeforeGetContent.dispatch(r,e),"text"==e.format?r.isCollapsed()?"":a.text||(c.toString?c.toString():""):(a.cloneContents?(i=a.cloneContents())&&s.appendChild(i):t(a.item)||t(a.htmlText)?(s.innerHTML="<br>"+(a.item?a.item(0).outerHTML:a.htmlText),s.removeChild(s.firstChild)):s.innerHTML=a.toString(),/^\s/.test(s.innerHTML)&&(n=" "),/\s+$/.test(s.innerHTML)&&(o=" "),e.getInner=!0,e.content=r.isCollapsed()?"":n+r.serializer.serialize(s,e)+o,r.onGetContent.dispatch(r,e),e.content)},setContent:function(e,t){var n,o,i,r=this.getRng(),a=this.win.document;if((t=t||{format:"html"}).set=!0,e=t.content=e,t.no_events||this.onBeforeSetContent.dispatch(this,t),e=t.content,r.insertNode){e+='<span id="__caret">_</span>',r.startContainer==a&&r.endContainer==a?a.body.innerHTML=e:(r.deleteContents(),0===a.body.childNodes.length?a.body.innerHTML=e:r.createContextualFragment?r.insertNode(r.createContextualFragment(e)):(o=a.createDocumentFragment(),i=a.createElement("div"),o.appendChild(i),i.outerHTML=e,r.insertNode(o))),n=this.dom.get("__caret"),(r=a.createRange()).setStartBefore(n),r.setEndBefore(n),this.setRng(r),this.dom.remove("__caret");try{this.setRng(r)}catch(e){}}else r.item&&(a.execCommand("Delete",!1,null),r=this.getRng()),/^\s+/.test(e)?(r.pasteHTML('<span id="__mce_tmp">_</span>'+e),this.dom.remove("__mce_tmp")):r.pasteHTML(e);t.no_events||this.onSetContent.dispatch(this,t)},getStart:function(){var e,t,n,o,i=this.getRng();if(i.duplicate||i.item){if(i.item)return i.item(0);for((n=i.duplicate()).collapse(1),(e=n.parentElement()).ownerDocument!==this.dom.doc&&(e=this.dom.getRoot()),t=o=i.parentElement();o=o.parentNode;)if(o==e){e=t;break}return e}return 1==(e=i.startContainer).nodeType&&e.hasChildNodes()&&(e=e.childNodes[Math.min(e.childNodes.length-1,i.startOffset)]),e&&3==e.nodeType?e.parentNode:e},getEnd:function(){var e,t,n=this.getRng();return n.duplicate||n.item?n.item?n.item(0):((n=n.duplicate()).collapse(0),(e=n.parentElement()).ownerDocument!==this.dom.doc&&(e=this.dom.getRoot()),e&&"BODY"==e.nodeName&&e.lastChild||e):(e=n.endContainer,t=n.endOffset,1==e.nodeType&&e.hasChildNodes()&&(e=e.childNodes[t>0?t-1:t]),e&&3==e.nodeType?e.parentNode:e)},getBookmark:function(e,t){var n,i,r,a,s,c,l,d=this,u=d.dom,f="\ufeff";function p(e,t){var n=0;return o(u.select(e),(function(e,o){e==t&&(n=o)})),n}function m(e){function t(t){var n,o,i,r=t?"start":"end";n=e[r+"Container"],o=e[r+"Offset"],1==n.nodeType&&"TR"==n.nodeName&&(n=(i=n.childNodes)[Math.min(t?o:o-1,i.length-1)])&&(o=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,o))}return t(!0),t(),e}if(2==e)return d.tridentSel?d.tridentSel.getBookmark(e):function(){var e=d.getRng(!0),n=u.getRoot(),o={};function i(e,o){var i,r,a=e[o?"startContainer":"endContainer"],s=e[o?"startOffset":"endOffset"],c=[],l=0;if(3==a.nodeType){if(t)for(i=a.previousSibling;i&&3==i.nodeType;i=i.previousSibling)s+=i.nodeValue.length;c.push(s)}else s>=(r=a.childNodes).length&&r.length&&(l=1,s=Math.max(0,r.length-1)),c.push(d.dom.nodeIndex(r[s],t)+l);for(;a&&a!=n;a=a.parentNode)c.push(d.dom.nodeIndex(a,t));return c}return o.start=i(e,!0),d.isCollapsed()||(o.end=i(e)),o}();if(e)return(n=d.getRng()).setStart&&(n={startContainer:n.startContainer,startOffset:n.startOffset,endContainer:n.endContainer,endOffset:n.endOffset}),{rng:n};if(n=d.getRng(),r=u.uniqueId(),a=tinyMCE.activeEditor.selection.isCollapsed(),l="overflow:hidden;line-height:0px",n.duplicate||n.item){if(n.item)return{name:s=(c=n.item(0)).nodeName,index:p(s,c)};i=n.duplicate();try{n.collapse(),n.pasteHTML('<span data-mce-type="bookmark" id="'+r+'_start" style="'+l+'">'+f+"</span>"),a||(i.collapse(!1),n.moveToElementText(i.parentElement()),0===n.compareEndPoints("StartToEnd",i)&&i.move("character",-1),i.pasteHTML('<span data-mce-type="bookmark" id="'+r+'_end" style="'+l+'">'+f+"</span>"))}catch(e){return null}}else{if("IMG"==(s=(c=d.getNode()).nodeName))return{name:s,index:p(s,c)};i=m(n.cloneRange()),a||(i.collapse(!1),i.insertNode(u.create("span",{"data-mce-type":"bookmark",id:r+"_end",style:l},f))),(n=m(n)).collapse(!0),n.insertNode(u.create("span",{"data-mce-type":"bookmark",id:r+"_start",style:l},f))}return d.moveToBookmark({id:r,keep:1}),{id:r}},moveToBookmark:function(t){var i,r,a,s,c,l,d,u=this,f=u.dom;function p(e){var n,o,r,s,c=t[e?"start":"end"];if(c){for(r=c[0],o=a,n=c.length-1;n>=1;n--){if(s=o.childNodes,c[n]>s.length-1)return;o=s[c[n]]}3===o.nodeType&&(r=Math.min(c[0],o.nodeValue.length)),1===o.nodeType&&(r=Math.min(c[0],o.childNodes.length)),e?i.setStart(o,r):i.setEnd(o,r)}return!0}function m(n){var i,r,a,u,p=f.get(t.id+"_"+n),m=t.keep;if(p&&(i=p.parentNode,"start"==n?(m?(i=p.firstChild,r=1):r=f.nodeIndex(p),s=c=i,l=d=r):(m?(i=p.firstChild,r=1):r=f.nodeIndex(p),c=i,d=r),!m)){for(u=p.previousSibling,a=p.nextSibling,o(e.grep(p.childNodes),(function(e){3==e.nodeType&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))}));p=f.get(t.id+"_"+n);)f.remove(p,1);u&&a&&u.nodeType==a.nodeType&&3==u.nodeType&&!e.isOpera&&(r=u.nodeValue.length,u.appendData(a.nodeValue),f.remove(a),"start"==n?(s=c=u,l=d=r):(c=u,d=r))}}function h(e){return!f.isBlock(e)||e.innerHTML||n||(e.innerHTML='<br data-mce-bogus="1" />'),e}if(t)if(t.start){if(i=f.createRng(),a=f.getRoot(),u.tridentSel)return u.tridentSel.moveToBookmark(t);p(!0)&&p()&&u.setRng(i)}else if(t.id)m("start"),m("end"),s&&((i=f.createRng()).setStart(h(s),l),i.setEnd(h(c),d),u.setRng(i));else if(t.name)u.select(f.select(t.name)[t.index]);else if(t.rng){if((i=t.rng).startContainer){r=u.dom.createRng();try{r.setStart(i.startContainer,i.startOffset),r.setEnd(i.endContainer,i.endOffset)}catch(e){}i=r}u.setRng(i)}},select:function(t,n){var o,r=this.dom,a=r.createRng();function s(t,n){var o=new i(t,t);do{if(3==t.nodeType&&0!==e.trim(t.nodeValue).length)return void(n?a.setStart(t,0):a.setEnd(t,t.nodeValue.length));if("BR"==t.nodeName)return void(n?a.setStartBefore(t):a.setEndBefore(t))}while(t=n?o.next():o.prev())}return t&&(o=r.nodeIndex(t),a.setStart(t.parentNode,o),a.setEnd(t.parentNode,o+1),n&&(s(t,1),s(t)),this.setRng(a)),t},isCollapsed:function(){var e=this.getRng(),t=this.getSel();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},collapse:function(e){var t,n=this.getRng();n.item&&(t=n.item(0),(n=this.win.document.body.createTextRange()).moveToElementText(t)),n.collapse(!!e),this.setRng(n)},getSel:function(){var e=this.win;return e.getSelection?e.getSelection():e.document.selection},getRng:function(t){var n,o,i,r=this.win.document;if(t&&this.tridentSel)return this.tridentSel.getRangeAt(0);try{(n=this.getSel())&&(o=n.rangeCount>0?n.getRangeAt(0):n.createRange?n.createRange():r.createRange())}catch(e){}return e.isIE&&!e.isIE11&&o&&o.setStart&&r.selection.createRange().item&&(i=r.selection.createRange().item(0),(o=r.createRange()).setStartBefore(i),o.setEndAfter(i)),o||(o=r.createRange?r.createRange():r.body.createTextRange()),o.setStart&&9===o.startContainer.nodeType&&o.collapsed&&(i=this.dom.getRoot(),o.setStart(i,0),o.setEnd(i,0)),this.selectedRange&&this.explicitRange&&(0===o.compareBoundaryPoints(o.START_TO_START,this.selectedRange)&&0===o.compareBoundaryPoints(o.END_TO_END,this.selectedRange)?o=this.explicitRange:(this.selectedRange=null,this.explicitRange=null)),o},setRng:function(e,t){var n,o=this;if(o.tridentSel){if(e.cloneRange)try{return void o.tridentSel.addRange(e)}catch(e){}try{e.select()}catch(e){}}else if(n=o.getSel()){o.explicitRange=e;try{n.removeAllRanges()}catch(e){}n.addRange(e),!1===t&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),o.selectedRange=n.rangeCount>0?n.getRangeAt(0):null}},setNode:function(e){return this.setContent(this.dom.getOuterHTML(e)),e},getNode:function(){var e,t=this,n=t.getRng(),o=(t.getSel(),n.startContainer),i=n.endContainer;function r(e,t){for(var n=e;e&&3===e.nodeType&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n}return n?n.setStart?(e=n.commonAncestorContainer,!n.collapsed&&(n.startContainer==n.endContainer&&n.endOffset-n.startOffset<2&&n.startContainer.hasChildNodes()&&(e=n.startContainer.childNodes[n.startOffset]),3===o.nodeType&&3===i.nodeType&&(o=o.length===n.startOffset?r(o.nextSibling,!0):o.parentNode,i=0===n.endOffset?r(i.previousSibling,!1):i.parentNode,o&&o===i))?o:e&&3==e.nodeType?e.parentNode:e):n.item?n.item(0):n.parentElement():t.dom.getRoot()},getSelectedBlocks:function(e,t){var n,o,r,a=this,s=a.dom,c=[];if(n=s.getParent(e||a.getStart(),s.isBlock),o=s.getParent(t||a.getEnd(),s.isBlock),n&&c.push(n),n&&o&&n!=o){r=n;for(var l=new i(n,s.getRoot());(r=l.next())&&r!=o;)s.isBlock(r)&&c.push(r)}return o&&n!=o&&c.push(o),c},isForward:function(){var e,t,n=this.dom,o=this.getSel();return!o||null==o.anchorNode||null==o.focusNode||((e=n.createRng()).setStart(o.anchorNode,o.anchorOffset),e.collapse(!0),(t=n.createRng()).setStart(o.focusNode,o.focusOffset),t.collapse(!0),e.compareBoundaryPoints(e.START_TO_START,t)<=0)},normalize:function(){var t,n,o,r=this;function a(e){var a,s,c,l,d,u=r.dom,f=u.getRoot();function p(e,t){for(var n=new i(e,u.getParent(e.parentNode,u.isBlock)||f);e=n[t?"prev":"next"]();)if("BR"===e.nodeName)return!0}function m(e,t){var r,c;for(r=new i(t=t||a,u.getParent(t.parentNode,u.isBlock)||f);l=r[e?"prev":"next"]();){if(3===l.nodeType&&l.nodeValue.length>0)return a=l,s=e?l.nodeValue.length:0,void(n=!0);if(u.isBlock(l)||d[l.nodeName.toLowerCase()])return;c=l}o&&c&&(a=c,n=!0,s=0)}if(a=t[(e?"start":"end")+"Container"],s=t[(e?"start":"end")+"Offset"],d=u.schema.getNonEmptyElements(),9===a.nodeType&&(a=u.getRoot(),s=0),a===f){if(e&&(l=a.childNodes[s>0?s-1:0])&&(l.nodeName.toLowerCase(),d[l.nodeName]||"TABLE"==l.nodeName))return;if(a.hasChildNodes()&&(a=a.childNodes[Math.min(!e&&s>0?s-1:s,a.childNodes.length-1)],s=0,a.hasChildNodes()&&!/TABLE/.test(a.nodeName))){l=a,c=new i(a,f);do{if(3===l.nodeType&&l.nodeValue.length>0){s=e?0:l.nodeValue.length,a=l,n=!0;break}if(d[l.nodeName.toLowerCase()]){s=u.nodeIndex(l),a=l.parentNode,"IMG"!=l.nodeName||e||s++,n=!0;break}}while(l=e?c.next():c.prev())}}o&&(3===a.nodeType&&0===s&&m(!0),1===a.nodeType&&(!(l=a.childNodes[s])||"BR"!==l.nodeName||p(l)||p(l,!0)||m(!0,a.childNodes[s]))),e&&!o&&3===a.nodeType&&s===a.nodeValue.length&&m(!1),n&&t["set"+(e?"Start":"End")](a,s)}e.isIE||(t=r.getRng(),o=t.collapsed,a(!0),o||a(),n&&(o&&t.collapse(!0),r.setRng(t,r.isForward())))},selectorChanged:function(e,t){var n,i=this;return i.selectorChangedData||(i.selectorChangedData={},n={},i.editor.onNodeChange.addToTop((function(e,t,r){var a=i.dom,s=a.getParents(r,null,a.getRoot()),c={};o(i.selectorChangedData,(function(e,t){o(s,(function(i){if(a.is(i,t))return n[t]||(o(e,(function(e){e(!0,{node:i,selector:t,parents:s})})),n[t]=e),c[t]=e,!1}))})),o(n,(function(e,t){c[t]||(delete n[t],o(e,(function(e){e(!1,{node:r,selector:t,parents:s})})))}))}))),i.selectorChangedData[e]||(i.selectorChangedData[e]=[]),i.selectorChangedData[e].push(t),i},scrollIntoView:function(e){var t,n,o=this.dom;n=o.getViewPort(this.editor.getWin()),((t=o.getPos(e).y)<n.y||t+25>n.y+n.h)&&this.editor.getWin().scrollTo(0,t<n.y?t:t-n.h+25)},destroy:function(t){this.win=null,t||e.removeUnload(this.destroy)},_fixIESelection:function(){var e,t,n,o=this.dom,i=o.doc,r=i.body;function a(e,t){var n=r.createTextRange();try{n.moveToPoint(e,t)}catch(e){n=null}return n}function s(e){var n;e.button?(n=a(e.x,e.y))&&(n.compareEndPoints("StartToStart",t)>0?n.setEndPoint("StartToStart",t):n.setEndPoint("EndToEnd",t),n.select()):c()}function c(){var n=i.selection.createRange();t&&!n.item&&0===n.compareEndPoints("StartToEnd",n)&&t.select(),o.unbind(i,"mouseup",c),o.unbind(i,"mousemove",s),t=e=0}i.documentElement.unselectable=!0,o.bind(i,["mousedown","contextmenu"],(function(r){if("HTML"===r.target.nodeName){if(e&&c(),(n=i.documentElement).scrollHeight>n.clientHeight)return;e=1,(t=a(r.x,r.y))&&(o.bind(i,"mouseup",c),o.bind(i,"mousemove",s),o.win.focus(),t.select())}}))}})}(tinymce),function(e){e.dom.Serializer=function(t,n,o){var i,r,a,s=e.isIE,c=e.each;return t.apply_source_formatting||(t.indent=!1),n=n||e.DOM,o=o||new e.html.Schema(t),t.entity_encoding=t.entity_encoding||"named",t.remove_trailing_brs=!("remove_trailing_brs"in t)||t.remove_trailing_brs,i=new e.util.Dispatcher(self),r=new e.util.Dispatcher(self),(a=new e.html.DomParser(t,o)).addAttributeFilter("src,href,style",(function(e,o){for(var i,r,a=e.length,s="data-mce-"+o,c=t.url_converter,l=t.url_converter_scope;a--;)void 0!==(r=(i=e[a]).attributes.map[s])?(i.attr(o,r.length>0?r:null),i.attr(s,null)):(r=i.attributes.map[o],"style"===o?r=n.serializeStyle(n.parseStyle(r),i.name):c&&(r=c.call(l,r,o,i.name)),i.attr(o,r.length>0?r:null)),"style"==o&&"p"!=i.name&&((r=i.attributes.map[o])&&(r=(r=(r=r.replace(/font\-size\s*\:.+?\;|$/gi,"")).replace(/line\-height\s*\:.+?\;|$/gi,"")).replace(/^\s+|\s+$/g,"")),i.attr(o,r&&r.length>0?r:null))})),a.addAttributeFilter("class",(function(e,t){for(var n,o,i=e.length;i--;)o=(n=e[i]).attr("class").replace(/(?:^|\s)mce(Item\w+|Selected)(?!\S)/g,""),n.attr("class",o.length>0?o:null)})),a.addAttributeFilter("data-mce-type",(function(e,t,n){for(var o,i=e.length;i--;)"bookmark"!==(o=e[i]).attributes.map["data-mce-type"]||n.cleanup||o.remove()})),a.addAttributeFilter("data-mce-expando",(function(e,t,n){for(var o=e.length;o--;)e[o].attr(t,null)})),a.addNodeFilter("noscript",(function(t){for(var n,o=t.length;o--;)(n=t[o].firstChild)&&(n.value=e.html.Entities.decode(n.value))})),a.addNodeFilter("script,style",(function(e,t){var n,o,i=e.length;function r(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}for(;i--;)o=(n=e[i]).firstChild?n.firstChild.value:"","script"===t?(n.attr("type",(n.attr("type")||"text/javascript").replace(/^mce\-/,"")),o.length>0&&(n.firstChild.value="// <![CDATA[\n"+r(o)+"\n// ]]>")):o.length>0&&(n.firstChild.value="\x3c!--\n"+r(o)+"\n--\x3e")})),a.addNodeFilter("#comment",(function(e,t){for(var n,o=e.length;o--;)0===(n=e[o]).value.indexOf("[CDATA[")?(n.name="#cdata",n.type=4,n.value=n.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===n.value.indexOf("mce:protected ")&&(n.name="#text",n.type=3,n.raw=!0,n.value=unescape(n.value).substr(14))})),a.addNodeFilter("xml:namespace,input",(function(e,t){for(var n,o=e.length;o--;)7===(n=e[o]).type?n.remove():1===n.type&&("input"!==t||"type"in n.attributes.map||n.attr("type","text"))})),t.fix_list_elements&&a.addNodeFilter("ul,ol",(function(e,t){for(var n,o,i=e.length;i--;)"ul"!==(o=(n=e[i]).parent).name&&"ol"!==o.name||n.prev&&"li"===n.prev.name&&n.prev.append(n)})),a.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",(function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)})),{schema:o,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,onPreProcess:i,onPostProcess:r,serialize:function(l,d){var u,f,p,m,h;return s&&n.select("script,style,select,map").length>0?(h=l.innerHTML,l=l.cloneNode(!1),n.setHTML(l,h)):l=l.cloneNode(!0),(u=l.ownerDocument.implementation).createHTMLDocument&&(f=u.createHTMLDocument(""),c("BODY"==l.nodeName?l.childNodes:[l],(function(e){f.body.appendChild(f.importNode(e,!0))})),l="BODY"!=l.nodeName?f.body.firstChild:f.body,p=n.doc,n.doc=f),(d=d||{}).format=d.format||"html",d.no_events||(d.node=l,i.dispatch(self,d)),m=new e.html.Serializer(t,o),d.content=m.serialize(a.parse(e.trim(d.getInner?l.innerHTML:n.getOuterHTML(l)),d)),d.cleanup||(d.content=d.content.replace(/\uFEFF/g,"")),d.no_events||r.dispatch(self,d),p&&(n.doc=p),d.node=null,d.content},addRules:function(e){o.addValidElements(e)},setRules:function(e){o.setValidElements(e)}}}}(tinymce),function(e){e.dom.ScriptLoader=function(t){var n={},o=[],i={},r=[],a=0;this.isDone=function(e){return 2==n[e]},this.markDone=function(e){n[e]=2},this.add=this.load=function(e,t,r){null==n[e]&&(o.push(e),n[e]=0),t&&(i[e]||(i[e]=[]),i[e].push({func:t,scope:r||this}))},this.loadQueue=function(e,t){this.loadScripts(o,e,t)},this.loadScripts=function(t,o,s){var c;function l(t){e.each(i[t],(function(e){e.func.call(e.scope)})),i[t]=void 0}r.push({func:o,scope:s||this}),(c=function(){var o=e.grep(t);t.length=0,e.each(o,(function(t){2!=n[t]?1!=n[t]&&(n[t]=1,a++,function(t,n){var o,i,r,a,s=e.DOM;function c(){s.remove(a),o&&(o.onreadystatechange=o.onload=o=null),n()}function l(){"undefined"!=typeof console&&console.log&&console.log("Failed to load: "+t)}if(a=s.uniqueId(),e.isIE6&&(i=new e.util.URI(t),r=location,i.host==r.hostname&&i.port==r.port&&i.protocol+":"==r.protocol&&"file"!=i.protocol.toLowerCase()))e.util.XHR.send({url:e._addVer(i.getURI()),success:function(e){var t=s.create("script",{type:"text/javascript"});t.text=e,document.getElementsByTagName("head")[0].appendChild(t),s.remove(t),c()},error:l});else if(dynamicImport){var d;switch(t){case"./themes/simple/editor_template.js":d=__webpack_require__.e(16).then(__webpack_require__.t.bind(null,"gH4M",7));break;case"./plugins/paste/editor_plugin.js":d=__webpack_require__.e(15).then(__webpack_require__.t.bind(null,"ftdR",7))}d&&d.then((function(e){c()}))}else(o=document.createElement("script")).id=a,o.type="text/javascript",o.src=e._addVer(t),e.isIE&&!e.isIE11||(o.onload=c),o.onerror=l,e.isOpera||(o.onreadystatechange=function(){var e=o.readyState;"complete"!=e&&"loaded"!=e||c()}),(document.getElementsByTagName("head")[0]||document.body).appendChild(o)}(t,(function(){n[t]=2,a--,l(t),c()}))):l(t)})),a||(e.each(r,(function(e){e.func.call(e.scope)})),r.length=0)})()}},e.ScriptLoader=new e.dom.ScriptLoader}(tinymce),function(e){e.dom.RangeUtils=function(t){this.walk=function(n,o){var i,r,a,s,c,l,d,u=n.startContainer,f=n.startOffset,p=n.endContainer,m=n.endOffset;if((d=t.select("td.mceSelected,th.mceSelected")).length>0)e.each(d,(function(e){o([e])}));else{if(1==u.nodeType&&u.hasChildNodes()&&(u=u.childNodes[f]),1==p.nodeType&&p.hasChildNodes()&&(p=p.childNodes[Math.min(m-1,p.childNodes.length-1)]),u==p)return o(h([u]));for(i=t.findCommonAncestor(u,p),s=u;s;s=s.parentNode){if(s===p)return y(u,i,!0);if(s===i)break}for(s=p;s;s=s.parentNode){if(s===u)return y(p,i);if(s===i)break}r=v(u,i)||u,a=v(p,i)||p,y(u,r,!0),(l=g(r==u?r:r.nextSibling,"nextSibling",a==p?a.nextSibling:a)).length&&o(h(l)),y(p,a)}function h(e){var t;return 3===(t=e[0]).nodeType&&t===u&&f>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===m&&e.length>0&&t===p&&3===t.nodeType&&e.splice(e.length-1,1),e}function g(e,t,n){for(var o=[];e&&e!=n;e=e[t])o.push(e);return o}function v(e,t){do{if(e.parentNode==t)return e;e=e.parentNode}while(e)}function y(e,t,n){var i=n?"nextSibling":"previousSibling";for(c=(s=e).parentNode;s&&s!=t;s=c)c=s.parentNode,(l=g(s==e?s:s[i],i)).length&&(n||l.reverse(),o(h(l)))}},this.split=function(e){var t=e.startContainer,n=e.startOffset,o=e.endContainer,i=e.endOffset;function r(e,t){return e.splitText(t)}return t==o&&3==t.nodeType?n>0&&n<t.nodeValue.length&&(t=(o=r(t,n)).previousSibling,i>n?(t=o=r(o,i-=n).previousSibling,i=o.nodeValue.length,n=0):i=0):(3==t.nodeType&&n>0&&n<t.nodeValue.length&&(t=r(t,n),n=0),3==o.nodeType&&i>0&&i<o.nodeValue.length&&(i=(o=r(o,i).previousSibling).nodeValue.length)),{startContainer:t,startOffset:n,endContainer:o,endOffset:i}}},e.dom.RangeUtils.compareRanges=function(e,t){if(e&&t){if(!e.item&&!e.duplicate)return e.startContainer==t.startContainer&&e.startOffset==t.startOffset;if(e.item&&t.item&&e.item(0)===t.item(0))return!0;if(e.isEqual&&t.isEqual&&t.isEqual(e))return!0}return!1}}(tinymce),function(e){var t=e.dom.Event,n=e.each;e.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(o,i){var r,a,s,c,l,d=this,u=o.root,f=o.items,p=o.enableUpDown,m=o.enableLeftRight||!o.enableUpDown,h=o.excludeFromTabOrder;i=i||e.DOM,r=function(e){l=e.target.id},a=function(e){i.setAttrib(e.target.id,"tabindex","-1")},c=function(e){var t=i.get(l);i.setAttrib(t,"tabindex","0"),t.focus()},d.focus=function(){i.get(l).focus()},d.destroy=function(){n(f,(function(e){var t=i.get(e.id);i.unbind(t,"focus",r),i.unbind(t,"blur",a)}));var e=i.get(u);i.unbind(e,"focus",c),i.unbind(e,"keydown",s),f=i=u=d.focus=r=a=s=c=null,d.destroy=function(){}},d.moveFocus=function(e,r){var a,s=-1;d.controls;l&&(n(f,(function(e,t){if(e.id===l)return s=t,!1})),(s+=e)<0?s=f.length-1:s>=f.length&&(s=0),a=f[s],i.setAttrib(l,"tabindex","-1"),i.setAttrib(a.id,"tabindex","0"),i.get(a.id).focus(),o.actOnFocus&&o.onAction(a.id),r&&t.cancel(r))},s=function(e){switch(e.keyCode){case 37:m&&d.moveFocus(-1),t.cancel(e);break;case 39:m&&d.moveFocus(1),t.cancel(e);break;case 38:p&&d.moveFocus(-1),t.cancel(e);break;case 40:p&&d.moveFocus(1),t.cancel(e);break;case 27:o.onCancel&&(o.onCancel(),t.cancel(e));break;case 14:case 13:case 32:o.onAction&&(o.onAction(l),t.cancel(e))}},n(f,(function(e,t){var n,o;e.id||(e.id=i.uniqueId("_mce_item_")),o=i.get(e.id),h?(i.bind(o,"blur",a),n="-1"):n=0===t?"0":"-1",o.setAttribute("tabindex",n),i.bind(o,"focus",r)})),f[0]&&(l=f[0].id),i.setAttrib(u,"tabindex","-1");var g=i.get(u);i.bind(g,"focus",c),i.bind(g,"keydown",s)}})}(tinymce),function(e){var t=e.DOM,n=e.is;e.create("tinymce.ui.Control",{Control:function(t,n,o){this.id=t,this.settings=n=n||{},this.rendered=!1,this.onRender=new e.util.Dispatcher(this),this.classPrefix="",this.scope=n.scope||this,this.disabled=0,this.active=0,this.editor=o},setAriaProperty:function(e,n){var o=t.get(this.id+"_aria")||t.get(this.id);o&&t.setAttrib(o,"aria-"+e,!!n)},focus:function(){t.get(this.id).focus()},setDisabled:function(e){e!=this.disabled&&(this.setAriaProperty("disabled",e),this.setState("Disabled",e),this.setState("Enabled",!e),this.disabled=e)},isDisabled:function(){return this.disabled},setActive:function(e){e!=this.active&&(this.setState("Active",e),this.active=e,this.setAriaProperty("pressed",e))},isActive:function(){return this.active},setState:function(e,n){var o=t.get(this.id);e=this.classPrefix+e,n?t.addClass(o,e):t.removeClass(o,e)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(e){t.setHTML(e,this.renderHTML())},postRender:function(){var e,t=this;n(t.disabled)&&(e=t.disabled,t.disabled=-1,t.setDisabled(e)),n(t.active)&&(e=t.active,t.active=-1,t.setActive(e))},remove:function(){t.remove(this.id),this.destroy()},destroy:function(){e.dom.Event.clear(this.id)}})}(tinymce),tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(e,t,n){this.parent(e,t,n),this.controls=[],this.lookup={}},add:function(e){return this.lookup[e.id]=e,this.controls.push(e),e},get:function(e){return this.lookup[e]}}),tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(e,t){this.parent(e,t),this.classPrefix="mceSeparator",this.setDisabled(!0)},renderHTML:function(){return tinymce.DOM.createHTML("span",{class:this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}}),function(e){var t=e.is;e.DOM,e.each,e.walk;e.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(e,t){this.parent(e,t),this.classPrefix="mceMenuItem"},setSelected:function(e){this.setState("Selected",e),this.setAriaProperty("checked",!!e),this.selected=e},isSelected:function(){return this.selected},postRender:function(){var e=this;e.parent(),t(e.selected)&&e.setSelected(e.selected)}})}(tinymce),function(e){e.is;var t=e.DOM,n=(e.each,e.walk);e.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(t,n){var o=this;o.parent(t,n),o.items={},o.collapsed=!1,o.menuCount=0,o.onAddItem=new e.util.Dispatcher(this)},expand:function(e){var t=this;e&&n(t,(function(e){e.expand&&e.expand()}),"items",t),t.collapsed=!1},collapse:function(e){var t=this;e&&n(t,(function(e){e.collapse&&e.collapse()}),"items",t),t.collapsed=!0},isCollapsed:function(){return this.collapsed},add:function(n){return n.settings||(n=new e.ui.MenuItem(n.id||t.uniqueId(),n)),this.onAddItem.dispatch(this,n),this.items[n.id]=n},addSeparator:function(){return this.add({separator:!0})},addMenu:function(e){return e.collapse||(e=this.createMenu(e)),this.menuCount++,this.add(e)},hasMenus:function(){return 0!==this.menuCount},remove:function(e){delete this.items[e.id]},removeAll:function(){var e=this;n(e,(function(e){e.removeAll?e.removeAll():e.remove(),e.destroy()}),"items",e),e.items={}},createMenu:function(n){var o=new e.ui.Menu(n.id||t.uniqueId(),n);return o.onAddItem.add(this.onAddItem.dispatch,this.onAddItem),o}})}(tinymce),function(e){var t=e.is,n=e.DOM,o=e.each,i=e.dom.Event,r=e.dom.Element;e.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(o,i){(i=i||{}).container=i.container||n.doc.body,i.offset_x=i.offset_x||0,i.offset_y=i.offset_y||0,i.vp_offset_x=i.vp_offset_x||0,i.vp_offset_y=i.vp_offset_y||0,t(i.icons)&&!i.icons&&(i.class+=" mceNoIcons"),this.parent(o,i),this.onShowMenu=new e.util.Dispatcher(this),this.onHideMenu=new e.util.Dispatcher(this),this.classPrefix="mceMenu"},createMenu:function(t){var o,i=this,r=i.settings;return t.container=t.container||r.container,t.parent=i,t.constrain=t.constrain||r.constrain,t.class=t.class||r.class,t.vp_offset_x=t.vp_offset_x||r.vp_offset_x,t.vp_offset_y=t.vp_offset_y||r.vp_offset_y,t.keyboard_focus=r.keyboard_focus,(o=new e.ui.DropMenu(t.id||n.uniqueId(),t)).onAddItem.add(i.onAddItem.dispatch,i.onAddItem),o},focus:function(){this.keyboardNav&&this.keyboardNav.focus()},update:function(){var e,t,o=this,i=o.settings,r=n.get("menu_"+o.id+"_tbl"),a=n.get("menu_"+o.id+"_co");e=i.max_width?Math.min(r.offsetWidth,i.max_width):r.offsetWidth,t=i.max_height?Math.min(r.offsetHeight,i.max_height):r.offsetHeight,n.boxModel?o.element.setStyles({width:e,height:t}):o.element.setStyles({width:e+2,height:t+2}),i.max_width&&n.setStyle(a,"width",e),i.max_height&&(n.setStyle(a,"height",t),r.clientHeight<i.max_height&&n.setStyle(a,"overflow","hidden"))},showMenu:function(t,a,s){var c,l,d,u,f,p,m=this,h=m.settings,g=n.getViewPort(),v=m.classPrefix;m.collapse(1),m.isMenuVisible||(m.rendered?c=n.get("menu_"+m.id):(c=n.add(m.settings.container,m.renderNode()),o(m.items,(function(e){e.postRender()})),m.element=new r("menu_"+m.id,{blocker:1,container:h.container})),e.isOpera||n.setStyles(c,{left:-65535,top:-65535}),n.show(c),m.update(),t+=h.offset_x||0,a+=h.offset_y||0,g.w-=4,g.h-=4,h.constrain&&(l=c.clientWidth-2,d=c.clientHeight-2,u=g.x+g.w,f=g.y+g.h,t+h.vp_offset_x+l>u&&(t=s?s-l:Math.max(0,u-h.vp_offset_x-l)),a+h.vp_offset_y+d>f&&(a=Math.max(0,f-h.vp_offset_y-d))),n.setStyles(c,{left:t,top:a}),m.element.update(),m.isMenuVisible=1,m.mouseClickFunc=i.add(c,"click",(function(e){var t;if((e=e.target)&&(e=n.getParent(e,"tr"))&&!n.hasClass(e,v+"ItemSub")){if((t=m.items[e.id]).isDisabled())return;for(p=m;p;)p.hideMenu&&p.hideMenu(),p=p.settings.parent;return t.settings.onclick&&t.settings.onclick(e),!1}})),m.hasMenus()&&(m.mouseOverFunc=i.add(c,"mouseover",(function(e){var t,o;if((e=e.target)&&(e=n.getParent(e,"tr"))){if(t=m.items[e.id],m.lastMenu&&m.lastMenu.collapse(1),t.isDisabled())return;e&&n.hasClass(e,v+"ItemSub")&&(o=n.getRect(e),t.showMenu(o.x+o.w-2,o.y-2,o.x),m.lastMenu=t,n.addClass(n.get(t.id).firstChild,v+"ItemActive"))}}))),i.add(c,"keydown",m._keyHandler,m),m.onShowMenu.dispatch(m),h.keyboard_focus&&m._setupKeyboardNav())},hideMenu:function(e){var t,o=this,r=n.get("menu_"+o.id);o.isMenuVisible&&(o.keyboardNav&&o.keyboardNav.destroy(),i.remove(r,"mouseover",o.mouseOverFunc),i.remove(r,"click",o.mouseClickFunc),i.remove(r,"keydown",o._keyHandler),n.hide(r),o.isMenuVisible=0,e||o.collapse(1),o.element&&o.element.hide(),(t=n.get(o.id))&&n.removeClass(t.firstChild,o.classPrefix+"ItemActive"),o.onHideMenu.dispatch(o))},add:function(e){var t,o=this;return e=o.parent(e),o.isRendered&&(t=n.get("menu_"+o.id))&&o._add(n.select("tbody",t)[0],e),e},collapse:function(e){this.parent(e),this.hideMenu(1)},remove:function(e){return n.remove(e.id),this.destroy(),this.parent(e)},destroy:function(){var e=this,t=n.get("menu_"+e.id);e.keyboardNav&&e.keyboardNav.destroy(),i.remove(t,"mouseover",e.mouseOverFunc),i.remove(n.select("a",t),"focus",e.mouseOverFunc),i.remove(t,"click",e.mouseClickFunc),i.remove(t,"keydown",e._keyHandler),e.element&&e.element.remove(),n.remove(t)},renderNode:function(){var e,t,i,a,s=this,c=s.settings;return a=n.create("div",{role:"listbox",id:"menu_"+s.id,class:c.class,style:"position:absolute;left:0;top:0;z-index:200000;outline:0"}),s.settings.parent&&n.setAttrib(a,"aria-parent","menu_"+s.settings.parent.id),i=n.add(a,"div",{role:"presentation",id:"menu_"+s.id+"_co",class:s.classPrefix+(c.class?" "+c.class:"")}),s.element=new r("menu_"+s.id,{blocker:1,container:c.container}),c.menu_line&&n.add(i,"span",{class:s.classPrefix+"Line"}),e=n.add(i,"table",{role:"presentation",id:"menu_"+s.id+"_tbl",border:0,cellPadding:0,cellSpacing:0}),t=n.add(e,"tbody"),o(s.items,(function(e){s._add(t,e)})),s.rendered=!0,a},_setupKeyboardNav:function(){var t,o,i=this;t=n.get("menu_"+i.id),(o=n.select("a[role=option]","menu_"+i.id)).splice(0,0,t),i.keyboardNav=new e.ui.KeyboardNavigation({root:"menu_"+i.id,items:o,onCancel:function(){i.hideMenu()},enableUpDown:!0}),t.focus()},_keyHandler:function(e){var t=this;switch(e.keyCode){case 37:t.settings.parent&&(t.hideMenu(),t.settings.parent.focus(),i.cancel(e));break;case 39:t.mouseOverFunc&&t.mouseOverFunc(e)}},_add:function(e,t){var o,i,r,a,s,c=t.settings,l=this.classPrefix;if(c.separator)return r=n.add(e,"tr",{id:t.id,class:l+"ItemSeparator"}),n.add(r,"td",{class:l+"ItemSeparator"}),void((o=r.previousSibling)&&n.addClass(o,"mceLast"));o=r=n.add(e,"tr",{id:t.id,class:l+"Item "+l+"ItemEnabled"}),o=a=n.add(o,c.titleItem?"th":"td"),o=i=n.add(o,"a",{id:t.id+"_aria",role:c.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"}),c.parent&&(n.setAttrib(i,"aria-haspopup","true"),n.setAttrib(i,"aria-owns","menu_"+t.id)),n.addClass(a,c.class),s=n.add(o,"span",{class:"mceIcon"+(c.icon?" mce_"+c.icon:"")}),c.icon_src&&n.add(s,"img",{src:c.icon_src}),o=n.add(o,c.element||"span",{class:"mceText",title:t.settings.title},t.settings.title),t.settings.style&&("function"==typeof t.settings.style&&(t.settings.style=t.settings.style()),n.setAttrib(o,"style",t.settings.style)),1==e.childNodes.length&&n.addClass(r,"mceFirst"),(o=r.previousSibling)&&n.hasClass(o,l+"ItemSeparator")&&n.addClass(r,"mceFirst"),t.collapse&&n.addClass(r,l+"ItemSub"),(o=r.previousSibling)&&n.removeClass(o,"mceLast"),n.addClass(r,"mceLast")}})}(tinymce),function(e){var t=e.DOM;e.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(e,t,n){this.parent(e,t,n),this.classPrefix="mceButton"},renderHTML:function(){var e,n,o=this.classPrefix,i=this.settings;return n=t.encode(i.label||""),e='<a role="button" id="'+this.id+'" href="javascript:;" class="'+o+" "+o+"Enabled "+i.class+(n?" "+o+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+t.encode(i.title)+'">',!i.image||this.editor&&this.editor.forcedHighContrastMode?e+='<span class="mceIcon '+i.class+'"></span>'+(n?'<span class="'+o+'Label">'+n+"</span>":""):e+='<span class="mceIcon '+i.class+'"><img class="mceIcon" src="'+i.image+'" alt="'+t.encode(i.title)+'" /></span>'+(n?'<span class="'+o+'Label">'+n+"</span>":""),e+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+i.title+"</span>",e+="</a>"},postRender:function(){var t,n=this,o=n.settings;e.isIE&&n.editor&&e.dom.Event.add(n.id,"mousedown",(function(e){var o=n.editor.selection.getNode().nodeName;t="IMG"===o?n.editor.selection.getBookmark():null})),e.dom.Event.add(n.id,"click",(function(i){if(!n.isDisabled())return e.isIE&&n.editor&&null!==t&&n.editor.selection.moveToBookmark(t),o.onclick.call(o.scope,i)})),e.dom.Event.add(n.id,"keydown",(function(t){if(!n.isDisabled()&&t.keyCode==e.VK.SPACEBAR)return e.dom.Event.cancel(t),o.onclick.call(o.scope,t)}))}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,o=e.each,i=e.util.Dispatcher;e.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(t,n,o){var r=this;r.parent(t,n,o),r.items=[],r.onChange=new i(r),r.onPostRender=new i(r),r.onAdd=new i(r),r.onRenderMenu=new e.util.Dispatcher(this),r.classPrefix="mceListBox",r.marked={}},select:function(e){var t,n,i=this;if(i.marked={},null==e)return i.selectByIndex(-1);n=e&&"function"==typeof e?e:function(t){return t==e},e!=i.selectedValue&&(o(i.items,(function(e,o){if(n(e.value))return t=1,i.selectByIndex(o),!1})),t||i.selectByIndex(-1))},selectByIndex:function(e){var n,o,i,r=this;r.marked={},e!=r.selectedIndex&&(n=t.get(r.id+"_text"),i=t.get(r.id+"_voiceDesc"),(o=r.items[e])?(r.selectedValue=o.value,r.selectedIndex=e,t.setHTML(n,t.encode(o.title)),t.setHTML(i,r.settings.title+" - "+o.title),t.removeClass(n,"mceTitle"),t.setAttrib(r.id,"aria-valuenow",o.title)):(t.setHTML(n,t.encode(r.settings.title)),t.setHTML(i,t.encode(r.settings.title)),t.addClass(n,"mceTitle"),r.selectedValue=r.selectedIndex=null,t.setAttrib(r.id,"aria-valuenow",r.settings.title)),n=0)},mark:function(e){this.marked[e]=!0},add:function(t,n,o){var i=this;o=o||{},o=e.extend(o,{title:t,value:n}),i.items.push(o),i.onAdd.dispatch(i,o)},getLength:function(){return this.items.length},renderHTML:function(){var e="",n=this,o=n.settings,i=n.classPrefix;return e='<span role="listbox" aria-haspopup="true" aria-labelledby="'+n.id+'_voiceDesc" aria-describedby="'+n.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+n.id+'" cellpadding="0" cellspacing="0" class="'+i+" "+i+"Enabled"+(o.class?" "+o.class:"")+'"><tbody><tr>',e+="<td>"+t.createHTML("span",{id:n.id+"_voiceDesc",class:"voiceLabel",style:"display:none;"},n.settings.title),e+=t.createHTML("a",{id:n.id+"_text",tabindex:-1,href:"javascript:;",class:"mceText",onclick:"return false;",onmousedown:"return false;"},t.encode(n.settings.title))+"</td>",e+="<td>"+t.createHTML("a",{id:n.id+"_open",tabindex:-1,href:"javascript:;",class:"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span></span>')+"</td>",e+="</tr></tbody></table></span>"},showMenu:function(){var i,r,a=this,s=t.get(this.id);if(!a.isDisabled()&&0!==a.items.length){if(a.menu&&a.menu.isMenuVisible)return a.hideMenu();a.isMenuRendered||(a.renderMenu(),a.isMenuRendered=!0),i=t.getPos(s),(r=a.menu).settings.offset_x=i.x,r.settings.offset_y=i.y,r.settings.keyboard_focus=!e.isOpera,o(a.items,(function(e){r.items[e.id]&&r.items[e.id].setSelected(0)})),o(a.items,(function(e){r.items[e.id]&&a.marked[e.value]&&r.items[e.id].setSelected(1),e.value===a.selectedValue&&r.items[e.id].setSelected(1)})),r.showMenu(0,s.clientHeight),n.add(t.doc,"mousedown",a.hideMenu,a),t.addClass(a.id,a.classPrefix+"Selected")}},hideMenu:function(e){var o=this;if(o.menu&&o.menu.isMenuVisible){if(t.removeClass(o.id,o.classPrefix+"Selected"),e&&"mousedown"==e.type&&(e.target.id==o.id+"_text"||e.target.id==o.id+"_open"))return;e&&t.getParent(e.target,".mceMenu")||(t.removeClass(o.id,o.classPrefix+"Selected"),n.remove(t.doc,"mousedown",o.hideMenu,o),o.menu.hideMenu())}},renderMenu:function(){var e,n=this;(e=n.settings.control_manager.createDropMenu(n.id+"_menu",{menu_line:1,class:n.classPrefix+"Menu mceNoIcons",max_width:250,max_height:150})).onHideMenu.add((function(){n.hideMenu(),n.focus()})),e.add({title:n.settings.title,class:"mceMenuItemTitle",onclick:function(){!1!==n.settings.onselect("")&&n.select("")}}),o(n.items,(function(o){void 0===o.value?e.add({title:o.title,role:"option",class:"mceMenuItemTitle",onclick:function(){!1!==n.settings.onselect("")&&n.select("")}}):(o.id=t.uniqueId(),o.role="option",o.onclick=function(){!1!==n.settings.onselect(o.value)&&n.select(o.value)},e.add(o))})),n.onRenderMenu.dispatch(n,e),n.menu=e},postRender:function(){var o=this,i=o.classPrefix;n.add(o.id,"click",o.showMenu,o),n.add(o.id,"keydown",(function(e){32==e.keyCode&&(o.showMenu(e),n.cancel(e))})),n.add(o.id,"focus",(function(){o._focused||(o.keyDownHandler=n.add(o.id,"keydown",(function(e){40==e.keyCode&&(o.showMenu(),n.cancel(e))})),o.keyPressHandler=n.add(o.id,"keypress",(function(e){var t;13==e.keyCode&&(t=o.selectedValue,o.selectedValue=null,n.cancel(e),o.settings.onselect(t))}))),o._focused=1})),n.add(o.id,"blur",(function(){n.remove(o.id,"keydown",o.keyDownHandler),n.remove(o.id,"keypress",o.keyPressHandler),o._focused=0})),!e.isIE6&&t.boxModel||(n.add(o.id,"mouseover",(function(){t.hasClass(o.id,i+"Disabled")||t.addClass(o.id,i+"Hover")})),n.add(o.id,"mouseout",(function(){t.hasClass(o.id,i+"Disabled")||t.removeClass(o.id,i+"Hover")}))),o.onPostRender.dispatch(o,t.get(o.id))},destroy:function(){this.parent(),n.clear(this.id+"_text"),n.clear(this.id+"_open")}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,o=e.each;e.util.Dispatcher;e.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(e,t){this.parent(e,t),this.classPrefix="mceNativeListBox"},setDisabled:function(e){t.get(this.id).disabled=e,this.setAriaProperty("disabled",e)},isDisabled:function(){return t.get(this.id).disabled},select:function(e){var t,n,i=this;if(null==e)return i.selectByIndex(-1);n=e&&"function"==typeof e?e:function(t){return t==e},e!=i.selectedValue&&(o(i.items,(function(e,o){if(n(e.value))return t=1,i.selectByIndex(o),!1})),t||i.selectByIndex(-1))},selectByIndex:function(e){t.get(this.id).selectedIndex=e+1,this.selectedValue=this.items[e]?this.items[e].value:null},add:function(e,n,o){var i,r=this;(o=o||{}).value=n,r.isRendered()&&t.add(t.get(this.id),"option",o,e),i={title:e,value:n,attribs:o},r.items.push(i),r.onAdd.dispatch(r,i)},getLength:function(){return this.items.length},renderHTML:function(){var e,n=this;return e=t.createHTML("option",{value:""},"-- "+n.settings.title+" --"),o(n.items,(function(n){e+=t.createHTML("option",{value:n.value},n.title)})),e=t.createHTML("select",{id:n.id,class:"mceNativeListBox","aria-labelledby":n.id+"_aria"},e),e+=t.createHTML("span",{id:n.id+"_aria",style:"display: none"},n.settings.title)},postRender:function(){var e=this,o=!0;function i(t){var n=e.items[t.target.selectedIndex-1];n&&(n=n.value)&&(e.onChange.dispatch(e,n),e.settings.onselect&&e.settings.onselect(n))}e.rendered=!0,n.add(e.id,"change",i),n.add(e.id,"keydown",(function(t){var r;if(n.remove(e.id,"change",void 0),o=!1,r=n.add(e.id,"blur",(function(){o||(o=!0,n.add(e.id,"change",i),n.remove(e.id,"blur",r))})),13==t.keyCode||32==t.keyCode)return i(t),n.cancel(t);40!=t.keyCode&&38!=t.keyCode||t.stopImmediatePropagation()})),e.onPostRender.dispatch(e,t.get(e.id))}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event;e.each;e.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(n,o,i){this.parent(n,o,i),this.onRenderMenu=new e.util.Dispatcher(this),o.menu_container=o.menu_container||t.doc.body},showMenu:function(){var e,o,i=this,r=t.get(i.id);if(!i.isDisabled()){if(i.isMenuRendered||(i.renderMenu(),i.isMenuRendered=!0),i.isMenuVisible)return i.hideMenu();t.getPos(i.settings.menu_container),e=t.getPos(r),(o=i.menu).settings.offset_x=e.x,o.settings.offset_y=e.y,o.settings.vp_offset_x=e.x,o.settings.vp_offset_y=e.y,o.settings.keyboard_focus=i._focused,o.showMenu(0,r.firstChild.clientHeight),n.add(t.doc,"mousedown",i.hideMenu,i),i.setState("Selected",1),i.isMenuVisible=1}},renderMenu:function(){var e,t=this;(e=t.settings.control_manager.createDropMenu(t.id+"_menu",{menu_line:1,class:this.classPrefix+"Menu",icons:t.settings.icons})).onHideMenu.add((function(){t.hideMenu(),t.focus()})),t.onRenderMenu.dispatch(t,e),t.menu=e},hideMenu:function(e){var o=this;e&&"mousedown"==e.type&&t.getParent(e.target,(function(e){return e.id===o.id||e.id===o.id+"_open"}))||(e&&t.getParent(e.target,".mceMenu")||(o.setState("Selected",0),n.remove(t.doc,"mousedown",o.hideMenu,o),o.menu&&o.menu.hideMenu()),o.isMenuVisible=0)},postRender:function(){var e=this,t=e.settings;n.add(e.id,"click",(function(){e.isDisabled()||(t.onclick&&t.onclick(e.value),e.showMenu())}))}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event;e.each;e.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(e,t,n){this.parent(e,t,n),this.classPrefix="mceSplitButton"},renderHTML:function(){var e,n,o=this,i=o.settings;return e="<tbody><tr>",n=i.image?t.createHTML("img ",{src:i.image,role:"presentation",class:"mceAction "+i.class}):t.createHTML("span",{class:"mceAction "+i.class},""),n+=t.createHTML("span",{class:"mceVoiceLabel mceIconOnly",id:o.id+"_voice",style:"display:none;"},i.title),e+="<td >"+t.createHTML("a",{role:"button",id:o.id+"_action",tabindex:"-1",href:"javascript:;",class:"mceAction "+i.class,onclick:"return false;",onmousedown:"return false;",title:i.title},n)+"</td>",n=t.createHTML("span",{class:"mceOpen "+i.class},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span>'),e+="<td >"+t.createHTML("a",{role:"button",id:o.id+"_open",tabindex:"-1",href:"javascript:;",class:"mceOpen "+i.class,onclick:"return false;",onmousedown:"return false;",title:i.title},n)+"</td>",e+="</tr></tbody>",e=t.createHTML("table",{role:"presentation",class:"mceSplitButton mceSplitButtonEnabled "+i.class,cellpadding:"0",cellspacing:"0",title:i.title},e),t.createHTML("div",{id:o.id,role:"button",tabindex:"0","aria-labelledby":o.id+"_voice","aria-haspopup":"true"},e)},postRender:function(){var o,i=this,r=i.settings;r.onclick&&(o=function(e){i.isDisabled()||(r.onclick(i.value),n.cancel(e))},n.add(i.id+"_action","click",o),n.add(i.id,["click","keydown"],(function(e){32!==e.keyCode&&13!==e.keyCode&&14!==e.keyCode||e.altKey||e.ctrlKey||e.metaKey?"click"!==e.type&&40!==e.keyCode||(i.showMenu(),n.cancel(e)):(o(),n.cancel(e))}))),n.add(i.id+"_open","click",(function(e){i.showMenu(),n.cancel(e)})),n.add([i.id,i.id+"_open"],"focus",(function(){i._focused=1})),n.add([i.id,i.id+"_open"],"blur",(function(){i._focused=0})),!e.isIE6&&t.boxModel||(n.add(i.id,"mouseover",(function(){t.hasClass(i.id,"mceSplitButtonDisabled")||t.addClass(i.id,"mceSplitButtonHover")})),n.add(i.id,"mouseout",(function(){t.hasClass(i.id,"mceSplitButtonDisabled")||t.removeClass(i.id,"mceSplitButtonHover")})))},destroy:function(){this.parent(),n.clear(this.id+"_action"),n.clear(this.id+"_open"),n.clear(this.id)}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,o=e.is,i=e.each;e.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(t,n,o){var i=this;i.parent(t,n,o),i.settings=n=e.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},i.settings),i.onShowMenu=new e.util.Dispatcher(i),i.onHideMenu=new e.util.Dispatcher(i),i.value=n.default_color},showMenu:function(){var o,i,r=this;if(!r.isDisabled()){if(r.isMenuRendered||(r.renderMenu(),r.isMenuRendered=!0),r.isMenuVisible)return r.hideMenu();o=t.get(r.id),t.show(r.id+"_menu"),t.addClass(o,"mceSplitButtonSelected"),i=t.getPos(o),t.setStyles(r.id+"_menu",{left:i.x,top:i.y+o.firstChild.clientHeight,zIndex:2e5}),o=0,n.add(t.doc,"mousedown",r.hideMenu,r),r.onShowMenu.dispatch(r),r._focused&&(r._keyHandler=n.add(r.id+"_menu","keydown",(function(e){27==e.keyCode&&r.hideMenu()})),t.select("a",r.id+"_menu")[0].focus()),r.keyboardNav=new e.ui.KeyboardNavigation({root:r.id+"_menu",items:t.select("a",r.id+"_menu"),onCancel:function(){r.hideMenu(),r.focus()}}),r.keyboardNav.focus(),r.isMenuVisible=1}},hideMenu:function(e){var o=this;if(o.isMenuVisible){if(e&&"mousedown"==e.type&&t.getParent(e.target,(function(e){return e.id===o.id+"_open"})))return;e&&t.getParent(e.target,".mceSplitButtonMenu")||(t.removeClass(o.id,"mceSplitButtonSelected"),n.remove(t.doc,"mousedown",o.hideMenu,o),n.remove(o.id+"_menu","keydown",o._keyHandler),t.hide(o.id+"_menu")),o.isMenuVisible=0,o.onHideMenu.dispatch(),o.keyboardNav.destroy()}},renderMenu:function(){var r,a,s,c,l,d,u=this,f=0,p=u.settings;return l=t.add(p.menu_container,"div",{role:"listbox",id:u.id+"_menu",class:p.menu_class+" "+p.class,style:"position:absolute;left:0;top:-1000px;"}),r=t.add(l,"div",{class:p.class+" mceSplitButtonMenu"}),t.add(r,"span",{class:"mceMenuLine"}),a=t.add(r,"table",{role:"presentation",class:"mceColorSplitMenu"}),s=t.add(a,"tbody"),f=0,i(o(p.colors,"array")?p.colors:p.colors.split(","),(function(n){n=n.replace(/^#/,""),f--||(c=t.add(s,"tr"),f=p.grid_width-1),a=t.add(c,"td");var o={href:"javascript:;",style:{backgroundColor:"#"+n},title:u.editor.getLang("colors."+n,n),"data-mce-color":"#"+n};e.isIE||(o.role="option"),a=t.add(a,"a",o),u.editor.forcedHighContrastMode&&((a=t.add(a,"canvas",{width:16,height:16,"aria-hidden":"true"})).getContext&&(d=a.getContext("2d"))?(d.fillStyle="#"+n,d.fillRect(0,0,16,16)):t.remove(a))})),p.more_colors_func&&(a=t.add(s,"tr"),a=t.add(a,"td",{colspan:p.grid_width,class:"mceMoreColors"}),a=t.add(a,"a",{role:"option",id:u.id+"_more",href:"javascript:;",onclick:"return false;",class:"mceMoreColors"},p.more_colors_title),n.add(a,"click",(function(e){return p.more_colors_func.call(p.more_colors_scope||this),n.cancel(e)}))),t.addClass(r,"mceColorSplitMenu"),n.add(u.id+"_menu","mousedown",(function(e){return n.cancel(e)})),n.add(u.id+"_menu","click",(function(e){var n;return(e=t.getParent(e.target,"a",s))&&"a"==e.nodeName.toLowerCase()&&(n=e.getAttribute("data-mce-color"))&&u.setColor(n),!1})),l},setColor:function(e){this.displayColor(e),this.hideMenu(),this.settings.onselect(e)},displayColor:function(e){t.setStyle(this.id+"_preview","backgroundColor",e),this.value=e},postRender:function(){var e=this,n=e.id;e.parent(),t.add(n+"_action","div",{id:n+"_preview",class:"mceColorPreview"}),t.setStyle(e.id+"_preview","backgroundColor",e.value)},destroy:function(){this.parent(),n.clear(this.id+"_menu"),n.clear(this.id+"_more"),t.remove(this.id+"_menu"),this.keyboardNav&&this.keyboardNav.destroy()}})}(tinymce),function(e){var t=e.DOM,n=e.each,o=e.dom.Event;e.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var n=this,o=[],i=n.controls,r=e.each,a=n.settings;return o.push('<div id="'+n.id+'" role="group" aria-labelledby="'+n.id+'_voice">'),o.push("<span role='application'>"),o.push('<span id="'+n.id+'_voice" class="mceVoiceLabel" style="display:none;">'+t.encode(a.name)+"</span>"),r(i,(function(e){o.push(e.renderHTML())})),o.push("</span>"),o.push("</div>"),o.join("")},focus:function(){t.get(this.id).focus()},postRender:function(){var o=this,i=[];n(o.controls,(function(e){n(e.controls,(function(e){e.id&&i.push(e)}))})),o.keyNav=new e.ui.KeyboardNavigation({root:o.id,items:i,onCancel:function(){e.isWebKit&&t.get(o.editor.id+"_ifr").focus(),o.editor.focus()},excludeFromTabOrder:!o.settings.tab_focus_toolbar})},destroy:function(){this.parent(),this.keyNav.destroy(),o.clear(this.id)}})}(tinymce),function(e){var t=e.DOM;e.each;e.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var e,n,o,i,r,a,s=this,c="",l=s.settings;for(a=s.controls,o=0;o<a.length;o++)n=a[o],i=a[o-1],r=a[o+1],0===o&&(e="mceToolbarStart",n.Button?e+=" mceToolbarStartButton":n.SplitButton?e+=" mceToolbarStartSplitButton":n.ListBox&&(e+=" mceToolbarStartListBox"),c+=t.createHTML("td",{class:e},t.createHTML("span",null,"\x3c!-- IE --\x3e"))),i&&n.ListBox&&(i.Button||i.SplitButton)&&(c+=t.createHTML("td",{class:"mceToolbarEnd"},t.createHTML("span",null,"\x3c!-- IE --\x3e"))),t.stdMode?c+='<td style="position: relative">'+n.renderHTML()+"</td>":c+="<td>"+n.renderHTML()+"</td>",r&&n.ListBox&&(r.Button||r.SplitButton)&&(c+=t.createHTML("td",{class:"mceToolbarStart"},t.createHTML("span",null,"\x3c!-- IE --\x3e")));return e="mceToolbarEnd",n.Button?e+=" mceToolbarEndButton":n.SplitButton?e+=" mceToolbarEndSplitButton":n.ListBox&&(e+=" mceToolbarEndListBox"),c+=t.createHTML("td",{class:e},t.createHTML("span",null,"\x3c!-- IE --\x3e")),t.createHTML("table",{id:s.id,class:"mceToolbar"+(l.class?" "+l.class:""),cellpadding:"0",cellspacing:"0",align:s.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+c+"</tr></tbody>")}})}(tinymce),function(e){var t=e.util.Dispatcher;e.each;e.create("tinymce.AddOnManager",{AddOnManager:function(){this.items=[],this.urls={},this.lookup={},this.onAdd=new t(this)},get:function(e){return this.lookup[e]?this.lookup[e].instance:void 0},dependencies:function(e){var t;return this.lookup[e]&&(t=this.lookup[e].dependencies),t||[]},requireLangPack:function(t){var n=e.settings;n&&n.language&&!1!==n.language_load&&e.ScriptLoader.add(this.urls[t]+"/langs/"+n.language+".js")},add:function(e,t,n){return this.items.push(t),this.lookup[e]={instance:t,dependencies:n},this.onAdd.dispatch(this,e,t),t},createUrl:function(e,t){return"object"===_typeof(t)?t:{prefix:e.prefix,resource:t,suffix:e.suffix}},addComponents:function(t,n){var o=this.urls[t];e.each(n,(function(t){e.ScriptLoader.add(o+"/"+t)}))},load:function(t,n,o,i){var r=this,a=n;function s(){var a=r.dependencies(t);e.each(a,(function(e){var t=r.createUrl(n,e);r.load(t.resource,t,void 0,void 0)})),o&&(i?o.call(i):o.call(e.ScriptLoader))}r.urls[t]||("object"===_typeof(n)&&(a=n.prefix+n.resource+n.suffix),dynamicImport||0!==a.indexOf("/")&&-1==a.indexOf("://")&&(a=e.baseURL+"/"+a),r.urls[t]=a.substring(0,a.lastIndexOf("/")),r.lookup[t]?s():e.ScriptLoader.add(a,s,i))}}),e.PluginManager=new e.AddOnManager,e.ThemeManager=new e.AddOnManager}(tinymce),function(e){var t=e.each,n=e.extend,o=e.DOM,i=e.dom.Event,r=(e.ThemeManager,e.PluginManager,e.explode),a=e.util.Dispatcher,s=0;e.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(e.documentBaseURL)||(e.documentBaseURL+="/"),e.baseURL=new e.util.URI(e.documentBaseURL).toAbsolute(e.baseURL),e.baseURI=new e.util.URI(e.baseURL),e.onBeforeUnload=new a(e),i.add(window,"beforeunload",(function(t){e.onBeforeUnload.dispatch(e,t)})),e.onAddEditor=new a(e),e.onRemoveEditor=new a(e),e.EditorManager=n(e,{editors:[],i18n:{},activeEditor:null,init:function(n){e.ScriptLoader;var a,c=[];function l(e){var t=e.id;return t||(t=(t=e.name)&&!o.get(t)?e.name:o.uniqueId(),e.setAttribute("id",t)),t}function d(t,n,o){var i=t[n];if(i)return e.is(i,"string")&&(o=(o=i.replace(/\.\w+$/,""))?e.resolve(o):0,i=e.resolve(i)),i.apply(o||this,Array.prototype.slice.call(arguments,2))}function u(e,t){return t.constructor===RegExp?t.test(e.className):o.hasClass(e,t)}this.settings=n,i.bind(window,"ready",(function(){var i,f;switch(d(n,"onpageload"),n.mode){case"exact":(i=n.elements||"").length>0&&t(r(i),(function(i){o.get(i)?(a=new e.Editor(i,n),c.push(a),a.render(1)):t(document.forms,(function(r){t(r.elements,(function(t){t.name===i&&(i="mce_editor_"+s++,o.setAttrib(t,"id",i),a=new e.Editor(i,n),c.push(a),a.render(1))}))}))}));break;case"textareas":case"specific_textareas":t(o.select("textarea"),(function(t){n.editor_deselector&&u(t,n.editor_deselector)||n.editor_selector&&!u(t,n.editor_selector)||(a=new e.Editor(l(t),n),c.push(a),a.render(1))}));break;default:n.types?t(n.types,(function(i){t(o.select(i.selector),(function(t){var o=new e.Editor(l(t),e.extend({},n,i));c.push(o),o.render(1)}))})):n.selector&&t(o.select(n.selector),(function(t){var o=new e.Editor(l(t),n);c.push(o),o.render(1)}))}n.oninit&&(i=f=0,t(c,(function(e){f++,e.initialized?i++:e.onInit.add((function(){++i==f&&d(n,"oninit")})),i==f&&d(n,"oninit")})))}))},get:function(e){return void 0===e?this.editors:this.editors.hasOwnProperty(e)?this.editors[e]:void 0},getInstanceById:function(e){return this.get(e)},add:function(e){var t=this.editors;return t[e.id]=e,t.push(e),this._setActive(e),this.onAddEditor.dispatch(this,e),e},remove:function(e){var t,n=this,o=n.editors;if(!o[e.id])return null;for(delete o[e.id],t=0;t<o.length;t++)if(o[t]==e){o.splice(t,1);break}return n.activeEditor==e&&n._setActive(o[0]),e.destroy(),n.onRemoveEditor.dispatch(n,e),e},execCommand:function(t,n,o){var i,r=this,a=r.get(o);switch(t){case"mceFocus":return a.focus(),!0;case"mceAddEditor":case"mceAddControl":return r.get(o)||new e.Editor(o,r.settings).render(),!0;case"mceAddFrameControl":return(i=o.window).tinyMCE=tinyMCE,i.tinymce=e,e.DOM.doc=i.document,e.DOM.win=i,(a=new e.Editor(o.element_id,o)).render(),e.isIE&&!e.isIE11&&i.attachEvent("onunload",(function e(){a.destroy(),i.detachEvent("onunload",e),i=i.tinyMCE=i.tinymce=null})),o.page_window=null,!0;case"mceRemoveEditor":case"mceRemoveControl":return a&&a.remove(),!0;case"mceToggleEditor":return a?(a.isHidden()?a.show():a.hide(),!0):(r.execCommand("mceAddControl",0,o),!0)}return!!r.activeEditor&&r.activeEditor.execCommand(t,n,o)},execInstanceCommand:function(e,t,n,o){var i=this.get(e);return!!i&&i.execCommand(t,n,o)},triggerSave:function(){t(this.editors,(function(e){e.save()}))},addI18n:function(n,o){var i=this.i18n;e.is(n,"string")?t(o,(function(e,t){i[n+"."+t]=e})):t(n,(function(e,n){t(e,(function(e,o){t(e,(function(e,t){"common"===o?i[n+"."+t]=e:i[n+"."+o+"."+t]=e}))}))}))},_setActive:function(e){this.selectedInstance=this.activeEditor=e}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,o=e.extend,i=e.each,r=e.isGecko,a=e.isIE,s=(e.isWebKit,e.is),c=e.ThemeManager,l=e.PluginManager,d=e.explode;e.create("tinymce.Editor",{Editor:function(t,n){this.settings=n=o({id:t,language:"en",theme:"advanced",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:e.documentBaseURL,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,table_inline_editing:!1,object_resizing:!0,accessibility_focus:!0,doctype:e.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",apply_source_formatting:!0,directionality:"ltr",forced_root_block:"p",hidden_input:!0,padd_empty_editor:!0,render_ui:!0,indentation:"30px",fix_table_elements:!0,inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",validate:!0,entity_encoding:"named",url_converter:this.convertURL,url_converter_scope:this,ie7_compat:!0},n),this.id=this.editorId=t,this.isNotDirty=!1,this.plugins={},this.documentBaseURI=new e.util.URI(n.document_base_url||e.documentBaseURL,{base_uri:tinyMCE.baseURI}),this.baseURI=e.baseURI,this.contentCSS=[],this.contentStyles=[],this.setupEvents(),this.execCommands={},this.queryStateCommands={},this.queryValueCommands={},this.execCallback("setup",this)},render:function(o){var r=this,a=r.settings,s=r.id,u=e.ScriptLoader;n.domLoaded?(tinyMCE.settings=a,r.getElement()&&(e.isIDevice&&!e.isIOS5||(!/TEXTAREA|INPUT/i.test(r.getElement().nodeName)&&a.hidden_input&&t.getParent(s,"form")&&t.insertAfter(t.create("input",{type:"hidden",name:s}),s),a.content_editable||(r.orgVisibility=r.getElement().style.visibility,r.getElement().style.visibility="hidden"),e.WindowManager&&(r.windowManager=new e.WindowManager(r)),"xml"==a.encoding&&r.onGetContent.add((function(e,n){n.save&&(n.content=t.encode(n.content))})),a.add_form_submit_trigger&&r.onSubmit.addToTop((function(){r.initialized&&(r.save(),r.isNotDirty=1)})),a.add_unload_trigger&&(r._beforeUnload=tinyMCE.onBeforeUnload.add((function(){!r.initialized||r.destroyed||r.isHidden()||r.save({format:"raw",no_events:!0})}))),e.addUnload(r.destroy,r),a.submit_patch&&r.onBeforeRenderUI.add((function(){var t=r.getElement().form;t&&(t._mceOldSubmit||(t.submit.nodeType||t.submit.length||(r.formElement=t,t._mceOldSubmit=t.submit,t.submit=function(){return e.triggerSave(),r.isNotDirty=1,r.formElement._mceOldSubmit(r.formElement)}),t=null))})),a.language&&!1!==a.language_load&&u.add(e.baseURL+"/langs/"+a.language+".js"),a.theme&&"function"!=typeof a.theme&&"-"!=a.theme.charAt(0)&&!c.urls[a.theme]&&c.load(a.theme,"./themes/"+a.theme+"/editor_template"+e.suffix+".js"),i(d(a.plugins),(function(t){if(t&&!l.urls[t])if("-"==t.charAt(0)){t=t.substr(1,t.length);var n=l.dependencies(t);i(n,(function(t){var n={prefix:"./plugins/",resource:t,suffix:"/editor_plugin"+e.suffix+".js"};t=l.createUrl(n,t),l.load(t.resource,t)}))}else{if("safari"==t)return;l.load(t,{prefix:"./plugins/",resource:t,suffix:"/editor_plugin"+e.suffix+".js"})}})),u.loadQueue((function(){r.removed||r.init()}))))):n.add(window,"ready",(function(){r.render()}))},init:function(){var n,o,r,s,u,f,p,m,h,g=this,v=g.settings,y=g.getElement(),b=[];if(e.add(g),v.aria_label=v.aria_label||t.getAttrib(y,"aria-label",g.getLang("aria.rich_text_area")),v.theme&&("function"!=typeof v.theme?(v.theme=v.theme.replace(/-/,""),s=c.get(v.theme),g.theme=new s,g.theme.init&&g.theme.init(g,c.urls[v.theme]||e.documentBaseURL.replace(/\/$/,""))):g.theme=v.theme),i(d(v.plugins.replace(/\-/g,"")),(function t(n){var o,r=l.get(n),a=l.urls[n]||e.documentBaseURL.replace(/\/$/,"");r&&-1===e.inArray(b,n)&&(i(l.dependencies(n),(function(e){t(e)})),o=new r(g,a),g.plugins[n]=o,o.init&&(o.init(g,a),b.push(n)))})),!1!==v.popup_css&&(v.popup_css?v.popup_css=g.documentBaseURI.toAbsolute(v.popup_css):v.popup_css=g.baseURI.toAbsolute("themes/"+v.theme+"/skins/"+v.skin+"/dialog.css")),v.popup_css_add&&(v.popup_css+=","+g.documentBaseURI.toAbsolute(v.popup_css_add)),g.controlManager=new e.ControlManager(g),g.onBeforeRenderUI.dispatch(g,g.controlManager),v.render_ui&&g.theme&&(g.orgDisplay=y.style.display,"function"!=typeof v.theme?(n=v.width||y.style.width||y.offsetWidth,o=v.height||y.style.height||y.offsetHeight,r=v.min_height||100,(m=/^[0-9\.]+(|px)$/i).test(""+n)&&(n=Math.max(parseInt(n,10)+(s.deltaWidth||0),100)),m.test(""+o)&&(o=Math.max(parseInt(o,10)+(s.deltaHeight||0),r)),s=g.theme.renderUI({targetNode:y,width:n,height:o,deltaWidth:v.delta_width,deltaHeight:v.delta_height}),t.setStyles(s.sizeContainer||s.editorContainer,{width:n,height:o}),(o=(s.iframeHeight||o)+("number"==typeof o?s.deltaHeight||0:""))<r&&(o=r)):((s=v.theme(g,y)).editorContainer.nodeType&&(s.editorContainer=s.editorContainer.id=s.editorContainer.id||g.id+"_parent"),s.iframeContainer.nodeType&&(s.iframeContainer=s.iframeContainer.id=s.iframeContainer.id||g.id+"_iframecontainer"),o=s.iframeHeight||y.offsetHeight,a&&(g.onInit.add((function(e){e.dom.bind(e.getBody(),"beforedeactivate keydown keyup",(function(){e.bookmark=e.selection.getBookmark(1)}))})),g.onNodeChange.add((function(e){document.activeElement.id==e.id+"_ifr"&&(e.bookmark=e.selection.getBookmark(1))})))),g.editorContainer=s.editorContainer),v.content_css&&i(d(v.content_css),(function(e){g.contentCSS.push(g.documentBaseURI.toAbsolute(e))})),v.content_style&&g.contentStyles.push(v.content_style),v.content_editable)return y=s=null,g.initContentBody();for(document.domain&&location.hostname!=document.domain&&(e.relaxedDomain=document.domain),g.iframeHTML=v.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">',v.document_base_url!=e.documentBaseURL&&(g.iframeHTML+='<base href="'+g.documentBaseURI.getURI()+'" />'),e.isIE8&&(v.ie7_compat?g.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />':g.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=edge" />'),g.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',h=0;h<g.contentCSS.length;h++)g.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+g.contentCSS[h]+'" />';g.contentCSS=[],-1!=(f=v.body_id||"tinymce").indexOf("=")&&(f=(f=g.getParam("body_id","","hash"))[g.id]||f),-1!=(p=v.body_class||"").indexOf("=")&&(p=(p=g.getParam("body_class","","hash"))[g.id]||""),g.iframeHTML+='</head><body id="'+f+'" class="mceContentBody '+p+'" onload="window.parent.tinyMCE.get(\''+g.id+"').onLoad.dispatch();\"><br></body></html>",e.relaxedDomain&&(a||e.isOpera&&parseFloat(opera.version())<11)&&(u='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+g.id+'");document.write(ed.iframeHTML);document.close();ed.initContentBody();})()'),t.add(s.iframeContainer,"iframe",{id:g.id+"_ifr",src:u||'javascript:""',frameBorder:"0",allowTransparency:"true",title:v.aria_label,style:{width:"100%",height:o,display:"block"},referrerpolicy:"origin"}),g.contentAreaContainer=s.iframeContainer,s.editorContainer&&(t.get(s.editorContainer).style.display=g.orgDisplay),y.style.visibility=g.orgVisibility,t.get(g.id).style.display="none",t.setAttrib(g.id,"aria-hidden",!0),e.relaxedDomain&&u||g.initContentBody(),y=s=null},initContentBody:function(){var n,o,r=this,s=r.settings,c=t.get(r.id),l=r.getDoc();a&&e.relaxedDomain||s.content_editable||(l.open(),l.write(r.iframeHTML),l.close(),e.relaxedDomain&&(l.domain=e.relaxedDomain)),s.content_editable&&(t.addClass(c,"mceContentBody"),r.contentDocument=l=s.content_document||document,r.contentWindow=s.content_window||window,r.bodyElement=c,s.content_document=s.content_window=null),(n=r.getBody()).disabled=!0,s.readonly||(n.contentEditable=r.getParam("content_editable_state",!0)),n.disabled=!1,r.schema=new e.html.Schema(s),r.dom=new e.dom.DOMUtils(l,{keep_values:!0,url_converter:r.convertURL,url_converter_scope:r,hex_colors:s.force_hex_style_colors,class_filter:s.class_filter,update_styles:!0,root_element:s.content_editable?r.id:null,schema:r.schema}),r.parser=new e.html.DomParser(s,r.schema),r.parser.addAttributeFilter("src,href,style",(function(e,t){for(var n,o,i,a=e.length,s=r.dom;a--;)o=(n=e[a]).attr(t),i="data-mce-"+t,n.attributes.map[i]||("style"===t?n.attr(i,s.serializeStyle(s.parseStyle(o),n.name)):n.attr(i,r.convertURL(o,t,n.name)))})),r.parser.addNodeFilter("script",(function(e,t){for(var n,o=e.length;o--;)(n=e[o]).attr("type","mce-"+(n.attr("type")||"text/javascript"))})),r.parser.addNodeFilter("#cdata",(function(e,t){for(var n,o=e.length;o--;)(n=e[o]).type=8,n.name="#comment",n.value="[CDATA["+n.value+"]]"})),r.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",(function(t,n){for(var o,i=t.length,a=r.schema.getNonEmptyElements();i--;)(o=t[i]).isEmpty(a)&&(o.empty().append(new e.html.Node("br",1)).shortEnded=!0)})),r.serializer=new e.dom.Serializer(s,r.dom,r.schema),r.selection=new e.dom.Selection(r.dom,r.getWin(),r.serializer,r),r.formatter=new e.Formatter(r),r.undoManager=new e.UndoManager(r),r.forceBlocks=new e.ForceBlocks(r),r.enterKey=new e.EnterKey(r),r.editorCommands=new e.EditorCommands(r),r.onExecCommand.add((function(e,t){/^(FontName|FontSize)$/.test(t)||r.nodeChanged()})),r.serializer.onPreProcess.add((function(e,t){return r.onPreProcess.dispatch(r,t,e)})),r.serializer.onPostProcess.add((function(e,t){return r.onPostProcess.dispatch(r,t,e)})),r.onPreInit.dispatch(r),s.browser_spellcheck||s.gecko_spellcheck||(l.body.spellcheck=!1),s.readonly||r.bindNativeEvents(),r.controlManager.onPostRender.dispatch(r,r.controlManager),r.onPostRender.dispatch(r),r.quirks=e.util.Quirks(r),s.directionality&&(n.dir=s.directionality),s.nowrap&&(n.style.whiteSpace="nowrap"),s.protect&&r.onBeforeSetContent.add((function(e,t){i(s.protect,(function(e){t.content=t.content.replace(e,(function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"}))}))})),r.onSetContent.add((function(){r.addVisual(r.getBody())})),s.padd_empty_editor&&r.onPostProcess.add((function(e,t){t.content=t.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")})),r.load({initial:!0,format:"html"}),r.startContent=r.getContent({format:"raw"}),r.initialized=!0,r.onInit.dispatch(r),r.execCallback("setupcontent_callback",r.id,n,l),r.execCallback("init_instance_callback",r),r.focus(!0),r.nodeChanged({initial:!0}),r.contentStyles.length>0&&(o="",i(r.contentStyles,(function(e){o+=e+"\r\n"})),r.dom.addStyle(o)),i(r.contentCSS,(function(e){r.dom.loadCSS(e)})),s.auto_focus&&setTimeout((function(){var t=e.get(s.auto_focus);t.selection.select(t.getBody(),1),t.selection.collapse(1),t.getBody().focus(),t.getWin().focus()}),100),c=l=n=null},focus:function(t){var n,o,i,r,a=this.selection,s=this.settings.content_editable,c=this.getDoc();t||(this.bookmark&&(a.moveToBookmark(this.bookmark),this.bookmark=null),(o=a.getRng()).item&&(i=o.item(0)),this._refreshContentEditable(),s||this.getWin().focus(),(e.isGecko||s)&&((r=this.getBody()).setActive&&!e.isIE11?r.setActive():r.focus(),s&&a.normalize()),i&&i.ownerDocument==c&&((o=c.body.createControlRange()).addElement(i),o.select())),e.activeEditor!=this&&(null!=(n=e.activeEditor)&&n.onDeactivate.dispatch(n,this),this.onActivate.dispatch(this,n)),e._setActive(this)},execCallback:function(t){var n,o=this,i=o.settings[t];if(i)return o.callbackLookup&&(n=o.callbackLookup[t])&&(i=n.func,n=n.scope),s(i,"string")&&(n=(n=i.replace(/\.\w+$/,""))?e.resolve(n):0,i=e.resolve(i),o.callbackLookup=o.callbackLookup||{},o.callbackLookup[t]={func:i,scope:n}),i.apply(n||o,Array.prototype.slice.call(arguments,1))},translate:function(t){var n=this.settings.language||"en",o=e.i18n;return t?o[n+"."+t]||t.replace(/\{\#([^\}]+)\}/g,(function(e,t){return o[n+"."+t]||"{#"+t+"}"})):""},getLang:function(t,n){return e.i18n[(this.settings.language||"en")+"."+t]||(s(n)?n:"{#"+t+"}")},getParam:function(t,n,o){var r,a=e.trim,c=s(this.settings[t])?this.settings[t]:n;return"hash"===o?(r={},s(c,"string")?i(c.indexOf("=")>0?c.split(/[;,](?![^=;,]*(?:[;,]|$))/):c.split(","),(function(e){(e=e.split("=")).length>1?r[a(e[0])]=a(e[1]):r[a(e[0])]=a(e)})):r=c,r):c},nodeChanged:function(e){var t,n=this.selection;this.initialized&&(e=e||{},t=n.getStart()||this.getBody(),t=a&&t.ownerDocument!=this.getDoc()?this.getBody():t,e.parents=[],this.dom.getParent(t,(function(t){if("BODY"==t.nodeName)return!0;e.parents.push(t)})),this.onNodeChange.dispatch(this,e&&e.controlManager||this.controlManager,t,n.isCollapsed(),e))},addButton:function(e,t){this.buttons=this.buttons||{},this.buttons[e]=t},addCommand:function(e,t,n){this.execCommands[e]={func:t,scope:n||this}},addQueryStateHandler:function(e,t,n){this.queryStateCommands[e]={func:t,scope:n||this}},addQueryValueHandler:function(e,t,n){this.queryValueCommands[e]={func:t,scope:n||this}},addShortcut:function(e,t,n,o){var r,a=this;return!1!==a.settings.custom_shortcuts&&(a.shortcuts=a.shortcuts||{},s(n,"string")&&(r=n,n=function(){a.execCommand(r,!1,null)}),s(n,"object")&&(r=n,n=function(){a.execCommand(r[0],r[1],r[2])}),i(d(e),(function(e){var r={func:n,scope:o||this,desc:a.translate(t),alt:!1,ctrl:!1,shift:!1};i(d(e,"+"),(function(e){switch(e){case"alt":case"ctrl":case"shift":r[e]=!0;break;default:r.charCode=e.charCodeAt(0),r.keyCode=e.toUpperCase().charCodeAt(0)}})),a.shortcuts[(r.ctrl?"ctrl":"")+","+(r.alt?"alt":"")+","+(r.shift?"shift":"")+","+r.keyCode]=r})),!0)},execCommand:function(e,t,n,r){var a,s,c=this,l=0;return/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(e)||r&&r.skip_focus||c.focus(),r=o({},r),c.onBeforeExecCommand.dispatch(c,e,t,n,r),!r.terminate&&(c.execCallback("execcommand_callback",c.id,c.selection.getNode(),e,t,n)?(c.onExecCommand.dispatch(c,e,t,n,r),!0):(a=c.execCommands[e])&&!0!==(s=a.func.call(a.scope,t,n))?(c.onExecCommand.dispatch(c,e,t,n,r),s):(i(c.plugins,(function(o){if(o.execCommand&&o.execCommand(e,t,n))return c.onExecCommand.dispatch(c,e,t,n,r),l=1,!1})),!!l||(c.theme&&c.theme.execCommand&&c.theme.execCommand(e,t,n)||c.editorCommands.execCommand(e,t,n)?(c.onExecCommand.dispatch(c,e,t,n,r),!0):(c.getDoc().execCommand(e,t,n),void c.onExecCommand.dispatch(c,e,t,n,r)))))},queryCommandState:function(e){var t,n,o=this;if(!o._isHidden()){if((t=o.queryStateCommands[e])&&!0!==(n=t.func.call(t.scope)))return n;if(-1!==(t=o.editorCommands.queryCommandState(e)))return t;try{return this.getDoc().queryCommandState(e)}catch(e){}}},queryCommandValue:function(e){var t,n,o=this;if(!o._isHidden()){if((t=o.queryValueCommands[e])&&!0!==(n=t.func.call(t.scope)))return n;if(t=o.editorCommands.queryCommandValue(e),s(t))return t;try{return this.getDoc().queryCommandValue(e)}catch(e){}}},show:function(){t.show(this.getContainer()),t.hide(this.id),this.load()},hide:function(){var e=this.getDoc();a&&e&&e.execCommand("SelectAll"),this.save(),t.hide(this.getContainer()),t.setStyle(this.id,"display",this.orgDisplay)},isHidden:function(){return!t.isHidden(this.id)},setProgressState:function(e,t,n){return this.onSetProgressState.dispatch(this,e,t,n),e},load:function(e){var t,n=this,o=n.getElement();if(o)return(e=e||{}).load=!0,t=n.setContent(s(o.value)?o.value:o.innerHTML,e),e.element=o,e.no_events||n.onLoadContent.dispatch(n,e),e.element=o=null,t},save:function(e){var n,o,r=this,a=r.getElement();if(a&&r.initialized)return(e=e||{}).save=!0,e.element=a,e.content=r.getContent(e),e.no_events||r.onSaveContent.dispatch(r,e),n=e.content,/TEXTAREA|INPUT/i.test(a.nodeName)?a.value=n:(a.innerHTML=n,(o=t.getParent(r.id,"form"))&&i(o.elements,(function(e){if(e.name==r.id)return e.value=n,!1}))),e.element=a=null,n},setContent:function(t,n){var o,i=this.getBody();return(n=n||{}).format=n.format||"html",n.set=!0,n.content=t,n.no_events||this.onBeforeSetContent.dispatch(this,n),t=n.content,e.isIE||0!==t.length&&!/^\s+$/.test(t)?("raw"!==n.format&&(t=new e.html.Serializer({},this.schema).serialize(this.parser.parse(t))),n.content=e.trim(t),this.dom.setHTML(i,n.content),n.no_events||this.onSetContent.dispatch(this,n),this.settings.content_editable&&document.activeElement!==this.getBody()||this.selection.normalize(),n.content):(t=(o=this.settings.forced_root_block)?"<"+o+'><br data-mce-bogus="1"></'+o+">":'<br data-mce-bogus="1">',i.innerHTML=t,this.selection.select(i,!0),void this.selection.collapse(!0))},getContent:function(t){var n,o=this.getBody();return(t=t||{}).format=t.format||"html",t.get=!0,t.getInner=!0,t.no_events||this.onBeforeGetContent.dispatch(this,t),n="raw"==t.format?o.innerHTML:"text"==t.format?o.innerText||o.textContent:this.serializer.serialize(o,t),"text"!=t.format?t.content=e.trim(n):t.content=n,t.no_events||this.onGetContent.dispatch(this,t),t.content},isDirty:function(){return e.trim(this.startContent)!=e.trim(this.getContent({format:"raw",no_events:1}))&&!this.isNotDirty},getContainer:function(){return this.container||(this.container=t.get(this.editorContainer||this.id+"_parent")),this.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return t.get(this.settings.content_element||this.id)},getWin:function(){var e;return this.contentWindow||(e=t.get(this.id+"_ifr"))&&(this.contentWindow=e.contentWindow),this.contentWindow},getDoc:function(){var e;return this.contentDocument||(e=this.getWin())&&(this.contentDocument=e.document),this.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(e,t,n){var o=this.settings;return o.urlconverter_callback?this.execCallback("urlconverter_callback",e,n,!0,t):!o.convert_urls||n&&"LINK"==n.nodeName||0===e.indexOf("file:")?e:o.relative_urls?this.documentBaseURI.toRelative(e):e=this.documentBaseURI.toAbsolute(e,o.remove_script_host)},addVisual:function(e){var t,n=this,o=n.settings,r=n.dom;e=e||n.getBody(),s(n.hasVisual)||(n.hasVisual=o.visual),i(r.select("table,a",e),(function(e){var i;switch(e.nodeName){case"TABLE":return t=o.visual_table_class||"mceItemTable",void((i=r.getAttrib(e,"border"))&&"0"!=i||(n.hasVisual?r.addClass(e,t):r.removeClass(e,t)));case"A":return void(r.getAttrib(e,"href",!1)||(i=r.getAttrib(e,"name")||e.id,t="mceItemAnchor",i&&(n.hasVisual?r.addClass(e,t):r.removeClass(e,t))))}})),n.onVisualAid.dispatch(n,e,n.hasVisual)},remove:function(){var o=this.getContainer(),i=this.getDoc();this.removed||(this.removed=1,a&&i&&i.execCommand("SelectAll"),this.save(),t.setStyle(this.id,"display",this.orgDisplay),this.settings.content_editable||(n.unbind(this.getWin()),n.unbind(this.getDoc())),n.unbind(this.getBody()),n.clear(o),this.execCallback("remove_instance_callback",this),this.onRemove.dispatch(this),this.onExecCommand.listeners=[],e.remove(this),t.remove(o))},destroy:function(t){var o=this;o.destroyed||(r&&(n.unbind(o.getDoc()),n.unbind(o.getWin()),n.unbind(o.getBody())),t||(e.removeUnload(o.destroy),tinyMCE.onBeforeUnload.remove(o._beforeUnload),o.theme&&o.theme.destroy&&o.theme.destroy(),o.controlManager.destroy(),o.selection.destroy(),o.dom.destroy()),o.formElement&&(o.formElement.submit=o.formElement._mceOldSubmit,o.formElement._mceOldSubmit=null),o.contentAreaContainer=o.formElement=o.container=o.settings.content_element=o.bodyElement=o.contentDocument=o.contentWindow=null,o.selection&&(o.selection=o.selection.win=o.selection.dom=o.selection.dom.doc=null),o.destroyed=1)},_refreshContentEditable:function(){var e,t;this._isHidden()&&((t=(e=this.getBody()).parentNode).removeChild(e),t.appendChild(e),e.focus())},_isHidden:function(){var e;return r?!(e=this.selection.getSel())||!e.rangeCount||0===e.rangeCount:0}})}(tinymce),function(e){var t=e.each;e.Editor.prototype.setupEvents=function(){var n=this,o=n.settings;t(["onPreInit","onBeforeRenderUI","onPostRender","onLoad","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState","onSetAttrib"],(function(t){n[t]=new e.util.Dispatcher(n)})),o.cleanup_callback&&(n.onBeforeSetContent.add((function(e,t){t.content=e.execCallback("cleanup_callback","insert_to_editor",t.content,t)})),n.onPreProcess.add((function(e,t){t.set&&e.execCallback("cleanup_callback","insert_to_editor_dom",t.node,t),t.get&&e.execCallback("cleanup_callback","get_from_editor_dom",t.node,t)})),n.onPostProcess.add((function(e,t){t.set&&(t.content=e.execCallback("cleanup_callback","insert_to_editor",t.content,t)),t.get&&(t.content=e.execCallback("cleanup_callback","get_from_editor",t.content,t))}))),o.save_callback&&n.onGetContent.add((function(e,t){t.save&&(t.content=e.execCallback("save_callback",e.id,t.content,e.getBody()))})),o.handle_event_callback&&n.onEvent.add((function(e,t,o){!1===n.execCallback("handle_event_callback",t,e,o)&&(t.preventDefault(),t.stopPropagation())})),o.handle_node_change_callback&&n.onNodeChange.add((function(e,t,n){e.execCallback("handle_node_change_callback",e.id,n,-1,-1,!0,e.selection.isCollapsed())})),o.save_callback&&n.onSaveContent.add((function(e,t){var n=e.execCallback("save_callback",e.id,t.content,e.getBody());n&&(t.content=n)})),o.onchange_callback&&n.onChange.add((function(e,t){e.execCallback("onchange_callback",e,t)}))},e.Editor.prototype.bindNativeEvents=function(){var n,o=this,i=o.settings,r=o.dom;function a(e,t){e.type;o.removed||!1!==o.onEvent.dispatch(o,e,t)&&o[n[e.fakeType||e.type]].dispatch(o,e,t)}function s(e){o.focus(!0)}function c(t,n){65==n.keyCode&&e.VK.metaKeyPressed(n)||o.selection.normalize(),o.nodeChanged()}function l(n,i){(n.altKey||n.ctrlKey||n.metaKey)&&t(o.shortcuts,(function(t){var o=e.isMac?n.metaKey:n.ctrlKey;if(t.ctrl==o&&t.alt==n.altKey&&t.shift==n.shiftKey)return n.keyCode==t.keyCode||n.charCode&&n.charCode==t.charCode?(n.preventDefault(),i&&t.func.call(t.scope),!0):void 0}))}t(n={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"},(function(t,n){var s=i.content_editable?o.getBody():o.getDoc();switch(n){case"contextmenu":r.bind(s,n,a);break;case"paste":r.bind(o.getBody(),n,a);break;case"submit":case"reset":r.bind(o.getElement().form||e.DOM.getParent(o.id,"form"),n,a);break;default:r.bind(s,n,a)}})),r.bind(i.content_editable?o.getBody():e.isGecko?o.getDoc():o.getWin(),"focus",(function(e){o.focus(!0)})),i.content_editable&&e.isOpera&&(r.bind(o.getBody(),"click",s),r.bind(o.getBody(),"keydown",s)),o.onMouseUp.add(c),o.onKeyUp.add((function(t,n){var o=n.keyCode;(o>=33&&o<=36||o>=37&&o<=40||13==o||45==o||46==o||8==o||e.isMac&&(91==o||93==o)||n.ctrlKey)&&c(0,n)})),o.onReset.add((function(){o.setContent(o.startContent,{format:"raw"})})),o.onKeyUp.add((function(e,t){l(t)})),o.onKeyPress.add((function(e,t){l(t)})),o.onKeyDown.add((function(e,t){l(t,!0)})),e.isOpera&&o.onClick.add((function(e,t){t.preventDefault()}))}}(tinymce),function(e){var t=e.each;e.EditorCommands=function(n){var o,i,r=n.dom,a=n.selection,s={state:{},exec:{},value:{}},c=n.settings,l=n.formatter;function d(e,t,n){var o;return e=e.toLowerCase(),!!(o=s.exec[e])&&(o(e,t,n),!0)}function u(e){var t;return e=e.toLowerCase(),(t=s.state[e])?t(e):-1}function f(e,n){n=n||"exec",t(e,(function(e,o){t(o.toLowerCase().split(","),(function(t){s[n][t]=e}))}))}function p(e,t,o){return void 0===t&&(t=!1),void 0===o&&(o=null),n.getDoc().execCommand(e,t,o)}function m(e){return l.match(e)}function h(e,t){l.toggle(e,t?{value:t}:void 0)}function g(e){i=a.getBookmark(e)}function v(){a.moveToBookmark(i)}e.extend(this,{execCommand:d,queryCommandState:u,queryCommandValue:function(e){var t;return e=e.toLowerCase(),!!(t=s.value[e])&&t(e)},addCommands:f}),f((_defineProperty(o={"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){n.undoManager.add()},"Cut,Copy,Paste":function(t){var o,i=n.getDoc();try{p(t)}catch(e){o=!0}!o&&i.queryCommandSupported(t)||(e.isGecko?n.windowManager.confirm(n.getLang("clipboard_msg"),(function(e){e&&open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")})):n.windowManager.alert(n.getLang("clipboard_no_support")))},unlink:function(e){a.isCollapsed()&&a.select(a.getNode()),p(e),a.collapse(!1)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var n=e.substring(7);t("left,center,right,full".split(","),(function(e){n!=e&&l.remove("align"+e)})),h("align"+n),d("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(e){var t,n;p(e),(t=r.getParent(a.getNode(),"ol,ul"))&&(n=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)&&(g(),r.split(n,t),v()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){h(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){h(e,n)},FontSize:function(t,n,o){var i,r;o>=1&&o<=7&&(r=e.explode(c.font_size_style_values),o=(i=e.explode(c.font_size_classes))?i[o-1]||o:r[o-1]||o),h(t,o)},RemoveFormat:function(e){l.remove(e)},mceBlockQuote:function(e){h("blockquote")},FormatBlock:function(e,t,n){return h(n||"p")},mceCleanup:function(){var e=a.getBookmark();n.setContent(n.getContent({cleanup:!0}),{cleanup:!0}),a.moveToBookmark(e)},mceRemoveNode:function(e,t,o){var i=o||a.getNode();i!=n.getBody()&&(g(),n.dom.remove(i,!0),v())},mceSelectNodeDepth:function(e,t,o){var i=0;r.getParent(a.getNode(),(function(e){if(1==e.nodeType&&i++==o)return a.select(e),!1}),n.getBody())},mceSelectNode:function(e,t,n){a.select(n)},mceInsertContent:function(t,o,i){var s,c,l,d,u,f,p,m,h,g,v,y,b,C;if(s=n.parser,c=new e.html.Serializer({},n.schema),b='<span id="mce_marker" data-mce-type="bookmark">\ufeff</span>',f={content:i,format:"html"},a.onBeforeSetContent.dispatch(a,f),-1==(i=f.content).indexOf("{$caret}")&&(i+="{$caret}"),i=i.replace(/\{\$caret\}/,b),a.isCollapsed()||n.getDoc().execCommand("Delete",!1,null),f={context:(l=a.getNode()).nodeName.toLowerCase()},"mce_marker"==(v=(u=s.parse(i,f)).lastChild).attr("id"))for(p=v,v=v.prev;v;v=v.walk(!0))if(3==v.type||!r.isBlock(v.name)){v.parent.insert(p,v,"br"===v.name);break}if(f.invalid){for(a.setContent(b),l=a.getNode(),d=n.getBody(),9==l.nodeType?l=v=d:v=l;v!==d;)l=v,v=v.parentNode;i=l==d?d.innerHTML:r.getOuterHTML(l),i=c.serialize(s.parse(i.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,(function(){return c.serialize(u)})))),l==d?r.setHTML(d,i):r.setOuterHTML(l,i)}else i=c.serialize(u),v=l.firstChild,y=l.lastChild,!v||v===y&&"BR"===v.nodeName?r.setHTML(l,i):a.setContent(i);p=r.get("mce_marker"),m=r.getRect(p),h=r.getViewPort(n.getWin()),(m.y+m.h>h.y+h.h||m.y<h.y||m.x>h.x+h.w||m.x<h.x)&&((C=e.isIE?n.getDoc().documentElement:n.getBody()).scrollLeft=m.x,C.scrollTop=m.y-h.h+25),g=r.createRng(),(v=p.previousSibling)&&3==v.nodeType?g.setStart(v,v.nodeValue.length):(g.setStartBefore(p),g.setEndBefore(p)),r.remove(p),a.setRng(g),a.onSetContent.dispatch(a,f),n.addVisual()},mceInsertRawHTML:function(e,t,o){a.setContent("tiny_mce_marker"),n.setContent(n.getContent().replace(/tiny_mce_marker/g,(function(){return o})))},mceToggleFormat:function(e,t,n){h(n)},mceSetContent:function(e,t,o){n.setContent(o)},"Indent,Outdent":function(e){var n,o,i;n=c.indentation,o=/[a-z%]+$/i.exec(n),n=parseInt(n),u("InsertUnorderedList")||u("InsertOrderedList")?p(e):(c.forced_root_block||r.getParent(a.getNode(),r.isBlock)||l.apply("div"),t(a.getSelectedBlocks(),(function(t){"outdent"==e?(i=Math.max(0,parseInt(t.style.paddingLeft||0)-n),r.setStyle(t,"paddingLeft",i?i+o:"")):r.setStyle(t,"paddingLeft",parseInt(t.style.paddingLeft||0)+n+o)})))},mceRepaint:function(){if(e.isGecko)try{g(!0),a.getSel()&&a.getSel().selectAllChildren(n.getBody()),a.collapse(!0),v()}catch(e){}}},"mceToggleFormat",(function(e,t,n){l.toggle(n)})),_defineProperty(o,"InsertHorizontalRule",(function(){n.execCommand("mceInsertContent",!1,"<hr />")})),_defineProperty(o,"mceToggleVisualAid",(function(){n.hasVisual=!n.hasVisual,n.addVisual()})),_defineProperty(o,"mceReplaceContent",(function(e,t,o){n.execCommand("mceInsertContent",!1,o.replace(/\{\$selection\}/g,a.getContent({format:"text"})))})),_defineProperty(o,"mceInsertLink",(function(e,t,n){var o;"string"==typeof n&&(n={href:n}),o=r.getParent(a.getNode(),"a"),n.href=n.href.replace(" ","%20"),o&&n.href||l.remove("link"),n.href&&l.apply("link",n,o)})),_defineProperty(o,"selectAll",(function(){var e=r.getRoot(),t=r.createRng();a.getRng().setStart?(t.setStart(e,0),t.setEnd(e,e.childNodes.length),a.setRng(t)):p("SelectAll")})),o)),f({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(t){var n="align"+t.substring(7),o=a.isCollapsed()?[r.getParent(a.getNode(),r.isBlock)]:a.getSelectedBlocks(),i=e.map(o,(function(e){return!!l.matchNode(e,n)}));return-1!==e.inArray(i,!0)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return m(e)},mceBlockQuote:function(){return m("blockquote")},Outdent:function(){var e;if(c.inline_styles){if((e=r.getParent(a.getStart(),r.isBlock))&&parseInt(e.style.paddingLeft)>0)return!0;if((e=r.getParent(a.getEnd(),r.isBlock))&&parseInt(e.style.paddingLeft)>0)return!0}return u("InsertUnorderedList")||u("InsertOrderedList")||!c.inline_styles&&!!r.getParent(a.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var t=r.getParent(a.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state"),f({"FontSize,FontName":function(e){var t,n=0;return(t=r.getParent(a.getNode(),"span"))&&(n="fontsize"==e?t.style.fontSize:t.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),n}},"value"),f({Undo:function(){n.undoManager.undo()},Redo:function(){n.undoManager.redo()}})}}(tinymce),function(e){var t=e.util.Dispatcher;e.UndoManager=function(n){var o,i,r,a,s,c=0,l=[];function d(){o.typing=!1,o.add()}return onBeforeAdd=new t(o),r=new t(o),a=new t(o),s=new t(o),r.add((function(e,t){if(e.hasUndo())return n.onChange.dispatch(n,t,e)})),a.add((function(e,t){return n.onUndo.dispatch(n,t,e)})),s.add((function(e,t){return n.onRedo.dispatch(n,t,e)})),n.onInit.add((function(){o.add()})),n.onBeforeExecCommand.add((function(e,t,n,i,r){"Undo"==t||"Redo"==t||"mceRepaint"==t||r&&r.skip_undo||o.beforeChange()})),n.onExecCommand.add((function(e,t,n,i,r){"Undo"==t||"Redo"==t||"mceRepaint"==t||r&&r.skip_undo||o.add()})),n.onSaveContent.add(d),n.dom.bind(n.dom.getRoot(),"dragend",d),n.dom.bind(n.getBody(),"focusout",(function(e){!n.removed&&o.typing&&d()})),n.onKeyUp.add((function(e,t){var n=t.keyCode;(n>=33&&n<=36||n>=37&&n<=40||45==n||13==n||t.ctrlKey)&&d()})),n.onKeyDown.add((function(e,t){var n=t.keyCode;n>=33&&n<=36||n>=37&&n<=40||45==n?o.typing&&d():(n<16||n>20)&&224!=n&&91!=n&&!o.typing&&(o.beforeChange(),o.typing=!0,o.add())})),n.onMouseDown.add((function(e,t){o.typing&&d()})),n.addShortcut("ctrl+z","undo_desc","Undo"),n.addShortcut("ctrl+y","redo_desc","Redo"),o={data:l,typing:!1,onBeforeAdd:onBeforeAdd,onAdd:r,onUndo:a,onRedo:s,beforeChange:function(){i=n.selection.getBookmark(2,!0)},add:function(t){var r,a,s=n.settings;if((t=t||{}).content=e.trim(n.getContent({format:"raw",no_events:1}).replace(/<span[^>]+data-mce-bogus[^>]+>[\u200B\uFEFF]+<\/span>/g,"")),o.onBeforeAdd.dispatch(o,t),(a=l[c])&&a.content==t.content)return null;if(l[c]&&(l[c].beforeBookmark=i),s.custom_undo_redo_levels&&l.length>s.custom_undo_redo_levels){for(r=0;r<l.length-1;r++)l[r]=l[r+1];l.length--,c=l.length}return t.bookmark=n.selection.getBookmark(2,!0),c<l.length-1&&(l.length=c+1),l.push(t),c=l.length-1,o.onAdd.dispatch(o,t),n.isNotDirty=0,t},undo:function(){var e;return o.typing&&(o.add(),o.typing=!1),c>0&&(e=l[--c],n.setContent(e.content,{format:"raw"}),n.selection.moveToBookmark(e.beforeBookmark),o.onUndo.dispatch(o,e)),e},redo:function(){var e;return c<l.length-1&&(e=l[++c],n.setContent(e.content,{format:"raw"}),n.selection.moveToBookmark(e.bookmark),o.onRedo.dispatch(o,e)),e},clear:function(){l=[],c=0,o.typing=!1},hasUndo:function(){return c>0||this.typing},hasRedo:function(){return c<l.length-1&&!this.typing}}}}(tinymce),tinymce.ForceBlocks=function(e){var t=e.settings,n=e.dom,o=e.selection,i=e.schema.getBlockElements();function r(){var r,a,s,c,l,d,u,f,p,m=o.getStart(),h=e.getBody();if(m&&1===m.nodeType&&t.forced_root_block){for(;m&&m!=h;){if(i[m.nodeName])return;m=m.parentNode}for((r=o.getRng()).setStart?(a=r.startContainer,s=r.startOffset,c=r.endContainer,l=r.endOffset):(r.item&&(m=r.item(0),(r=e.getDoc().body.createTextRange()).moveToElementText(m)),p=r.parentElement().ownerDocument===e.getDoc(),tmpRng=r.duplicate(),tmpRng.collapse(!0),s=-1*tmpRng.move("character",-16777215),tmpRng.collapsed||(tmpRng=r.duplicate(),tmpRng.collapse(!1),l=-1*tmpRng.move("character",-16777215)-s)),m=h.firstChild;m;)if(3===m.nodeType||1==m.nodeType&&!i[m.nodeName]){if(3===m.nodeType&&0==m.nodeValue.length){u=m,m=m.nextSibling,n.remove(u);continue}d||(d=n.create(t.forced_root_block),m.parentNode.insertBefore(d,m),f=!0),u=m,m=m.nextSibling,d.appendChild(u)}else d=null,m=m.nextSibling;if(f){if(r.setStart)r.setStart(a,s),r.setEnd(c,l),o.setRng(r);else if(p)try{(r=e.getDoc().body.createTextRange()).moveToElementText(h),r.collapse(!0),r.moveStart("character",s),l>0&&r.moveEnd("character",l),r.select()}catch(e){}e.nodeChanged()}}}t.forced_root_block&&(e.onKeyUp.add(r),e.onNodeChange.add(r))},function(e){e.DOM;var t=e.dom.Event,n=e.each,o=e.extend;e.create("tinymce.ControlManager",{ControlManager:function(t,o){var i=this;o=o||{},i.editor=t,i.controls={},i.onAdd=new e.util.Dispatcher(i),i.onPostRender=new e.util.Dispatcher(i),i.prefix=o.prefix||t.id+"_",i._cls={},i.onPostRender.add((function(){n(i.controls,(function(e){e.postRender()}))}))},get:function(e){return this.controls[this.prefix+e]||this.controls[e]},setActive:function(e,t){var n=null;return(n=this.get(e))&&n.setActive(t),n},setDisabled:function(e,t){var n=null;return(n=this.get(e))&&n.setDisabled(t),n},add:function(e){var t=this;return e&&(t.controls[e.id]=e,t.onAdd.dispatch(e,t)),e},createControl:function(e){var t,o,i,r,a=this,s=a.editor;for(a.controlFactories||(a.controlFactories=[],n(s.plugins,(function(e){e.createControl&&a.controlFactories.push(e)}))),o=0,i=(r=a.controlFactories).length;o<i;o++)if(t=r[o].createControl(e,a))return a.add(t);return"|"===e||"separator"===e?a.createSeparator():s.buttons&&(t=s.buttons[e])?a.createButton(e,t):a.add(t)},createDropMenu:function(t,n,i){var r,a,s,c,l=this,d=l.editor;return(n=o({class:"mceDropDown",constrain:d.settings.constrain_menus},n)).class=n.class+" "+d.getParam("skin")+"Skin",(s=d.getParam("skin_variant"))&&(n.class+=" "+d.getParam("skin")+"Skin"+s.substring(0,1).toUpperCase()+s.substring(1)),n.class+="rtl"==d.settings.directionality?" mceRtl":"",t=l.prefix+t,c=i||l._cls.dropmenu||e.ui.DropMenu,(r=l.controls[t]=new c(t,n)).onAddItem.add((function(e,t){var n=t.settings;n.title=d.getLang(n.title,n.title),n.onclick||(n.onclick=function(e){n.cmd&&d.execCommand(n.cmd,n.ui||!1,n.value)})})),d.onRemove.add((function(){r.destroy()})),e.isIE&&(r.onShowMenu.add((function(){d.focus(),a=d.selection.getBookmark(1)})),r.onHideMenu.add((function(){a&&(d.selection.moveToBookmark(a),a=0)}))),l.add(r)},createListBox:function(n,i,r){var a,s=this,c=s.editor;if(s.get(n))return null;return i.title=c.translate(i.title),i.scope=i.scope||c,i.onselect||(i.onselect=function(e){c.execCommand(i.cmd,i.ui||!1,e||i.value)}),i=o({title:i.title,class:"mce_"+n,scope:i.scope,control_manager:s},i),n=s.prefix+n,a=c.settings.use_native_selects||function(t){return t.settings.use_accessible_selects&&!e.isGecko}(c)?new e.ui.NativeListBox(n,i):new(r||s._cls.listbox||e.ui.ListBox)(n,i,c),s.controls[n]=a,e.isWebKit&&a.onPostRender.add((function(e,n){t.add(n,"mousedown",(function(){c.bookmark=c.selection.getBookmark(1)})),t.add(n,"focus",(function(){c.selection.moveToBookmark(c.bookmark),c.bookmark=null}))})),a.hideMenu&&c.onMouseDown.add(a.hideMenu,a),s.add(a)},createButton:function(t,n,i){var r,a=this,s=a.editor;return a.get(t)?null:(n.title=s.translate(n.title),n.label=s.translate(n.label),n.scope=n.scope||s,n.onclick||n.menu_button||(n.onclick=function(){s.execCommand(n.cmd,n.ui||!1,n.value)}),n=o({title:n.title,class:"mce_"+t,unavailable_prefix:s.getLang("unavailable",""),scope:n.scope,control_manager:a},n),t=a.prefix+t,n.menu_button?(r=new(i||a._cls.menubutton||e.ui.MenuButton)(t,n,s),s.onMouseDown.add(r.hideMenu,r)):r=new(a._cls.button||e.ui.Button)(t,n,s),a.add(r))},createMenuButton:function(e,t,n){return(t=t||{}).menu_button=1,this.createButton(e,t,n)},createSplitButton:function(t,n,i){var r,a,s=this,c=s.editor;return s.get(t)?null:(n.title=c.translate(n.title),n.scope=n.scope||c,n.onclick||(n.onclick=function(e){c.execCommand(n.cmd,n.ui||!1,e||n.value)}),n.onselect||(n.onselect=function(e){c.execCommand(n.cmd,n.ui||!1,e||n.value)}),n=o({title:n.title,class:"mce_"+t,scope:n.scope,control_manager:s},n),t=s.prefix+t,a=i||s._cls.splitbutton||e.ui.SplitButton,r=s.add(new a(t,n,c)),c.onMouseDown.add(r.hideMenu,r),r)},createColorSplitButton:function(t,n,i){var r,a,s,c=this,l=c.editor;return c.get(t)?null:(n.title=l.translate(n.title),n.scope=n.scope||l,n.onclick||(n.onclick=function(t){e.isIE&&(s=l.selection.getBookmark(1)),l.execCommand(n.cmd,n.ui||!1,t||n.value)}),n.onselect||(n.onselect=function(e){l.execCommand(n.cmd,n.ui||!1,e||n.value)}),n=o({title:n.title,class:"mce_"+t,menu_class:l.getParam("skin")+"Skin",scope:n.scope,more_colors_title:l.getLang("more_colors")},n),t=c.prefix+t,a=i||c._cls.colorsplitbutton||e.ui.ColorSplitButton,r=new a(t,n,l),l.onMouseDown.add(r.hideMenu,r),l.onRemove.add((function(){r.destroy()})),e.isIE&&(r.onShowMenu.add((function(){l.focus(),s=l.selection.getBookmark(1)})),r.onHideMenu.add((function(){s&&(l.selection.moveToBookmark(s),s=0)}))),c.add(r))},createToolbar:function(t,n,o){var i,r=this;return t=r.prefix+t,i=new(o||r._cls.toolbar||e.ui.Toolbar)(t,n,r.editor),r.get(t)?null:r.add(i)},createToolbarGroup:function(t,n,o){var i,r=this;return t=r.prefix+t,i=new(o||this._cls.toolbarGroup||e.ui.ToolbarGroup)(t,n,r.editor),r.get(t)?null:r.add(i)},createSeparator:function(t){return new(t||this._cls.separator||e.ui.Separator)},setControlType:function(e,t){return this._cls[e.toLowerCase()]=t},destroy:function(){n(this.controls,(function(e){e.destroy()})),this.controls=null}})}(tinymce),function(e){var t=e.util.Dispatcher,n=e.each,o=e.isIE,i=e.isOpera;e.create("tinymce.WindowManager",{WindowManager:function(e){var n=this;n.editor=e,n.onOpen=new t(n),n.onClose=new t(n),n.params={},n.features={}},open:function(t,r){var a,s,c,l,d=this,u="",f="modal"==d.editor.settings.dialog_type,p=e.DOM.getViewPort();t=t||{},r=r||{},s=i?p.w:screen.width,c=i?p.h:screen.height,t.name=t.name||"mc_"+(new Date).getTime(),t.width=parseInt(t.width||320),t.height=parseInt(t.height||240),t.resizable=!0,t.left=t.left||parseInt(s/2)-t.width/2,t.top=t.top||parseInt(c/2)-t.height/2,r.inline=!1,r.mce_width=t.width,r.mce_height=t.height,r.mce_auto_focus=t.auto_focus,f&&o&&(t.center=!0,t.help=!1,t.dialogWidth=t.width+"px",t.dialogHeight=t.height+"px",t.scroll=t.scrollbars||!1),n(t,(function(t,n){e.is(t,"boolean")&&(t=t?"yes":"no"),/^(name|url)$/.test(n)||(u+=o&&f?(u?";":"")+n+":"+t:(u?",":"")+n+"="+t)})),d.features=t,d.params=r,d.onOpen.dispatch(d,t,r),l=t.url||t.file,l=e._addVer(l);try{o&&f?(a=1,window.showModalDialog(l,window,u)):a=window.open(l,t.name,u)}catch(e){}a||alert(d.editor.getLang("popup_blocked"))},close:function(e){e.close(),this.onClose.dispatch(this)},createInstance:function(t,n,o,i,r,a){return new(e.resolve(t))(n,o,i,r,a)},confirm:function(e,t,n,o){o=o||window,t.call(n||this,o.confirm(this._decode(this.editor.getLang(e,e))))},alert:function(e,t,n,o){var i=this;(o=o||window).alert(i._decode(i.editor.getLang(e,e))),t&&t.call(n||i)},resizeBy:function(e,t,n){n.resizeBy(e,t)},_decode:function(t){return e.DOM.decode(t).replace(/\\n/g,"\n")}})}(tinymce),function(e){e.Formatter=function(t){var n,o={},i=e.each,r=t.dom,a=t.selection,s=e.dom.TreeWalker,c=new e.dom.RangeUtils(r),l=t.schema.isValidChild,d=(e.isArray,r.isBlock),u=t.settings.forced_root_block,f=r.nodeIndex,p=/^(src|href|style)$/,m=r.getContentEditable;function h(e){return e.nodeType&&(e=e.nodeName),!!t.schema.getTextBlockElements()[e.toLowerCase()]}function g(e,t){return r.getParents(e,t,r.getRoot())}function v(e){return 1===e.nodeType&&"_mce_caret"===e.id}function y(e){return e?o[e]:o}function b(e,t){e&&("string"!=typeof e?i(e,(function(e,t){b(t,e)})):(t=t.length?t:[t],i(t,(function(e){void 0===e.deep&&(e.deep=!e.selector),void 0===e.split&&(e.split=!e.selector||e.inline),void 0===e.remove&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))})),o[e]=t))}var C=function(e){var n;return t.dom.getParent(e,(function(e){return(n=t.dom.getStyle(e,"text-decoration"))&&"none"!==n})),n},_=function(e){var n;1===e.nodeType&&e.parentNode&&1===e.parentNode.nodeType&&(n=C(e.parentNode),t.dom.getStyle(e,"color")&&n?t.dom.setStyle(e,"text-decoration",n):t.dom.getStyle(e,"textdecoration")===n&&t.dom.setStyle(e,"text-decoration",null))};function x(n,o,f){var p,g,b=y(n),C=b[0],S=a.isCollapsed();function k(e,t){t=t||C,e&&(t.onformat&&t.onformat(e,t,o,f),i(t.styles,(function(t,n){r.setStyle(e,n,A(t,o))})),i(t.attributes,(function(t,n){r.setAttrib(e,n,A(t,o))})),i(t.classes,(function(t){t=A(t,o),r.hasClass(e,t)||r.addClass(e,t)})))}function T(t,a,s){var u,f,p=[],g=!0;u=C.inline||C.block,k(f=r.create(u)),c.walk(t,(function(t){var c;i(t,(function t(y){var _,x,w,T,A;return A=g,_=y.nodeName.toLowerCase(),x=y.parentNode.nodeName.toLowerCase(),1===y.nodeType&&m(y)&&(A=g,g="true"===m(y),T=!0),N(_,"br")?(c=0,void(C.block&&r.remove(y))):C.wrapper&&E(y,n,o)?void(c=0):g&&!T&&C.block&&!C.wrapper&&h(_)?(k(y=r.rename(y,u)),p.push(y),void(c=0)):void(C.selector&&(i(b,(function(e){"collapsed"in e&&e.collapsed!==S||r.is(y,e.selector)&&!v(y)&&(k(y,e),w=!0)})),!C.inline||w)?c=0:!g||T||!l(u,_)||!l(x,u)||!s&&3===y.nodeType&&1===y.nodeValue.length&&65279===y.nodeValue.charCodeAt(0)||v(y)||C.inline&&d(y)?"li"==_&&a?c=function(t,n,o,a,s){var c,l,d=[],u=-1,f=-1,p=-1;return i(t.childNodes,(function(e,t){if("UL"===e.nodeName||"OL"===e.nodeName)return u=t,c=e,!1})),i(t.childNodes,(function(e,t){"SPAN"===e.nodeName&&"bookmark"==r.getAttrib(e,"data-mce-type")&&(e.id==n.id+"_start"?f=t:e.id==n.id+"_end"&&(p=t))})),u<=0||f<u&&p>u?(i(e.grep(t.childNodes),s),0):(l=r.clone(o,!1),i(e.grep(t.childNodes),(function(e,t){(f<u&&t<u||f>u&&t>u)&&(d.push(e),e.parentNode.removeChild(e))})),f<u?t.insertBefore(l,c):f>u&&t.insertBefore(l,c.nextSibling),a.push(l),i(d,(function(e){l.appendChild(e)})),l)}(y,a,f,p,t):(c=0,i(e.grep(y.childNodes),t),T&&(g=A),c=0):(c||(c=r.clone(f,!1),y.parentNode.insertBefore(c,y),p.push(c)),c.appendChild(y)))}))})),!1===C.wrap_links&&i(p,(function(t){!function t(n){var o,a,s;if("A"===n.nodeName){for(a=r.clone(f,!1),p.push(a),s=e.grep(n.childNodes),o=0;o<s.length;o++)a.appendChild(s[o]);n.appendChild(a)}i(e.grep(n.childNodes),t)}(t)})),i(p,(function(e){var t;t=function(e){var t=0;return i(e.childNodes,(function(e){B(e)||D(e)||t++})),t}(e),!(p.length>1)&&d(e)||0!==t?(C.inline||C.wrapper)&&(C.exact||1!==t||(e=function(e){var t,n;return i(e.childNodes,(function(e){if(1==e.nodeType&&!D(e)&&!v(e))return t=e,!1})),t&&w(t,C)&&(k(n=r.clone(t,!1)),r.replace(n,e,!0),r.remove(t,1)),n||e}(e)),i(b,(function(t){i(r.select(t.inline,e),(function(e){var n;if(!1===t.wrap_links){n=e.parentNode;do{if("A"===n.nodeName)return}while(n=n.parentNode)}L(t,o,e,t.exact?e:null)}))})),C.merge_with_parents&&r.getParent(e.parentNode,(function(t){if(E(t,n,o))return r.remove(e,1),e=0,!0})),e&&!1!==C.merge_siblings&&(e=O(I(e),e),e=O(e,I(e,!0)))):r.remove(e,1)}))}if(C)if(f)f.nodeType?((g=r.createRng()).setStartBefore(f),g.setEndAfter(f),T(R(g,b),null,!0)):T(f,null,!0);else if(S&&C.inline&&!r.select("td.mceSelected,th.mceSelected").length)H("apply",n,o);else{var M=t.selection.getNode();u||!b[0].defaultBlock||r.getParent(M,r.isBlock)||x(b[0].defaultBlock),t.selection.setRng(function(){var e=t.selection.getRng(),n=e.startContainer,o=e.endContainer;if(n!=o&&0===e.endOffset){var i=function(e,t){var n=new s(t);for(f=n.current();f;f=n.prev())if(f.childNodes.length>1||f==e||"BR"==f.tagName)return f}(n,o),r=3==i.nodeType?i.length:i.childNodes.length;e.setEnd(i,r)}return e}()),p=a.getBookmark(),T(R(a.getRng(!0),b),p),C.styles&&(C.styles.color||C.styles.textDecoration)&&(e.walk(M,_,"childNodes"),_(M)),a.moveToBookmark(p),F(a.getRng(!0)),t.nodeChanged()}}function S(n,o,s){var l,u,p=y(n),h=p[0],v=!0;function b(e){return function(e,t,n,i){var a,s,c,l,u,f;if(e){for(f=e.parentNode,a=t.parentNode;a&&a!=f;a=a.parentNode){for(s=r.clone(a,!1),u=0;u<p.length;u++)if(L(p[u],o,s,s)){s=0;break}s&&(c&&s.appendChild(c),l||(l=s),c=s)}!i||h.mixed&&d(e)||(t=r.split(e,t)),c&&(n.parentNode.insertBefore(c,n),l.appendChild(n))}return t}(function(e){var t;return i(g(e.parentNode).reverse(),(function(e){var i;t||"_start"==e.id||"_end"==e.id||(i=E(e,n,o))&&!1!==i.split&&(t=e)})),t}(e),e,e,!0)}function _(e){var t=r.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return D(n)&&(n=n[e?"firstChild":"lastChild"]),r.remove(t,!0),n}function x(n){var r,a;n=R(n,p,!0),h.split&&((r=P(n,!0))!=(a=P(n))?(/^(TR|TD)$/.test(r.nodeName)&&r.firstChild&&(r=("TD"==r.nodeName?r.firstChild:r.firstChild.firstChild)||r),r=M(r,"span",{id:"_start","data-mce-type":"bookmark"}),a=M(a,"span",{id:"_end","data-mce-type":"bookmark"}),b(r),b(a),r=_(!0),a=_()):r=a=b(r),n.startContainer=r.parentNode,n.startOffset=f(r),n.endContainer=a.parentNode,n.endOffset=f(a)+1),c.walk(n,(function(n){i(n,(function(n){!function t(n){var i,r,a,s,c;if(3!==n.nodeType){if(1===n.nodeType&&m(n)&&(s=v,v="true"===m(n),c=!0),i=e.grep(n.childNodes),v&&!c)for(r=0,a=p.length;r<a&&!L(p[r],o,n,n);r++);if(h.deep&&i.length){for(r=0,a=i.length;r<a;r++)t(i[r]);c&&(v=s)}}}(n),1===n.nodeType&&"underline"===t.dom.getStyle(n,"text-decoration")&&n.parentNode&&"underline"===C(n.parentNode)&&L({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,n)}))}))}s?s.nodeType?((u=r.createRng()).setStartBefore(s),u.setEndAfter(s),x(u)):x(s):a.isCollapsed()&&h.inline&&!r.select("td.mceSelected,th.mceSelected").length?H("remove",n,o):(l=a.getBookmark(),x(a.getRng(!0)),a.moveToBookmark(l),h.inline&&k(n,o,a.getStart())&&F(a.getRng(!0)),t.nodeChanged())}function E(e,t,n,o){var i,a,s,c=y(t);function l(e,t,i){var a,s,c,l=t[i];if(t.onmatch)return t.onmatch(e,t,i);if(l)if(void 0===l.length){for(a in l)if(l.hasOwnProperty(a)){if(s="attributes"===i?r.getAttrib(e,a):T(e,a),o&&!s&&!t.exact)return;if((!o||t.exact)&&!N(s,A(l[a],n)))return}}else for(c=0;c<l.length;c++)if("attributes"===i?r.getAttrib(e,l[c]):T(e,l[c]))return t;return t}if(c&&e)for(a=0;a<c.length;a++)if(w(e,i=c[a])&&l(e,i,"attributes")&&l(e,i,"styles")){if(s=i.classes)for(a=0;a<s.length;a++)if(!r.hasClass(e,s[a]))return;return i}}function k(e,t,n){var o;function i(n){return n=r.getParent(n,(function(n){return!!E(n,e,t,!0)})),E(n,e,t)}return n?i(n):!!i(n=a.getNode())||!((o=a.getStart())==n||!i(o))}function w(e,t){return!!N(e,t.inline)||(!!N(e,t.block)||(t.selector?r.is(e,t.selector):void 0))}function N(e,t){return t=t||"",e=""+((e=e||"").nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()==t.toLowerCase()}function T(e,t){var n=r.getStyle(e,t);return"color"!=t&&"backgroundColor"!=t||(n=r.toHex(n)),"fontWeight"==t&&700==n&&(n="bold"),""+n}function A(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,(function(e,n){return t[n]||e}))),e}function B(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)}function M(e,t,n){var o=r.create(t,n);return e.parentNode.insertBefore(o,e),o.appendChild(e),o}function R(e,n,o){var i,a,c,l=e.startContainer,u=e.startOffset,p=e.endContainer,v=e.endOffset;function y(e){var t,o,i,a,s,c;if(t=o=e?l:p,a=e?"previousSibling":"nextSibling",s=r.getRoot(),3==t.nodeType&&!B(t)&&(e?u>0:v<t.nodeValue.length))return t;for(;;){if(!n[0].block_expand&&d(o))return o;for(i=o[a];i;i=i[a])if(!D(i)&&!B(i)&&("BR"!=(c=i).nodeName||!c.getAttribute("data-mce-bogus")||c.nextSibling))return o;if(o.parentNode==s){t=o;break}o=o.parentNode}return t}function b(e,t){for(void 0===t&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)(e=e.childNodes[t])&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}}function C(e){for(var t=e;t;){if(1===t.nodeType&&m(t))return"false"===m(t)?t:e;t=t.parentNode}return e}function _(e,n,i){var a,c,l,u;function f(e,t){var n,r,a=e.nodeValue;return void 0===t&&(t=i?a.length:0),i?-1===(n=(n=a.lastIndexOf(" ",t))>(r=a.lastIndexOf(" ",t))?n:r)||o||n++:(n=a.indexOf(" ",t),r=a.indexOf(" ",t),n=-1!==n&&(-1===r||n<r)?n:r),n}if(3===e.nodeType){if(-1!==(l=f(e,n)))return{container:e,offset:l};u=e}for(a=new s(e,r.getParent(e,d)||t.getBody());c=a[i?"prev":"next"]();)if(3===c.nodeType){if(u=c,-1!==(l=f(c)))return{container:c,offset:l}}else if(d(c))break;if(u)return{container:u,offset:n=i?0:u.length}}function x(t,o){var i,a,s,c;for(3==t.nodeType&&0===t.nodeValue.length&&t[o]&&(t=t[o]),i=g(t),a=0;a<i.length;a++)for(s=0;s<n.length;s++)if(!("collapsed"in(c=n[s])&&c.collapsed!==e.collapsed)&&r.is(i[a],c.selector))return i[a];return t}function S(e,t,o){var i;if(n[0].wrapper||(i=r.getParent(e,n[0].block)),i||(i=r.getParent(3==e.nodeType?e.parentNode:e,h)),i&&n[0].wrapper&&(i=g(i,"ul,ol").reverse()[0]||i),!i)for(i=e;i[t]&&!d(i[t])&&!N(i=i[t],"br"););return i||e}if(1==l.nodeType&&l.hasChildNodes()&&(i=l.childNodes.length-1,3==(l=l.childNodes[u>i?i:u]).nodeType&&(u=0)),1==p.nodeType&&p.hasChildNodes()&&(i=p.childNodes.length-1,3==(p=p.childNodes[v>i?i:v-1]).nodeType&&(v=p.nodeValue.length)),l=C(l),p=C(p),(D(l.parentNode)||D(l))&&3==(l=(l=D(l)?l:l.parentNode).nextSibling||l).nodeType&&(u=0),(D(p.parentNode)||D(p))&&3==(p=(p=D(p)?p:p.parentNode).previousSibling||p).nodeType&&(v=p.length),n[0].inline&&(e.collapsed&&((c=_(l,u,!0))&&(l=c.container,u=c.offset),(c=_(p,v))&&(p=c.container,v=c.offset)),(a=b(p,v)).node)){for(;a.node&&0===a.offset&&a.node.previousSibling;)a=b(a.node.previousSibling);a.node&&a.offset>0&&3===a.node.nodeType&&" "===a.node.nodeValue.charAt(a.offset-1)&&a.offset}return(n[0].inline||n[0].block_expand)&&(n[0].inline&&3==l.nodeType&&0!==u||(l=y(!0)),n[0].inline&&3==p.nodeType&&v!==p.nodeValue.length||(p=y())),n[0].selector&&!1!==n[0].expand&&!n[0].inline&&(l=x(l,"previousSibling"),p=x(p,"nextSibling")),(n[0].block||n[0].selector)&&(l=S(l,"previousSibling"),p=S(p,"nextSibling"),n[0].block&&(d(l)||(l=y(!0)),d(p)||(p=y()))),1==l.nodeType&&(u=f(l),l=l.parentNode),1==p.nodeType&&(v=f(p)+1,p=p.parentNode),{startContainer:l,startOffset:u,endContainer:p,endOffset:v}}function L(t,n,o,a){var s,c,f;if(!w(o,t))return!1;if("all"!=t.remove)for(i(t.styles,(function(e,t){e=A(e,n),"number"==typeof t&&(t=e,a=0),a&&!N(T(a,t),e)||r.setStyle(o,t,""),f=1})),f&&""==r.getAttrib(o,"style")&&(o.removeAttribute("style"),o.removeAttribute("data-mce-style")),i(t.attributes,(function(e,t){var s;if(e=A(e,n),"number"==typeof t&&(t=e,a=0),!a||N(r.getAttrib(a,t),e)){if("class"==t&&(e=r.getAttrib(o,t))&&(s="",i(e.split(/\s+/),(function(e){/mce\w+/.test(e)&&(s+=(s?" ":"")+e)})),s))return void r.setAttrib(o,t,s);"class"==t&&o.removeAttribute("className"),p.test(t)&&o.removeAttribute("data-mce-"+t),o.removeAttribute(t)}})),i(t.classes,(function(e){e=A(e,n),a&&!r.hasClass(a,e)||r.removeClass(o,e)})),c=r.getAttribs(o),s=0;s<c.length;s++)if(0!==c[s].nodeName.indexOf("_"))return!1;return"none"!=t.remove?(function(t,n){var o,a=t.parentNode;function s(e,t,n){return!(e=I(e,t,n))||"BR"==e.nodeName||d(e)}n.block&&(u?a==r.getRoot()&&(n.list_block&&N(t,n.list_block)||i(e.grep(t.childNodes),(function(e){l(u,e.nodeName.toLowerCase())?o?o.appendChild(e):o=M(e,u):o=0}))):d(t)&&!d(a)&&(s(t,!1)||s(t.firstChild,!0,1)||t.insertBefore(r.create("br"),t.firstChild),s(t,!0)||s(t.lastChild,!1,1)||t.appendChild(r.create("br"))));if(n.selector&&n.inline&&!N(n.inline,t))return;r.remove(t,1)}(o,t),!0):void 0}function I(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1==e.nodeType||!B(e))return e}function D(e){return e&&1==e.nodeType&&"bookmark"==e.getAttribute("data-mce-type")}function O(t,n){var o,a;function s(e,t){for(o=e;o;o=o[t]){if(3==o.nodeType&&0!==o.nodeValue.length)return e;if(1==o.nodeType&&!D(o))return o}return e}if(t&&n&&(t=s(t,"previousSibling"),n=s(n,"nextSibling"),function(e,t){if(e.nodeName!=t.nodeName)return!1;function n(e){var t={};return i(r.getAttribs(e),(function(n){var o=n.nodeName.toLowerCase();0!==o.indexOf("_")&&"style"!==o&&(t[o]=r.getAttrib(e,o))})),t}function o(e,t){var n,o;for(o in e)if(e.hasOwnProperty(o)){if(void 0===(n=t[o]))return!1;if(e[o]!=n)return!1;delete t[o]}for(o in t)if(t.hasOwnProperty(o))return!1;return!0}return!!o(n(e),n(t))&&!!o(r.parseStyle(r.getAttrib(e,"style")),r.parseStyle(r.getAttrib(t,"style")))}(t,n))){for(o=t.nextSibling;o&&o!=n;)a=o,o=o.nextSibling,t.appendChild(a);return r.remove(n),i(e.grep(n.childNodes),(function(e){t.appendChild(e)})),t}return n}function P(e,n){var o,i,r;return o=e[n?"startContainer":"endContainer"],i=e[n?"startOffset":"endOffset"],1==o.nodeType&&(r=o.childNodes.length-1,!n&&i&&i--,o=o.childNodes[i>r?r:i]),3===o.nodeType&&n&&i>=o.nodeValue.length&&(o=new s(o,t.getBody()).next()||o),3!==o.nodeType||n||0!==i||(o=new s(o,t.getBody()).prev()||o),o}function H(n,o,i){var l=t.settings.caret_debug;function d(e){var n=r.create("span",{id:"_mce_caret","data-mce-bogus":!0,style:l?"color:red":""});return e&&n.appendChild(t.getDoc().createTextNode("\ufeff")),n}function u(e,t){for(;e;){if(3===e.nodeType&&"\ufeff"!==e.nodeValue||e.childNodes.length>1)return!1;t&&1===e.nodeType&&t.push(e),e=e.firstChild}return!0}function f(e){for(;e;){if("_mce_caret"===e.id)return e;e=e.parentNode}}function p(e){var t;if(e)for(e=(t=new s(e,e)).current();e;e=t.next())if(3===e.nodeType)return e}function m(e,t){var n,o;if(e)o=a.getRng(!0),u(e)?(!1!==t&&(o.setStartBefore(e),o.setEndBefore(e)),r.remove(e)):("\ufeff"===(n=p(e)).nodeValue.charAt(0)&&(n=n.deleteData(0,1)),r.remove(e,1)),a.setRng(o);else if(!(e=f(a.getStart())))for(;e=r.get("_mce_caret");)m(e,!1)}function g(){var t;(t=f(a.getStart()))&&!r.isEmpty(t)&&e.walk(t,(function(e){1!=e.nodeType||"_mce_caret"===e.id||r.isEmpty(e)||r.setAttrib(e,"data-mce-bogus",null)}),"childNodes")}self._hasCaretEvents||(t.onBeforeGetContent.addToTop((function(){var e,t=[];if(u(f(a.getStart()),t))for(e=t.length;e--;)r.setAttrib(t[e],"data-mce-bogus","1")})),e.each("onMouseUp onKeyUp".split(" "),(function(e){t[e].addToTop((function(){m(),g()}))})),t.onKeyDown.addToTop((function(e,t){var n=t.keyCode;8!=n&&37!=n&&39!=n||m(f(a.getStart())),g()})),a.onSetContent.add(g),self._hasCaretEvents=!0),"apply"==n?function(){var e,t,n,r,s,l;r=(e=a.getRng(!0)).startOffset,l=e.startContainer.nodeValue,(t=f(a.getStart()))&&(n=p(t)),l&&r>0&&r<l.length&&/\w/.test(l.charAt(r))&&/\w/.test(l.charAt(r-1))?(s=a.getBookmark(),e.collapse(!0),e=R(e,y(o)),e=c.split(e),x(o,i,e),a.moveToBookmark(s)):(t&&"\ufeff"===n.nodeValue||(n=(t=d(!0)).firstChild,e.insertNode(t),r=1),x(o,i,t),a.setCursorLocation(n,r))}():function(){var e,t,n,s,l,u,f,p,m=a.getRng(!0),g=[];for(e=m.startContainer,t=m.startOffset,l=e,3==e.nodeType&&(t==e.nodeValue.length&&"\ufeff"!==e.nodeValue||(s=!0),l=l.parentNode);l;){if(E(l,o,i)){u=l;break}l.nextSibling&&(s=!0),g.push(l),l=l.parentNode}if(u)if(s)n=a.getBookmark(),m.collapse(!0),m=R(m,y(o),!0),m=c.split(m),S(o,i,m),a.moveToBookmark(n);else{for(l=p=d(),f=g.length-1;f>=0;f--)l.appendChild(r.clone(g[f],!1)),l=l.firstChild;l.appendChild(r.doc.createTextNode("\ufeff")),l=l.firstChild;var v=r.getParent(u,h);v&&r.isEmpty(v)?u.parentNode.replaceChild(p,u):r.insertAfter(p,u),a.setCursorLocation(l,1),r.isEmpty(u)&&r.remove(u)}}()}function F(e){var t,n,o,i,c,l=e.startContainer,d=e.startOffset;if(3==l.nodeType&&d>=l.nodeValue.length&&(d=f(l),l=l.parentNode,t=!0),1==l.nodeType)for(l=(i=l.childNodes)[Math.min(d,i.length-1)],n=new s(l,r.getParent(l,r.isBlock)),(d>i.length-1||t)&&n.next(),o=n.current();o;o=n.next())if(3==o.nodeType&&!B(o))return c=r.create("a",null,"\ufeff"),o.parentNode.insertBefore(c,o),e.setStart(o,0),a.setRng(e),void r.remove(c)}e.extend(this,{get:y,register:b,apply:x,remove:S,toggle:function(e,t,n){var o=y(e);!k(e,t,n)||"toggle"in o[0]&&!o[0].toggle?x(e,t,n):S(e,t,n)},match:k,matchAll:function(e,t){var n,o=[],i={};return n=a.getStart(),r.getParent(n,(function(n){var r,a;for(r=0;r<e.length;r++)a=e[r],!i[a]&&E(n,a,t)&&(i[a]=!0,o.push(a))}),r.getRoot()),o},matchNode:E,canApply:function(e){var t,n,o,i,s=y(e);if(s)for(t=g(a.getStart()),o=s.length-1;o>=0;o--){if(!(i=s[o].selector))return!0;for(n=t.length-1;n>=0;n--)if(r.is(t[n],i))return!0}return!1},formatChanged:function(e,o,r){var a;return n||(n={},a={},t.onNodeChange.addToTop((function(e,t,o){var r=g(o),s={};i(n,(function(e,t){i(r,(function(n){if(E(n,t,{},e.similar))return a[t]||(i(e,(function(e){e(!0,{node:n,format:t,parents:r})})),a[t]=e),s[t]=e,!1}))})),i(a,(function(e,t){s[t]||(delete a[t],i(e,(function(e){e(!1,{node:o,format:t,parents:r})})))}))}))),i(e.split(","),(function(e){n[e]||(n[e]=[],n[e].similar=r),n[e].push(o)})),this}}),b({alignleft:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"},defaultBlock:"div"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"}}],alignfull:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"},defaultBlock:"div"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(e){return!0},onformat:function(e,t,n){i(n,(function(t,n){r.setAttrib(e,n,t)}))}},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),i("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),(function(e){b(e,{block:e,remove:"all"})})),b(t.settings.formats),function(){t.addShortcut("ctrl+b","bold_desc","Bold"),t.addShortcut("ctrl+i","italic_desc","Italic"),t.addShortcut("ctrl+u","underline_desc","Underline");for(var e=1;e<=6;e++)t.addShortcut("ctrl+"+e,"",["FormatBlock",!1,"h"+e]);t.addShortcut("ctrl+7","",["FormatBlock",!1,"p"]),t.addShortcut("ctrl+8","",["FormatBlock",!1,"div"]),t.addShortcut("ctrl+9","",["FormatBlock",!1,"address"])}()}}(tinymce),tinymce.onAddEditor.add((function(e,t){var n,o,i,r=t.settings;function a(t,n){e.each(n,(function(e,n){e&&i.setStyle(t,n,e)})),i.rename(t,"span")}function s(o,a){i=o.dom,r.convert_fonts_to_spans&&e.each(i.select("font,u,strike,b,i,strong,em",a.node),(function(e){n[e.nodeName.toLowerCase()](t.dom,e)}))}r.inline_styles&&(o=e.explode(r.font_size_legacy_values),n={font:function(e,t){a(t,{backgroundColor:t.style.backgroundColor,color:t.color,fontFamily:t.face,fontSize:o[parseInt(t.size,10)-1]})},u:function(e,t){a(t,{textDecoration:"underline"})},strike:function(e,t){a(t,{textDecoration:"line-through"})},i:function(e,t){a(t,{fontStyle:"italic"})},em:function(e,t){a(t,{fontStyle:"italic"})},b:function(e,t){a(t,{fontWeight:"bold"})},strong:function(e,t){a(t,{fontWeight:"bold"})}},t.onPreProcess.add(s),t.onSetContent.add(s),t.onInit.add((function(){t.selection.onSetContent.add(s)})))})),function(e){var t=e.dom.TreeWalker;e.EnterKey=function(n){var o=n.dom,i=n.selection,r=n.settings,a=n.undoManager,s=n.schema.getNonEmptyElements();function c(c){var l,d,u,f,p,m,h,g,v,y,b,C,_,x,S=i.getRng(!0);function E(e){return e&&o.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&"true"!==o.getContentEditable(e)}function k(t){var n;e.isIE&&!e.isIE11&&o.isBlock(t)&&(n=i.getRng(),t.appendChild(o.create("span",null," ")),i.select(t),t.lastChild.outerHTML="",i.setRng(n))}function w(e){var r,a,c,l,d,u,f=e;if(c=o.createRng(),e.hasChildNodes()){for(r=new t(e,e);a=r.current();){if(3==a.nodeType){c.setStart(a,0),c.setEnd(a,0);break}if(s[a.nodeName.toLowerCase()]){c.setStartBefore(a),c.setEndBefore(a);break}f=a,a=r.next()}a||(c.setStart(f,0),c.setEnd(f,0))}else"BR"==e.nodeName?e.nextSibling&&o.isBlock(e.nextSibling)?((!m||m<9)&&(u=o.create("br"),e.parentNode.insertBefore(u,e)),c.setStartBefore(e),c.setEndBefore(e)):(c.setStartAfter(e),c.setEndAfter(e)):(c.setStart(e,0),c.setEnd(e,0));i.setRng(c),o.remove(u),d=o.getViewPort(n.getWin()),((l=o.getPos(e).y)<d.y||l+25>d.y+d.h)&&n.getWin().scrollTo(0,l<d.y?l:l-d.h+25)}function N(t){var n,i,a,s=u;if(a=n=t||"TABLE"==b?o.create(t||_):p.cloneNode(!1),!1!==r.keep_styles)do{if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(s.nodeName)){if("_mce_caret"==s.id)continue;i=s.cloneNode(!1),o.setAttrib(i,"id",""),n.hasChildNodes()?(i.appendChild(n.firstChild),n.appendChild(i)):(a=i,n.appendChild(i))}}while(s=s.parentNode);return e.isIE&&!e.isIE11||(a.innerHTML='<br data-mce-bogus="1">'),n}function T(e){var n,o,i;if(3==u.nodeType&&(e?f>0:f<u.nodeValue.length))return!1;if(u.parentNode==p&&x&&!e)return!0;if(e&&1==u.nodeType&&u==p.firstChild)return!0;if("TABLE"===u.nodeName||u.previousSibling&&"TABLE"==u.previousSibling.nodeName)return x&&!e||!x&&e;for(n=new t(u,p),3==u.nodeType&&(e&&0==f?n.prev():e||f!=u.nodeValue.length||n.next());o=n.current();){if(1===o.nodeType){if(!o.getAttribute("data-mce-bogus")&&(i=o.nodeName.toLowerCase(),s[i]&&"br"!==i))return!1}else if(3===o.nodeType&&!/^[ \t\r\n]*$/.test(o.nodeValue))return!1;e?n.prev():n.next()}return!0}function A(){var n,r,c;u&&3==u.nodeType&&f>=u.nodeValue.length&&(e.isIE&&!e.isIE11||function(){for(var e,n=new t(u,p);e=n.next();)if(s[e.nodeName.toLowerCase()]||e.length>0)return!0}()||u.nextSibling&&3==u.nextSibling.nodeType||(n=o.create("br"),S.insertNode(n),S.setStartAfter(n),S.setEndAfter(n),r=!0)),n=o.create("br"),S.insertNode(n),e.isIE&&!e.isIE11&&"PRE"==b&&(!m||m<8)&&n.parentNode.insertBefore(o.doc.createTextNode("\r"),n),c=o.create("span",{},"&nbsp;"),n.parentNode.insertBefore(c,n),i.scrollIntoView(c),o.remove(c),r?(S.setStartBefore(n),S.setEndBefore(n)):(S.setStartAfter(n),S.setEndAfter(n)),i.setRng(S),a.add()}if(S.collapsed){if(!c.isDefaultPrevented()&&(u=S.startContainer,f=S.startOffset,_=(_=(r.force_p_newlines?"p":"")||r.forced_root_block)?_.toUpperCase():"",m=o.doc.documentMode,h=c.shiftKey,1==u.nodeType&&u.hasChildNodes()&&(x=f>u.childNodes.length-1,u=u.childNodes[Math.min(f,u.childNodes.length-1)]||u,f=x&&3==u.nodeType?u.nodeValue.length:0),d=function(e){var t,n,i=o.getRoot();for(t=e;t!==i&&"false"!==o.getContentEditable(t)&&("true"===o.getContentEditable(t)&&(n=t),t);)t=t.parentNode;return t&&t!==i?n:i}(u)))if(a.beforeChange(),o.isBlock(d)||d==o.getRoot()){if((_&&!h||!_&&h)&&(u=function(e,t){var n,i,r,a,s,c=_||"P";if(!(i=o.getParent(e,o.isBlock))||!E(i)){if(!(i=i||d).hasChildNodes())return n=o.create(c),i.appendChild(n),S.setStart(n,0),S.setEnd(n,0),n;for(a=e;a.parentNode!=i;)a=a.parentNode;for(;a&&!o.isBlock(a);)r=a,a=a.previousSibling;if(r){for(n=o.create(c),r.parentNode.insertBefore(n,r),a=r;a&&!o.isBlock(a);)s=a.nextSibling,n.appendChild(a),a=s;S.setStart(e,t),S.setEnd(e,t)}}return e}(u,f)),p=o.getParent(u,o.isBlock),y=p?o.getParent(p.parentNode,o.isBlock):null,b=p?p.nodeName.toUpperCase():"","LI"!=(C=y?y.nodeName.toUpperCase():"")||c.ctrlKey||(p=y,b=C),"LI"==b){if(!_&&h)return void A();if(o.isEmpty(p))return!/^(UL|OL|LI)$/.test(y.parentNode.nodeName)&&void function(){function e(e){for(var t=y[e?"firstChild":"lastChild"];t&&1!=t.nodeType;)t=t[e?"nextSibling":"previousSibling"];return t===p}g=_?N(_):o.create("BR"),e(!0)&&e()?o.replace(g,y):e(!0)?y.parentNode.insertBefore(g,y):e()?(o.insertAfter(g,y),k(g)):((l=S.cloneRange()).setStartAfter(p),l.setEndAfter(y),v=l.extractContents(),o.insertAfter(v,y),o.insertAfter(g,y)),o.remove(p),w(g),a.add()}()}if("PRE"==b&&!1!==r.br_in_pre){if(!h)return void A()}else if(!_&&!h&&"LI"!=b||_&&h)return void A();var B,M;_=_||"P",T()?(g=/^(H[1-6]|PRE)$/.test(b)&&"HGROUP"!=C?N(_):N(),r.end_container_on_empty_block&&E(y)&&o.isEmpty(p)?g=o.split(y,p):o.insertAfter(g,p),w(g)):T(!0)?k(g=p.parentNode.insertBefore(N(),p)):((l=S.cloneRange()).setEndAfter(p),function(e){do{3===e.nodeType&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild}while(e)}(v=l.extractContents()),g=v.firstChild,o.insertAfter(v,p),function(e){for(var t,n=e,i=[];n=n.firstChild;){if(o.isBlock(n))return;1!=n.nodeType||s[n.nodeName.toLowerCase()]||i.push(n)}for(t=i.length;t--;)(!(n=i[t]).hasChildNodes()||n.firstChild==n.lastChild&&""===n.firstChild.nodeValue||"A"==n.nodeName&&" "===(n.innerText||n.textContent))&&o.remove(n)}(g),B=p,e.isIE&&!e.isIE11||(B.normalize(),(M=B.lastChild)&&!/^(left|right)$/gi.test(o.getStyle(M,"float",!0))||o.add(B,"br")),w(g)),o.setAttrib(g,"id",""),a.add()}else _&&!h||A()}else n.execCommand("Delete")}n.onKeyDown.add((function(e,t){13==t.keyCode&&!1!==c(t)&&t.preventDefault()}))}}(tinymce)}}]);